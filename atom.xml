<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ğŸ’»Lestat&#39;s Blog</title>
  
  <subtitle>A new beginning,a new chapter of my life</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://lestatmiao.github.io/"/>
  <updated>2018-06-30T15:30:07.000Z</updated>
  <id>https://lestatmiao.github.io/</id>
  
  <author>
    <name>Lestat</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åŒä¸€é¡µé¢å·§å¦™ä½¿ç”¨å¤šä¸ªelement-uiçš„uploadç»„ä»¶</title>
    <link href="https://lestatmiao.github.io/2018/06/30/%E5%90%8C%E4%B8%80%E9%A1%B5%E9%9D%A2%E5%B7%A7%E5%A6%99%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AAelement-ui%E7%9A%84upload%E7%BB%84%E4%BB%B6/"/>
    <id>https://lestatmiao.github.io/2018/06/30/åŒä¸€é¡µé¢å·§å¦™ä½¿ç”¨å¤šä¸ªelement-uiçš„uploadç»„ä»¶/</id>
    <published>2018-06-30T14:04:25.000Z</published>
    <updated>2018-06-30T15:30:07.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>æœ€è¿‘åœ¨ä½¿ç”¨SSR(æœåŠ¡å™¨ç«¯æ¸²æŸ“)æ–¹å¼å¼•å…¥<code>vue</code>+<code>element-ui</code>å¼€å‘ä¸€ä¸ªå•†åŸé¡¹ç›®çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜:å› ä¸ºå•†åŸçš„è®¢å•æ˜¯å¯èƒ½åŒ…å«å¤šä¸ªå•†å“,æ‰€ä»¥è®¢å•çš„è¯„ä»·æ¶‰åŠåˆ°åŒä¸€ä¸ªé¡µé¢å¤šç»„è¡¨å•çš„å¼‚æ­¥æäº¤(æ¯ä¸€ç»„è¡¨å•åŒ…å«è¯„ä»·å†…å®¹å’Œä¸Šä¼ çš„å¤šå¼ å›¾ç‰‡)<br>ç”±äº<code>element-ui</code>çš„<code>upload</code>ç»„ä»¶é»˜è®¤æ²¡æœ‰æä¾›å¤šä¸ªç»„ä»¶åœ¨åŒä¸€é¡µé¢ç»‘å®šä¸åŒæ¨¡å‹çš„æ¥å£,å› æ­¤åœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹,æœåˆ°äº†<a href="https://www.guoxiongfei.cn/cntech/2701.html" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>,æ–‡ç« ä¸­æœ€åçš„å»ºè®®æ˜¯è‡ªå·±å°è£…ä¸€ä¸ªç»„ä»¶æ¥è°ƒç”¨<code>upload</code>ç»„ä»¶,ä½¿ç”¨çš„æ—¶å€™ç›´æ¥è°ƒç”¨è‡ªå·±å°è£…çš„è¿™ä¸ªç»„ä»¶,ä½†æ˜¯é¡¹ç›®æ—¶é—´ç´§è¿«,æˆ‘è¿™è¾¹å¸Œæœ›æ›´å¿«çš„æå®šè¿™ä¸ªé—®é¢˜,äºæ˜¯æƒ³åˆ°äº†ä»¥ä¸‹åŠæ³•  </p><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>åœ¨<code>upload</code>ç»„ä»¶çš„æ¥å£ä¸­,æœ‰ä¸€ä¸ª<code>data</code>æ¥å£,å¯ä»¥ç»‘å®šéœ€è¦ä¸Šä¼ çš„é™¤æ–‡ä»¶ä¹‹å¤–çš„å…¶ä»–æ•°æ®å¯¹è±¡,ç”±äºè®¢å•è¯„ä»·é¡µçš„ä¸€ä¸ªç‰¹ç‚¹:æ¯ä¸ªå•†å“ä¸è®ºæ•°é‡å¤§å°éƒ½åªä¼šè¢«è¯„ä»·ä¸€æ¬¡,å› æ­¤æ­¤å¤„ç›´æ¥å°†å½“å‰æ•°ç»„ä¸­å•†å“çš„uuidç»‘å®šåˆ°dataå¹¶ä¼ é€’è‡³ä¸Šä¼ æ¥å£,æ­¤æ“ä½œåè¡¨å•æäº¤çš„payloadå°±ä¼šåŒ…å«ç±»ä¼¼å¦‚ä¸‹æ•°æ®:<br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Disposition</span>: form-data; name="uuid"</span><br><span class="line"></span><br><span class="line"><span class="attribute">E7D947BA-79F1-11E8-B786-00163E063020</span></span><br></pre></td></tr></table></figure></p><p>è€Œåå°æ–‡ä»¶ä¸Šä¼ ä½ç½®å¯ä»¥åšä¸€ä¸ªåˆ¤æ–­:å¦‚æœæ¥æ”¶çš„ä¸Šä¼ è¯·æ±‚åŒ…å«é¢å¤–å‚æ•°,åˆ™å…¨éƒ¨åŸè·¯è¿”å›,å› æ­¤åœ¨ä¸Šä¼ æˆåŠŸååˆä¼šåœ¨<code>on-success</code>è¿™ä¸ªé’©å­æ¥æ”¶åˆ°è¿™ä¸ªå”¯ä¸€çš„uuid,æ­¤å¤„å¯¹å½“å‰é¡µé¢å•†å“æ•°ç»„è¿›è¡Œéå†å¹¶è¿›è¡Œæ¯”å¯¹,åœ¨åŒ…å«è¿”å›çš„<code>uuid</code>å¯¹åº”æ•°ç»„çš„å¯¹åº”ä¿å­˜ç»„å›¾è·¯å¾„çš„æ•°ç»„<code>push</code>å½“å‰ä¸Šä¼ æˆåŠŸçš„å›¾ç‰‡è·¯å¾„  </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.data.goods_list.forEach(<span class="function">(<span class="params">e,k</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e.uuid === response.uuid)&#123;</span><br><span class="line">        e.evaluate.thumbs.push(response.url)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç (html):<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"userEva-cont"</span> <span class="attr">v-for</span>=<span class="string">"(item,key) in data.goods_list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"userEva-table"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">"420"</span>&gt;</span>å•†å“<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">"280"</span>&gt;</span>å‹å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">"280"</span>&gt;</span>æ•°é‡<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"evaluate-pic"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">"'/product/'+item.goods_id+'.html'"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"'__PHOTO__'+item.thumb"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"evaluate-text"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>&#123;&#123;item.goods_name&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç¼–å·ï¼š&#123;&#123;item.uuid&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å‹å·ï¼š&#123;&#123;item.goods_specification_name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.num&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"evaluate-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span>è¯„è®ºï¼š<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model</span>=<span class="string">"item.evaluate.content"</span> <span class="attr">placeholder</span>=<span class="string">"è¯„è®ºå†…å®¹"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span>æ™’å•ï¼š<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">class</span>=<span class="string">"upload-demo"</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:action</span>=<span class="string">"basePath"</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:on-preview</span>=<span class="string">"handlePreview"</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:on-remove</span>=<span class="string">"handleRemove"</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">drag</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">multiple</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:data</span>=<span class="string">"item"</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:limit</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:on-success</span>=<span class="string">"setFileList"</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">list-type</span>=<span class="string">"picture"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-upload"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"el-upload__text"</span>&gt;</span>å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–<span class="tag">&lt;<span class="name">em</span>&gt;</span>ç‚¹å‡»ä¸Šä¼ <span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"el-upload__tip"</span> <span class="attr">slot</span>=<span class="string">"tip"</span>&gt;</span>åªèƒ½ä¸Šä¼ jpg/pngæ–‡ä»¶ï¼Œä¸”ä¸è¶…è¿‡500kb<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"evaluate-btns"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"evaluate-sub"</span> @<span class="attr">click</span>=<span class="string">"submit(item.evaluate,item)"</span>&gt;</span>æäº¤è¯„ä»·<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">class</span>=<span class="string">"evaluate-show"</span> <span class="attr">v-model</span>=<span class="string">"item.evaluate.is_anonymous"</span>&gt;</span>åŒ¿åè¯„ä»·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    * todo:åˆå§‹åŒ–vue</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#container'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        data: __PAGE_DATA__,</span><br><span class="line">        evaluateUrl: <span class="string">'/evaluate.html'</span>,</span><br><span class="line">        imgDialogVisible: <span class="literal">false</span>,</span><br><span class="line">        tempPath: <span class="string">''</span>,</span><br><span class="line">        basePath: <span class="string">''</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        <span class="keyword">this</span>.basePath = Vue.prototype.fileUploadBasePath</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleRemove(file, fileList) &#123;</span><br><span class="line">            <span class="keyword">this</span>.data.goods_list.forEach(<span class="function">(<span class="params">e,k</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(e.uuid === file.response.uuid)&#123;</span><br><span class="line">                    <span class="comment">//æ‰¾åˆ°å½“å‰urlä¸‹æ ‡</span></span><br><span class="line">                    <span class="keyword">const</span> index = e.evaluate.thumbs.indexOf(file.response.url)</span><br><span class="line">                    <span class="keyword">if</span>(index !== <span class="number">-1</span>)&#123;</span><br><span class="line">                        <span class="comment">//åˆ é™¤</span></span><br><span class="line">                        e.evaluate.thumbs.splice(index,<span class="number">1</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        handlePreview(file) &#123;</span><br><span class="line">            <span class="keyword">this</span>.tempPath = file.response.url</span><br><span class="line">            <span class="keyword">this</span>.imgDialogVisible = <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        setFileList(response, file, fileList)&#123;</span><br><span class="line">            <span class="keyword">this</span>.data.goods_list.forEach(<span class="function">(<span class="params">e,k</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(e.uuid === response.uuid)&#123;</span><br><span class="line">                    e.evaluate.thumbs.push(response.url)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        submit(evaluate,item)&#123;</span><br><span class="line">            evaluate.id = item.goods_id</span><br><span class="line">            evaluate.goods_name = item.goods_name</span><br><span class="line">            evaluate.goods_specification_name = item.goods_specification_name</span><br><span class="line">            evaluate.order_id = <span class="keyword">this</span>.data.goods.o_id</span><br><span class="line">            evaluate = <span class="built_in">Object</span>.assign(&#123;&#125;, evaluate)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.$http.post(<span class="keyword">this</span>.evaluateUrl,&#123;<span class="attr">no</span>:<span class="keyword">this</span>.data.goods.o_orderno,<span class="attr">evaluate</span>:evaluate&#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(response.data.status === <span class="number">200</span>)&#123;</span><br><span class="line">                    <span class="comment">//é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">                    <span class="keyword">this</span>.$http.get(location.href).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(response.data.status === <span class="number">200</span>)&#123;</span><br><span class="line">                            <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">                                message:<span class="string">'è¯„ä»·æˆåŠŸ!'</span>,</span><br><span class="line">                                type:<span class="string">'success'</span></span><br><span class="line">                            &#125;)</span><br><span class="line">                            <span class="comment">//é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">                            <span class="keyword">this</span>.data = response.data.data</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;).catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">                        message:response.data.message,</span><br><span class="line">                        type:<span class="string">'error'</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><blockquote><p>è‡³æ­¤,ç»è¿‡æµ‹è¯•,è§£å†³äº†åŒä¸€é¡µé¢å¤šä¸ªuploadç»„ä»¶ä¸Šä¼ é¢„è§ˆå¹¶åˆ†åˆ«å¼‚æ­¥æäº¤å¯¹åº”è¡¨å•åˆ°åå°çš„é—®é¢˜</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
      <category term="é—®é¢˜è®°å½•" scheme="https://lestatmiao.github.io/categories/%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
    
    
      <category term="vue" scheme="https://lestatmiao.github.io/tags/vue/"/>
    
      <category term="element-ui" scheme="https://lestatmiao.github.io/tags/element-ui/"/>
    
  </entry>
  
  <entry>
    <title>vpsä½¿ç”¨googleçš„bbrè„šæœ¬åŠ é€Ÿ</title>
    <link href="https://lestatmiao.github.io/2018/06/06/vps%E4%BD%BF%E7%94%A8google%E7%9A%84bbr%E8%84%9A%E6%9C%AC%E5%8A%A0%E9%80%9F/"/>
    <id>https://lestatmiao.github.io/2018/06/06/vpsä½¿ç”¨googleçš„bbrè„šæœ¬åŠ é€Ÿ/</id>
    <published>2018-06-06T03:36:38.000Z</published>
    <updated>2018-06-06T04:18:13.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>ä»å»å¹´å¼€å§‹ç”¨vultrçš„vps,å…ˆæ˜¯æ­å»ºäº†ssserver,ç„¶åå„ç§webæœåŠ¡,ä»¥ä¸€ä¸ªnginxä¸ºä»£ç†æœåŠ¡å™¨,ä»£ç†æœ¬åœ°ä¸åŒç«¯å£çš„å„ç§æœåŠ¡,æ€»ä½“æ¥è¯´,vultrå®¶çš„vpsä½“éªŒå¾ˆå¥½,é™¤äº†ä¸€ç‚¹:é€Ÿåº¦è¾ƒæ…¢,å°¤å…¶æ˜¯æ™šä¸Š8-11ç‚¹(æˆ‘ä¹°çš„æ˜¯ä¸œäº¬èŠ‚ç‚¹),ä¹‹å‰åœ¨googleä¸Šçœ‹äº†å¾ˆä¹…å…³äºvpsåŠ é€Ÿçš„æ–¹æ¡ˆ,åŸºæœ¬éƒ½æ˜¯é€šè¿‡é”é€Ÿ,kcptunè¾ƒå¤š  </p><ol><li>é”é€Ÿ:å›½äº§è½¯ä»¶,æ”¶è´¹,ä¸”ä¸å¼€æº,ä¸å¼€æº,æ„å‘³ç€å¯èƒ½è¢«ç›‘æ§,æ‰€ä»¥ç›´æ¥pass  </li><li>kcptun:ä¸ªäººè§‰å¾—éº»çƒ¦,serverç«¯é…äº†è¿˜è¦é…client<br>æœ€å:å½“æ—¶æ²¡å‘ç°googleçš„bbr,äºæ˜¯å°†å°±ç”¨ç€,ä¹Ÿè¿˜è¡Œ,å°±æ˜¯å¶å°”æƒ³çœ‹çœ‹youtubeçš„æ—¶å€™åªèƒ½çœ‹480pçš„,è¿˜å¡çš„å‰å®³â€¦<br>ç›´åˆ°å‰å‡ å¤©,æ— æ„ä¸­çœ‹åˆ°googleçš„tcp-bbræ‹¥å¡æ§åˆ¶æŠ€æœ¯â€¦<br><a href="https://github.com/google/bbr" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></li></ol><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><ol><li>ç¡®è®¤VPSçš„è™šæ‹ŸåŒ–æŠ€æœ¯ä¸ä¸º<code>Openvz</code>(vultrçš„æœåŠ¡å™¨éƒ½ä¸æ˜¯<code>Openvz</code>O(âˆ©_âˆ©)Oå“ˆå“ˆ~)</li><li>ä¸‹è½½è„šæœ¬<code>wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh</code></li><li>æŸ¥çœ‹è„šæœ¬æ”¯æŒçš„ç³»ç»Ÿç‰ˆæœ¬(æ”¯æŒå†…æ ¸ç‰ˆæœ¬å¤§äº4.9çš„ç³»ç»Ÿ),<code>cat ./bbr.sh</code><br>åœ¨è„šæœ¬å¼€å§‹çš„æ³¨é‡Šä¸­åŒ…å«ä»¥ä¸‹ä¿¡æ¯:<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System Required:  CentOS 6+, Debian7+, Ubuntu12+</span><br></pre></td></tr></table></figure></li></ol><p>æˆ‘å½“å‰çš„vpsæ˜¯<code>Ubuntu 18.04 LTS</code>,å› æ­¤æ»¡è¶³å¼€å¯<code>tcp_bbr</code>çš„æ¡ä»¶  </p><ol start="4"><li>èµ‹äºˆæ‰§è¡Œæƒé™:<code>chmod +x ./bbr.sh</code></li><li>æ‰§è¡Œ:<code>./bbr.sh</code></li><li>å®Œæˆåä½¿ç”¨<code>lsmod | grep tcp_bbr</code>æŸ¥çœ‹<code>tcp_bbr</code>åŠ é€Ÿæ¨¡å—æ˜¯å¦å·²ç»å®‰è£…æˆåŠŸ</li><li>é‡å¯vps:<code>reboot</code></li></ol><h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><p>ç›´æ¥çœ‹YouTubeçš„1080Pè§†é¢‘å§,æœ€ç›´è§‚,ç›´æ¥ä¸Šå›¾<br><img src="https://lestat.b0.upaiyun.com/blog/bbr_speed.jpg" alt><br>å…¨ç¨‹æ— å¡é¡¿  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="google" scheme="https://lestatmiao.github.io/tags/google/"/>
    
      <category term="vps" scheme="https://lestatmiao.github.io/tags/vps/"/>
    
  </entry>
  
  <entry>
    <title>gitlabå‡ºç°forbiddençš„è§£å†³æ–¹æ³•</title>
    <link href="https://lestatmiao.github.io/2018/06/06/gitlab%E5%87%BA%E7%8E%B0forbidden%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <id>https://lestatmiao.github.io/2018/06/06/gitlabå‡ºç°forbiddençš„è§£å†³æ–¹æ³•/</id>
    <published>2018-06-06T03:22:24.000Z</published>
    <updated>2018-06-06T03:32:35.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>å‰äº›å¤©åœ¨å…¬å¸çš„æµ‹è¯•æœåŠ¡å™¨ä¸ŠåŸºäºdockerå®‰è£…äº†gitlab,ä»Šå¤©åŒäº‹çªç„¶åæ˜ gitlabåœ°å€è®¿é—®çš„æ—¶å€™é¡µé¢æç¤º<code>Forbidden</code>,httpçŠ¶æ€ç ä¹Ÿæ˜¯å¯¹åº”çš„<code>403</code>,äºæ˜¯googleä¸€ä¸‹,å‘ç°åŸå› å¯èƒ½æ˜¯è¾ƒå¤šçš„å¹¶å‘å¯¼è‡´çš„è®¿é—®è¢«æ‹’ç»</p><h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><blockquote><p>Gitlabä½¿ç”¨rack_attackåšäº†å¹¶å‘è®¿é—®çš„é™åˆ¶</p></blockquote><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>é…ç½®<code>/etc/gitlab/gitlab.rb</code>æ–‡ä»¶,æœåŠ¡å™¨å½“å‰ä½¿ç”¨çš„docker,å¯¹åº”ç›®å½•æ˜¯<code>/home/gitlab/config/gitlab.rb</code>(è¯¥ç›®å½•/æ–‡ä»¶æ ¹æ®dockerå®¹å™¨åˆ›å»ºæ—¶æŒ‡å®šçš„ç›®å½•/æ–‡ä»¶æ˜ å°„å…³ç³»å†³å®š)  </p><p>æ‰¾åˆ°ä¸‹é¢è¿™æ®µé…ç½®<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gitlab_rails['rack_attack_git_basic_auth'] = &#123;</span><br><span class="line">  'enabled' =&gt; true,</span><br><span class="line">  'ip_whitelist' =&gt; ["127.0.0.1", "æœåŠ¡å™¨å…¬ç½‘ip"],</span><br><span class="line">  'maxretry' =&gt; 10,</span><br><span class="line">  'findtime' =&gt; 60,</span><br><span class="line">  'bantime' =&gt; 3600</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å»æ‰æ³¨é‡Š,ç„¶åæ”¹ä¸º<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gitlab_rails['rack_attack_git_basic_auth'] = &#123;</span><br><span class="line">  'enabled' =&gt; true,</span><br><span class="line">  'ip_whitelist' =&gt; ["127.0.0.1", "æœåŠ¡å™¨å…¬ç½‘ip"],</span><br><span class="line">  'maxretry' =&gt; 100,</span><br><span class="line">  'findtime' =&gt; 60,</span><br><span class="line">  'bantime' =&gt; 60</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¿å­˜é€€å‡º  </p><p>è¿è¡Œ<code>docker exec å®¹å™¨åç§° gitlab-ctl reconfigure</code><br>è‡³æ­¤,ä¸Šè¿°é—®é¢˜è§£å†³  </p><blockquote><p><a href="https://stackoverflow.com/questions/36298959/gitlab-issuing-temporary-ip-bans-403-forbidden" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥:GitLab issuing temporary IP bans - 403 forbidden</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="docker" scheme="https://lestatmiao.github.io/tags/docker/"/>
    
      <category term="gitlab" scheme="https://lestatmiao.github.io/tags/gitlab/"/>
    
  </entry>
  
  <entry>
    <title>dockeræ­å»ºgitlabå’ŒsvnæœåŠ¡</title>
    <link href="https://lestatmiao.github.io/2018/05/21/docker%E6%90%AD%E5%BB%BAgitlab%E5%92%8Csvn%E6%9C%8D%E5%8A%A1/"/>
    <id>https://lestatmiao.github.io/2018/05/21/dockeræ­å»ºgitlabå’ŒsvnæœåŠ¡/</id>
    <published>2018-05-21T09:15:59.000Z</published>
    <updated>2018-06-04T02:36:06.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>ä¹‹å‰å…¬å¸é‡Œçš„ä»£ç éƒ½æ˜¯æ‰˜ç®¡åˆ°å±€åŸŸç½‘æœåŠ¡å™¨ä¸Šçš„,ç°åœ¨ç”±äºéƒ¨åˆ†åŒäº‹è¿œç¨‹åŠå…¬çš„éœ€è¦,è®¡åˆ’æŠŠgitå’Œsvnéƒ½è½¬åˆ°å…¬ç½‘çš„centosæœåŠ¡å™¨ä¸Šå»,ä½†æ˜¯gitlabçš„é…ç½®æ˜¯çœŸå¿ƒè´¹æ—¶é—´,æ‰€ä»¥å†³å®šç”¨dockeræ¥åšè¿™ä¸ªäº‹æƒ…,ä»¥ä¸‹æ˜¯ä¸€äº›æ­¥éª¤å’Œæ€»ç»“  </p></blockquote><h3 id="ä½¿ç”¨daocloudç»™dockeråŠ ä¸ªé€Ÿå…ˆâ€¦"><a href="#ä½¿ç”¨daocloudç»™dockeråŠ ä¸ªé€Ÿå…ˆâ€¦" class="headerlink" title="ä½¿ç”¨daocloudç»™dockeråŠ ä¸ªé€Ÿå…ˆâ€¦"></a>ä½¿ç”¨daocloudç»™dockeråŠ ä¸ªé€Ÿå…ˆâ€¦</h3><p>å¯ä»¥é€šè¿‡è¿™ä¸ª<a href="http://www.daocloud.io/mirror#accelerator-doc" target="_blank" rel="noopener">é“¾æ¥</a>é‡Œé¢çš„å‘½ä»¤ç»™dockeræ”¹ä¸ªæº,ä¸ç„¶é€Ÿåº¦æ…¢æ­»â€¦</p><h3 id="gitlabå®‰è£…"><a href="#gitlabå®‰è£…" class="headerlink" title="gitlabå®‰è£…"></a>gitlabå®‰è£…</h3><ol><li><p>æ‹‰å–é•œåƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»ºæˆæƒç”¨æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -d /home/gitlab -s /bin/sh -m gitlab</span><br></pre></td></tr></table></figure></li><li><p>åå°è¿è¡Œå®¹å™¨,æŒ‡å®šåŸŸå,ç«¯å£æ˜ å°„å…³ç³»,ç›®å½•æ˜ å°„å…³ç³»,å°†å®¹å™¨å‘½åä¸ºgitlab,æ–¹ä¾¿åç»­æ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run --detach \</span><br><span class="line">  --hostname git.vcs.trycheers.com \</span><br><span class="line">  --publish 10443:443 --publish 10080:80 --publish 10022:22 \</span><br><span class="line">  --name gitlab \</span><br><span class="line">  --restart always \</span><br><span class="line">  --volume /home/gitlab/config:/etc/gitlab \</span><br><span class="line">  --volume /home/gitlab/logs:/var/<span class="built_in">log</span>/gitlab \</span><br><span class="line">  --volume /home/gitlab/data:/var/opt/gitlab \</span><br><span class="line">  gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure></li><li><p>ç”¨apacheå¯¹<code>10080</code>ç«¯å£è¿›è¡Œåä»£,ä½¿ä¹‹èƒ½å¤Ÿé€šè¿‡åŸŸåè®¿é—®  </p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span></span><br><span class="line"> <span class="attribute"><span class="nomarkup">ServerName</span></span> hostname</span><br><span class="line"> <span class="attribute">ProxyPreserveHost</span> <span class="literal">On</span> </span><br><span class="line"> <span class="attribute">ProxyPass</span> / http://localhost:10080/</span><br><span class="line"> <span class="attribute">ProxyPassReverse</span> / http://localhost:10080/</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="svnå®‰è£…"><a href="#svnå®‰è£…" class="headerlink" title="svnå®‰è£…"></a>svnå®‰è£…</h3><ol><li><p>åå°è¿è¡Œå®¹å™¨,æŒ‡å®šç«¯å£æ˜ å°„å…³ç³»,ç›®å½•æ˜ å°„å…³ç³»,å°†å®¹å™¨å‘½åä¸ºsvn,æ–¹ä¾¿åç»­æ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9200:80 -p 9201:443 -v /home/subversion/svn:/var/<span class="built_in">local</span>/svn -v /home/subversion/svn_backup:/var/svn-backup -v /home/subversion/svn_conf/:/etc/apache2/dav_svn/ --name svn marvambass/subversion</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ svnç”¨æˆ·  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">htdigest /home/subversion/svn_conf/dav_svn.passwd Subversion username</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ä»“åº“/åˆ†ç»„/ç”¨æˆ·æƒé™<br>ç›´æ¥ç¼–è¾‘<code>/home/subversion/svn_conf/dav_svn.authz</code></p></li><li><p>ç”¨apacheå¯¹<code>9200</code>ç«¯å£è¿›è¡Œåä»£,ä½¿ä¹‹èƒ½å¤Ÿé€šè¿‡åŸŸåè®¿é—®  </p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span></span><br><span class="line"> <span class="attribute"><span class="nomarkup">ServerName</span></span> hostname</span><br><span class="line"> <span class="attribute">ProxyPreserveHost</span> <span class="literal">On</span> </span><br><span class="line"> <span class="attribute">ProxyPass</span> / http://localhost:9200/</span><br><span class="line"> <span class="attribute">ProxyPassReverse</span> / http://localhost:9200/</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="å…³äºgitlabçš„ç³»ç»Ÿèµ„æºå ç”¨"><a href="#å…³äºgitlabçš„ç³»ç»Ÿèµ„æºå ç”¨" class="headerlink" title="å…³äºgitlabçš„ç³»ç»Ÿèµ„æºå ç”¨"></a>å…³äºgitlabçš„ç³»ç»Ÿèµ„æºå ç”¨</h3><p>çœ‹å›¾è¯´è¯<br><img src="https://lestat.b0.upaiyun.com/blog/gitlab-stats.png" alt><br>åœ¨dockerä¸­å¸¸é©»å†…å­˜å¤§æ¦‚æ˜¯2GB+,cpuå¼€é”€é€šå¸¸åªæ˜¯åœ¨å¯åŠ¨æ—¶å€™ç‰¹åˆ«å¤§,å› æ­¤è¦è¿è¡Œ<code>gitlab</code>æ¨è<strong>è‡³å°‘</strong>ä½¿ç”¨2æ ¸4GBçš„æœåŠ¡å™¨é…ç½®!</p><blockquote><p>å“,ä¹Ÿéš¾æ€ªå½“æ—¶æŠ˜è…¾åŠå¤©ä¹Ÿæ²¡èƒ½åœ¨æˆ‘å®¶æ ‘è“æ´¾(armæ¶æ„çš„4æ ¸cpu,512Må†…å­˜â€¦)ä¸Šæå®š<code>gitlab</code>â€¦</p></blockquote><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>gitlabåœ¨åˆšå¯åŠ¨æ—¶ä¼šåŠ è½½å¤§é‡çš„ç¯å¢ƒä¾èµ–,å› æ­¤å¯èƒ½å‡ºç°cpuå ç”¨é«˜çš„æƒ…å†µ,æ ¹æ®æœåŠ¡å™¨æ€§èƒ½ä¸åŒä¼šæŒç»­ä¸€æ®µæ—¶é—´,é€šå¸¸åœ¨cpuå ç”¨é™è‡³æ­£å¸¸æ—¶æ‰èƒ½è®¿é—®åˆ°æœ¬åœ°çš„gitlabé¡¹ç›®  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="docker" scheme="https://lestatmiao.github.io/tags/docker/"/>
    
      <category term="gitlab" scheme="https://lestatmiao.github.io/tags/gitlab/"/>
    
      <category term="svn" scheme="https://lestatmiao.github.io/tags/svn/"/>
    
  </entry>
  
  <entry>
    <title>æ ‘è“æ´¾ç©è€è®°</title>
    <link href="https://lestatmiao.github.io/2018/04/14/%E6%A0%91%E8%8E%93%E6%B4%BE%E7%8E%A9%E8%80%8D%E8%AE%B0/"/>
    <id>https://lestatmiao.github.io/2018/04/14/æ ‘è“æ´¾ç©è€è®°/</id>
    <published>2018-04-14T13:52:41.000Z</published>
    <updated>2018-04-15T03:29:22.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>è¿™ç¯‡æ–‡ç« æ˜¯è‡ªå·±å…¥æ‰‹æ ‘è“æ´¾ä¹‹åçš„ä¸€äº›ä½¿ç”¨è®°å½•<br>å‰äº›å¤©çœ‹ v2ex ä¸Šæœ‰äººè®¨è®ºæ ‘è“æ´¾ï¼Œäºæ˜¯å‡ºäºå¥½å¥‡åœ¨æ·˜å®ä¸Šæ·˜äº†ä¸€åªæ ‘è“æ´¾æ¥ç©ç©</p></blockquote><p>ä½“ç§¯è¶…çº§å°â€¦<br><img src="https://lestat.b0.upaiyun.com/blog/20180414/211523716251_.pic_hd.jpg" alt></p><p>ä¸€ä¸ªæ¿å­,ä¸€ä¸ªå¡‘æ–™ç›’å­è£…ä¸Šå®Œå·¥<br><img src="https://lestat.b0.upaiyun.com/blog/20180414/201523716248_.pic_hd.jpg" alt></p><p>åˆšå¼€å§‹çš„æ—¶å€™å°è¯•äº†ä¸€ä¸‹å®˜æ–¹çš„<a href="https://www.raspberrypi.org/downloads/noobs/" target="_blank" rel="noopener">NOOBS</a>å·¥å…·å®‰è£…<a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener">raspbian</a>ç³»ç»Ÿ,è¿™ä¸ªç³»ç»Ÿæ˜¯ä¸ºæ ‘è“æ´¾å®šåˆ¶çš„åŸºäº<a href="https://zh.wikipedia.org/wiki/Debian" target="_blank" rel="noopener">Debian</a>çš„ linux ç³»ç»Ÿ,ä½†ä¸çŸ¥ä»€ä¹ˆåŸå› æ€»æ˜¯é—´æ­‡æ€§å¡æ­»,åŠ ä¹‹ä¸ªäººåå¥½ ubuntu ä¸€ç‚¹,äºæ˜¯å®‰è£…äº†<a href="https://zh.wikipedia.org/wiki/Ubuntu_MATE" target="_blank" rel="noopener">Ubuntu_MATE</a></p><h3 id="ç³»ç»Ÿå®‰è£…åŸºæœ¬æ­¥éª¤"><a href="#ç³»ç»Ÿå®‰è£…åŸºæœ¬æ­¥éª¤" class="headerlink" title="ç³»ç»Ÿå®‰è£…åŸºæœ¬æ­¥éª¤:"></a>ç³»ç»Ÿå®‰è£…åŸºæœ¬æ­¥éª¤:</h3><ol><li>ä¸‹è½½<a href="https://ubuntu-mate.org/download/" target="_blank" rel="noopener">ç³»ç»Ÿé•œåƒ</a></li><li>å°†ä¸‹è½½çš„<code>ubuntu-mate-16.04.2-desktop-armhf-raspberry-pi.img</code>é•œåƒè§£å‹åä½¿ç”¨<code>dd</code>å‘½ä»¤å°†é•œåƒå†™å…¥åˆ° sd å¡ä¸­(æˆ‘çš„ç¯å¢ƒä¸º macOS),æ³¨æ„å†™å…¥å®Œæˆåä¸€å®šè¦ä½¿ç”¨<code>unmount</code>å°† sd å¡æ¨å‡º,ç„¶åæ‹”å‡º sd å¡</li><li>å°† sd å¡æ’å…¥æ ‘è“æ´¾,å¹¶è¿æ¥å¥½æ‰€æœ‰å¤–è®¾åå¼€æœº,ç„¶ååƒå®‰è£… QQ ä¸€æ ·å®Œæˆäº†<a href="https://zh.wikipedia.org/wiki/Ubuntu_MATE" target="_blank" rel="noopener">Ubuntu_MATE</a>çš„å®‰è£…è¿‡ç¨‹</li></ol><h3 id="ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿ"><a href="#ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿ" class="headerlink" title="ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿ:"></a>ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿ:</h3><blockquote><p>å½“æ—¶å†’å‡ºä¸€ä¸ªæƒ³æ³•:å†™ä¸€ä¸ªæ¯å¤©å®šæ—¶æ’­æ”¾æœªæ¥ä¸¤å¤©å¤©æ°”é¢„æŠ¥çš„å°ç¨‹åº(éå½¼å°ç¨‹åº),æ¶‰åŠçš„åŠŸèƒ½ç‚¹:å¤©æ°”é¢„æŠ¥æ¥å£;ä¸€ä¸ªåŸºäºè½»é‡çº§çš„ api æ¡†æ¶å®ç°çš„ api;ä¸€ä¸ªå®šæ—¶ä»»åŠ¡;ä¸€ä¸ªæ–‡å­—è½¬è¯­éŸ³è„šæœ¬;ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶æ’­æ”¾å™¨;å½“ç„¶è¿˜éœ€è¦ä¸€ä¸ªå¤–æ¥å°éŸ³ç®±â€¦</p></blockquote><p>äºæ˜¯å®‰è£…äº† lnmp ç¯å¢ƒ(å½“ä¸‹æ²¡æœ‰ç”¨åˆ° mysql),mplayer,git,æ–‡å­—è½¬éŸ³é¢‘ä½¿ç”¨çš„ç™¾åº¦<a href="http://bos.nj.bpc.baidu.com/v1/audio/aip-speech-php-sdk-1.6.0.zip" target="_blank" rel="noopener">sdk(php)</a>,é€šè¿‡ git å®‰è£…äº†<a href="https://lumen.laravel.com/" target="_blank" rel="noopener">lumen</a></p><h4 id="æ¥å£å¼€å‘"><a href="#æ¥å£å¼€å‘" class="headerlink" title="æ¥å£å¼€å‘"></a>æ¥å£å¼€å‘</h4><ol><li>è·¯ç”±</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$router-&gt;get(<span class="string">'/get_weather'</span>,<span class="string">'WeatherController@getWeather'</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>æ§åˆ¶å™¨<code>WeatherController.php</code></li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">GuzzleHttp</span>\<span class="title">Client</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Cache</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a new controller instance.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŸºäºæ ‘è“æ´¾çš„ç®€æ˜“å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getWeather</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–å¤©æ°”ä¿¡æ¯</span></span><br><span class="line">        $client = <span class="keyword">new</span> Client();  <span class="comment">// å®ä¾‹åŒ–</span></span><br><span class="line">        $city = <span class="string">'æˆéƒ½'</span>;</span><br><span class="line">        $city_code = urlencode($city);</span><br><span class="line">        $aqi = [</span><br><span class="line">            <span class="string">'å¥½'</span>,</span><br><span class="line">            <span class="string">'ä¸­ç­‰'</span>,</span><br><span class="line">            <span class="string">'ä¸é€‚äºæ•æ„Ÿäººç¾¤'</span>,</span><br><span class="line">            <span class="string">'ä¸å¥åº·'</span>,</span><br><span class="line">            <span class="string">'éå¸¸ä¸å¥åº·'</span>,</span><br><span class="line">            <span class="string">'å±é™©'</span>,</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Cache::has(<span class="string">'report'</span>) === <span class="keyword">false</span>) &#123;</span><br><span class="line">            $url = <span class="string">'https://www.sojson.com/open/api/weather/json.shtml?city='</span> . $city_code;    <span class="comment">// è®¾ç½®ä¸€ä¸ªå¯è®¿é—®çš„ url</span></span><br><span class="line">            $http = $client-&gt;request(<span class="string">'GET'</span>, $url);  <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆ¤æ–­ http çŠ¶æ€ç ä¸º 200 çš„æ—¶å€™ï¼Œæ‰§è¡ŒæˆåŠŸ</span></span><br><span class="line">            $aqi_content = <span class="string">'æœªçŸ¥'</span>;</span><br><span class="line">            <span class="keyword">if</span> ($http-&gt;getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                $weather = json_decode($http-&gt;getBody()-&gt;getContents(), <span class="keyword">true</span>);</span><br><span class="line">                <span class="keyword">if</span> ($weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">0</span>][<span class="string">'aqi'</span>] &lt;= <span class="number">50</span>) &#123;</span><br><span class="line">                    $aqi_content = $aqi[<span class="number">0</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">0</span>][<span class="string">'aqi'</span>] &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">                    $aqi_content = $aqi[<span class="number">1</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">0</span>][<span class="string">'aqi'</span>] &lt;= <span class="number">150</span>) &#123;</span><br><span class="line">                    $aqi_content = $aqi[<span class="number">2</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">0</span>][<span class="string">'aqi'</span>] &lt;= <span class="number">200</span>) &#123;</span><br><span class="line">                    $aqi_content = $aqi[<span class="number">3</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">0</span>][<span class="string">'aqi'</span>] &lt;= <span class="number">300</span>) &#123;</span><br><span class="line">                    $aqi_content = $aqi[<span class="number">4</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">0</span>][<span class="string">'aqi'</span>] &lt;= <span class="number">500</span>) &#123;</span><br><span class="line">                    $aqi_content = $aqi[<span class="number">5</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æ‹¼è£…å­—ç¬¦ä¸²</span></span><br><span class="line">                $report = <span class="string">'ç°åœ¨é¢„æŠ¥,'</span> . $city . <span class="string">'æœªæ¥ä¸¤å¤©å¤©æ°”æƒ…å†µ,'</span> . $city . <span class="string">','</span> . date(<span class="string">'Yå¹´mæœˆ'</span>, time()) . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">1</span>][<span class="string">'date'</span>] . <span class="string">',å¤©æ°”æƒ…å†µ,'</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">1</span>][<span class="string">'high'</span>] . <span class="string">','</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">1</span>][<span class="string">'low'</span>] . <span class="string">','</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">1</span>][<span class="string">'type'</span>] . <span class="string">','</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">1</span>][<span class="string">'fx'</span>] . <span class="string">',é£åŠ›,'</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">1</span>][<span class="string">'fl'</span>] . <span class="string">',æ—¥å‡ºæ—¶é—´,'</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">1</span>][<span class="string">'sunrise'</span>] . <span class="string">',æ—¥è½æ—¶é—´,'</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">1</span>][<span class="string">'sunset'</span>] . <span class="string">',ç©ºæ°”æ±¡æŸ“æŒ‡æ•°,'</span> . $aqi_content;</span><br><span class="line">                $report .= <span class="string">','</span> . $city . <span class="string">','</span> . date(<span class="string">'Yå¹´mæœˆ'</span>, time()) . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">2</span>][<span class="string">'date'</span>] . <span class="string">',å¤©æ°”æƒ…å†µ,'</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">2</span>][<span class="string">'high'</span>] . <span class="string">','</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">2</span>][<span class="string">'low'</span>] . <span class="string">','</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">2</span>][<span class="string">'type'</span>] . <span class="string">','</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">2</span>][<span class="string">'fx'</span>] . <span class="string">',é£åŠ›,'</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">2</span>][<span class="string">'fl'</span>] . <span class="string">',æ—¥å‡ºæ—¶é—´,'</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">2</span>][<span class="string">'sunrise'</span>] . <span class="string">',æ—¥è½æ—¶é—´,'</span> . $weather[<span class="string">'data'</span>][<span class="string">'forecast'</span>][<span class="number">2</span>][<span class="string">'sunset'</span>] . <span class="string">',ç©ºæ°”æ±¡æŸ“æŒ‡æ•°,'</span> . $aqi_content;</span><br><span class="line">                Cache::add(<span class="string">'report'</span>, $report, <span class="number">60</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        $report = Cache::get(<span class="string">'report'</span>);</span><br><span class="line">        generate_audio($report);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„<code>generate_audio()</code>å³æ˜¯è‡ªè¡Œå°è£…åçš„ç™¾åº¦çš„æ–‡å­—è½¬è¯­éŸ³sdk</p><h4 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h4><ol><li>åˆ›å»ºä¸€ä¸ªç›®å½•<code>/data/weather_reports/</code>ç”¨äºä¿å­˜mp3ä¸´æ—¶æ–‡ä»¶</li><li><code>crontab -e</code>æ·»åŠ å®šæ—¶ä»»åŠ¡<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 19 * * * curl http://localhost/get_weather &amp;&amp; /usr/bin/mplayer /data/weather_reports/weather_forecast.mp3 &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure></li></ol><p>ä»¥ä¸Šæ˜¯æ¯å¤©19ç‚¹30åˆ†ä½¿ç”¨<code>curl</code>å‘½ä»¤è¯·æ±‚æœ¬åœ°çš„apiå¹¶ä½¿ç”¨<code>mplayer</code>æ‰“å¼€ä½äº<code>/data/weather_reports/</code>ç›®å½•çš„<code>weather_forecast.mp3</code>æ–‡ä»¶,å¹¶å°†æ ‡å‡†è¾“å‡º&amp;é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°ç©ºæ–‡ä»¶ä¸­</p><h3 id="ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿå®Œæˆ"><a href="#ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿå®Œæˆ" class="headerlink" title="ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿå®Œæˆ"></a>ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿå®Œæˆ</h3><p>è‡³æ­¤,ä¸€ä¸ªå®šæ—¶æ’­æŠ¥å°ç¨‹åºå·²å®Œæˆ,åŒæ—¶è¿˜å¯ä»¥åˆ©ç”¨<a href="https://lestatmiao.github.io/2018/03/26/frp+nginx%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">å†…ç½‘ç©¿é€</a>å¼€æ”¾å…¬ç½‘å¯¹è¯¥æ ‘è“æ´¾çš„sshè®¿é—®,å®ç°è¿œç¨‹é¥æ§æ’­æ”¾ğŸ˜‹<br>ä¸ºäº†è¿›ä¸€æ­¥æ–¹ä¾¿æ“ä½œ(å› ä¸ºé™¤äº†ç¬¬ä¸€æ¬¡å®‰è£…ç³»ç»Ÿ,å…¶ä»–æ—¶å€™éƒ½å¸Œæœ›ç›´æ¥é€šè¿‡å‘½ä»¤è¡Œæ“ä½œæ ‘è“æ´¾è€Œä¸æ˜¯å¤–æ¥ä¸€ä¸ªæ˜¾ç¤ºå™¨,èµ„æºæœ‰é™â€¦),å°†frpå®¢æˆ·ç«¯çš„è¿æ¥å‘½ä»¤åŠ å…¥äº†å¼€æœºå¯åŠ¨  </p><h3 id="å¼€æœºå¯åŠ¨æ­¥éª¤"><a href="#å¼€æœºå¯åŠ¨æ­¥éª¤" class="headerlink" title="å¼€æœºå¯åŠ¨æ­¥éª¤"></a>å¼€æœºå¯åŠ¨æ­¥éª¤</h3><ol><li><p>åœ¨<code>frp</code>å®¢æˆ·ç«¯æ‰€åœ¨ç›®å½•æ–°å»ºshæ–‡ä»¶<code>frp_start.sh</code>æ–‡ä»¶,å¹¶èµ‹äºˆæ‰§è¡Œæƒé™</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch <span class="string">./frp_start.sh</span></span><br><span class="line">chmod +x <span class="string">./frp_start.sh</span></span><br></pre></td></tr></table></figure></li><li><p>å†™å…¥å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## BEGIN INIT INFO</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Provides:          lestat</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Required-Start:    <span class="variable">$local_fs</span> <span class="variable">$network</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Required-Stop:     <span class="variable">$local_fs</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Default-Start:     2 3 4 5</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Default-Stop:      0 1 6</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Short-Description: start frp service</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Description:       start frp service</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## END INIT INFO</span></span></span><br><span class="line">cd frpå®¢æˆ·ç«¯æ‰€åœ¨ç›®å½•</span><br><span class="line">nohup ./frpc -c ./frpc.ini &amp;</span><br></pre></td></tr></table></figure></li><li><p>å°†æ–‡ä»¶è¿æ¥åˆ°<code>/etc/init.d/</code>ç›®å½•</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s frpå®¢æˆ·ç«¯æ‰€åœ¨ç›®å½•<span class="regexp">/frp_start.sh /</span>etc<span class="regexp">/init.d/</span>frp_start</span><br></pre></td></tr></table></figure></li><li><p>åœ¨<code>/etc/init.d/</code>ä½¿ç”¨<code>update-rc.d</code>å‘½ä»¤è¿›è¡Œé…ç½®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="keyword">update</span>-rc.d frp_start <span class="keyword">defaults</span> <span class="number">99</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®æˆåŠŸåå¯ä»¥åœ¨<code>/etc/rc[å¯¹åº”çš„ç³»ç»Ÿè¿è¡Œçº§åˆ«].d/</code>ç›®å½•ä¸­çœ‹åˆ°<code>frp_start</code></p></li></ol><blockquote><p><strong>æœªå®Œå¾…ç»­â€¦</strong></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="æ ‘è“æ´¾" scheme="https://lestatmiao.github.io/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºmysqlæŸ¥è¯¢è¯­å¥çš„ä¸€æ¬¡é—®é¢˜è®°å½•</title>
    <link href="https://lestatmiao.github.io/2018/04/03/%E5%85%B3%E4%BA%8Emysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E4%B8%80%E6%AC%A1%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
    <id>https://lestatmiao.github.io/2018/04/03/å…³äºmysqlæŸ¥è¯¢è¯­å¥çš„ä¸€æ¬¡é—®é¢˜è®°å½•/</id>
    <published>2018-04-03T06:19:09.000Z</published>
    <updated>2018-04-04T00:55:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªå…¬å¸å†…éƒ¨ä½¿ç”¨çš„è´¢åŠ¡æŠ¥è¡¨ç³»ç»Ÿ,åœ¨ä¸€æ¬¡æŸ¥è¯¢æ—¶æ•°æ®åº“æŠ¥äº†ä¸€ä¸ªé”™è¯¯,åœ¨ç½‘ä¸ŠæŸ¥çœ‹åŸå› å¹¶è§£å†³é—®é¢˜ä¹‹åé¡ºä¾¿è®°å½•ä¸€ä¸‹,è¯¥sqlçš„ç›®æ ‡æ˜¯ä»æ—¥æŠ¥ä¸»è¡¨,æ—¥æŠ¥æœˆæ•°æ®è¡¨,æ—¥æŠ¥æ¨¡å—è¡¨ä¸­æŸ¥è¯¢åˆ°æŒ‡å®šç»è¥å…¬å¸,æŒ‡å®šæ—¥æœŸçš„å½“æ—¥æ±‡æ€»æ•°æ®(åŒ…å«éƒ¨åˆ†å½“æœˆæ•°æ®ç”¨äºåç»­è®¡ç®—)</p><p>é—®é¢˜sqlå¦‚ä¸‹:  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">A1.depcode <span class="keyword">AS</span> depcode,</span><br><span class="line"><span class="keyword">SUM</span>(d_dd_xcddsntq) <span class="keyword">AS</span> sntq,</span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SUM</span>(d_jk_scddldl) + <span class="keyword">SUM</span>(d_jk_zcddldl) + <span class="keyword">SUM</span>(d_jk_hdjkl)</span><br><span class="line">) <span class="keyword">AS</span> bysj</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">mall_daily A</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_jk B <span class="keyword">ON</span> A.id = B.d_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_month C <span class="keyword">ON</span> A.depcode = C.depcode</span><br><span class="line"><span class="keyword">AND</span> A.d_datetime &gt;= C. <span class="keyword">START</span></span><br><span class="line"><span class="keyword">AND</span> A.d_datetime &lt;= C.</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">A.d_date &gt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-01'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> A.d_date &lt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-21'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> A.depcode = A1.depcode</span><br><span class="line">) <span class="keyword">AS</span> aj13,</span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">SUM</span>(B.d_dd_xcztdd) <span class="keyword">AS</span> bysj</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">mall_daily A</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_dd B <span class="keyword">ON</span> A.id = B.d_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_month C <span class="keyword">ON</span> A.depcode = C.depcode</span><br><span class="line"><span class="keyword">AND</span> A.d_datetime &gt;= C. <span class="keyword">START</span></span><br><span class="line"><span class="keyword">AND</span> A.d_datetime &lt;= C.</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">A.d_date &gt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-01'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> A.d_date &lt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-21'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> C.table_name = <span class="string">'DailyDd'</span></span><br><span class="line"><span class="keyword">AND</span> A.depcode = A1.depcode</span><br><span class="line">) <span class="keyword">AS</span> aj25,</span><br><span class="line"><span class="keyword">TRUNCATE</span> (</span><br><span class="line">(<span class="keyword">SELECT</span> aj25) / (<span class="keyword">SELECT</span> aj13),</span><br><span class="line"><span class="number">2</span></span><br><span class="line">) <span class="keyword">AS</span> bysj,</span><br><span class="line">D.d_month_byjh <span class="keyword">AS</span> byjh,</span><br><span class="line"><span class="keyword">TRUNCATE</span> (</span><br><span class="line">(<span class="keyword">SELECT</span> bysj) / (<span class="keyword">SELECT</span> byjh),</span><br><span class="line"><span class="number">2</span></span><br><span class="line">) <span class="keyword">AS</span> jhdcl,</span><br><span class="line"><span class="keyword">TRUNCATE</span> (<span class="number">30</span> / <span class="number">31</span>, <span class="number">2</span>) <span class="keyword">AS</span> sjjd,</span><br><span class="line"><span class="keyword">TRUNCATE</span> (</span><br><span class="line">(<span class="keyword">SELECT</span> bysj) / (<span class="keyword">SELECT</span> sntq),</span><br><span class="line"><span class="number">2</span></span><br><span class="line">) <span class="keyword">AS</span> tb</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">mall_daily A1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_dd B <span class="keyword">ON</span> A1.id = B.d_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_jk C <span class="keyword">ON</span> A1.id = C.d_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_month D <span class="keyword">ON</span> A1.depcode = D.depcode</span><br><span class="line"><span class="keyword">AND</span> A1.d_datetime &gt;= D. <span class="keyword">START</span></span><br><span class="line"><span class="keyword">AND</span> A1.d_datetime &lt;= D.</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">A1.d_date &gt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-01'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> A1.d_date &lt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-21'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">A1.depcode;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°sqlåœ¨æ‰§è¡Œæ—¶æç¤º<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Err] <span class="number">1247</span> - <span class="keyword">Reference</span> <span class="string">'sntq'</span> <span class="keyword">not</span> supported (<span class="keyword">reference</span> <span class="keyword">to</span> <span class="keyword">group</span> <span class="function"><span class="keyword">function</span>)</span></span><br></pre></td></tr></table></figure></p><p>å¤§æ„æ˜¯ä¸æ”¯æŒâ€™sntqâ€™çš„å¼•ç”¨,ä½†æ˜¯ä¸Šé¢<code>SELECT</code>çš„å­—æ®µä¸­æ˜æ˜æœ‰è¿™ä¸ª<code>alias</code>ã€‚åæ¥ä¸´æ—¶é€šè¿‡åœ¨è¿™ä¸ªä½ç½®ç”¨è¡¨è¾¾å¼æ›¿æ¢äº†åˆ«åè§£å†³(å°†<code>SELECT sntq</code>æ›¿æ¢ä¸º<code>SUM(d_dd_xcddsntq)</code>),ä½†å§‹ç»ˆè§‰å¾—ä¸å®Œç¾,æœ€ågoogleä»¥ä¸‹æ‰¾åˆ°äº†æ›´å¥½çš„è§£å†³æ–¹å¼,å°±æ˜¯åœ¨è¿™ä¸ªæŸ¥è¯¢è¯­å¥å¤–å±‚å†å¥—ä¸€å±‚æŸ¥è¯¢è¯­å¥,ä¹Ÿå°±æ˜¯å°†å½“å‰æŸ¥è¯¢è¯­å¥ä½œä¸ºå¦ä¸€ä¸ªè¯­å¥çš„å­æŸ¥è¯¢,ä¿®æ”¹åç»“æ„å¦‚ä¸‹: </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">depcode,</span><br><span class="line">sntq,</span><br><span class="line">bysj,</span><br><span class="line">byjh,</span><br><span class="line">jhdcl,</span><br><span class="line">sjjd,</span><br><span class="line"><span class="keyword">TRUNCATE</span> (bysj / sntq, <span class="number">2</span>) <span class="keyword">AS</span> tb</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">A1.depcode <span class="keyword">AS</span> depcode,</span><br><span class="line"><span class="keyword">SUM</span>(d_dd_xcddsntq) <span class="keyword">AS</span> sntq,</span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SUM</span>(d_jk_scddldl) + <span class="keyword">SUM</span>(d_jk_zcddldl) + <span class="keyword">SUM</span>(d_jk_hdjkl)</span><br><span class="line">) <span class="keyword">AS</span> bysj</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">mall_daily A</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_jk B <span class="keyword">ON</span> A.id = B.d_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_month C <span class="keyword">ON</span> A.depcode = C.depcode</span><br><span class="line"><span class="keyword">AND</span> A.d_datetime &gt;= C. <span class="keyword">START</span></span><br><span class="line"><span class="keyword">AND</span> A.d_datetime &lt;= C.</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">A.d_date &gt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-01'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> A.d_date &lt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-21'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> A.depcode = A1.depcode</span><br><span class="line">) <span class="keyword">AS</span> aj13,</span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">SUM</span>(B.d_dd_xcztdd) <span class="keyword">AS</span> bysj</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">mall_daily A</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_dd B <span class="keyword">ON</span> A.id = B.d_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_month C <span class="keyword">ON</span> A.depcode = C.depcode</span><br><span class="line"><span class="keyword">AND</span> A.d_datetime &gt;= C. <span class="keyword">START</span></span><br><span class="line"><span class="keyword">AND</span> A.d_datetime &lt;= C.</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">A.d_date &gt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-01'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> A.d_date &lt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-21'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> C.table_name = <span class="string">'DailyDd'</span></span><br><span class="line"><span class="keyword">AND</span> A.depcode = A1.depcode</span><br><span class="line">) <span class="keyword">AS</span> aj25,</span><br><span class="line"><span class="keyword">TRUNCATE</span> (</span><br><span class="line">(<span class="keyword">SELECT</span> aj25) / (<span class="keyword">SELECT</span> aj13),</span><br><span class="line"><span class="number">2</span></span><br><span class="line">) <span class="keyword">AS</span> bysj,</span><br><span class="line">D.d_month_byjh <span class="keyword">AS</span> byjh,</span><br><span class="line"><span class="keyword">TRUNCATE</span> (</span><br><span class="line">(<span class="keyword">SELECT</span> bysj) / (<span class="keyword">SELECT</span> byjh),</span><br><span class="line"><span class="number">2</span></span><br><span class="line">) <span class="keyword">AS</span> jhdcl,</span><br><span class="line"><span class="keyword">TRUNCATE</span> (<span class="number">30</span> / <span class="number">31</span>, <span class="number">2</span>) <span class="keyword">AS</span> sjjd</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">mall_daily A1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_dd B <span class="keyword">ON</span> A1.id = B.d_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_jk C <span class="keyword">ON</span> A1.id = C.d_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> mall_daily_month D <span class="keyword">ON</span> A1.depcode = D.depcode</span><br><span class="line"><span class="keyword">AND</span> A1.d_datetime &gt;= D. <span class="keyword">START</span></span><br><span class="line"><span class="keyword">AND</span> A1.d_datetime &lt;= D.</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">A1.d_date &gt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-01'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">AND</span> A1.d_date &lt;= <span class="keyword">DATE_FORMAT</span>(<span class="string">'2018-03-21'</span>, <span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">A1.depcode</span><br><span class="line">) t;</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://stackoverflow.com/questions/7072479/reusing-alias-in-select" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="mysql" scheme="https://lestatmiao.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>frp+nginxå®ç°å†…ç½‘ç©¿é€</title>
    <link href="https://lestatmiao.github.io/2018/03/26/frp-nginx%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    <id>https://lestatmiao.github.io/2018/03/26/frp-nginxå®ç°å†…ç½‘ç©¿é€/</id>
    <published>2018-03-26T12:58:23.000Z</published>
    <updated>2018-04-02T12:57:17.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>å†™åœ¨å‰é¢:ä¸Šä¸€ç¯‡æ–‡ç« å†™äº†å…³äºngrok+nginxå®ç°å†…ç½‘ç©¿é€çš„æµç¨‹,å¹¶æå‡ºäº†ä¸€äº›å­˜åœ¨çš„é—®é¢˜,æ˜¨å¤©è¯•è¿‡frpä¹‹å,å°†ä¹‹å‰ngrokå­˜åœ¨çš„æ— æ³•æ˜ å°„æœ¬åœ°åŸŸåçš„é—®é¢˜è§£å†³äº†  </p></blockquote><p><a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">frp</a> æ˜¯ä¸€ä¸ªå¯ç”¨äºå†…ç½‘ç©¿é€çš„é«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œæ”¯æŒ tcp, udp, http, https åè®®ã€‚  </p><h2 id="å…ˆå†³æ¡ä»¶"><a href="#å…ˆå†³æ¡ä»¶" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a>å…ˆå†³æ¡ä»¶</h2><p>æœ‰ä¸€ä¸ªåŸŸå,å¹¶è§£æåˆ°è‡ªå·±æœåŠ¡å™¨ä¸Š,å¦‚:*.frp.lestat.me<br>æœ‰ä¸€ä¸ªå…·å¤‡å›ºå®šipçš„å…¬ç½‘æœåŠ¡å™¨  </p><h2 id="ç³»ç»Ÿç¯å¢ƒ"><a href="#ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ"></a>ç³»ç»Ÿç¯å¢ƒ</h2><p>å‡è®¾ç¯å¢ƒä¸º:<br>æœåŠ¡å™¨OS:ubuntu17.10<br>å®¢æˆ·ç«¯OS:macOS High Sierra<br>ä»¥ä¸‹å†…å®¹å°†æŒ‰ç…§ä¸Šè¿°ç¯å¢ƒè¿›è¡Œæ­å»º  </p><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><p>ç›¸å¯¹äºngrokè¿˜éœ€è¦ç¼–è¯‘æºç ,<a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">frp</a>æ–¹ä¾¿å¾ˆå¤š,çœŸæ­£çš„å¼€ç®±å³ç”¨</p><h3 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h3><ol><li>ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„frpæœåŠ¡ç«¯&amp;å®¢æˆ·ç«¯è‡³æœåŠ¡å™¨å’Œå†…ç½‘ç”µè„‘</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget</span><br><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/fatedier/</span>frp<span class="regexp">/releases/</span>download<span class="regexp">/v0.16.1/</span>frp_0.<span class="number">16.1</span>_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><ol start="2"><li>è§£å‹</li></ol><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar zxf ./frp_0<span class="number">.16</span><span class="number">.1</span>_linux_amd64.tar.gz</span><br><span class="line">cd ./frp_0<span class="number">.16</span><span class="number">.1</span>_linux_amd64</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><ol start="3"><li>ç›®å½•ç»“æ„å¦‚ä¸‹(ä¸åŒç‰ˆæœ¬å¯èƒ½æœ‰å·®å¼‚,ä½†å¤§è‡´ç›¸ä¼¼):</li></ol><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-rw-rw-r-- <span class="number"> 1 </span>kcptun kcptun  <span class="number"> 11358 </span>Mar<span class="number"> 21 </span>10:11 LICENSE</span><br><span class="line">-rwxrwxr-x <span class="number"> 1 </span>kcptun kcptun<span class="number"> 6154432 </span>Mar<span class="number"> 21 </span>10:10 frpc*</span><br><span class="line">-rw-rw-r-- <span class="number"> 1 </span>kcptun kcptun    <span class="number"> 126 </span>Mar<span class="number"> 21 </span>10:11 frpc.ini</span><br><span class="line">-rw-rw-r-- <span class="number"> 1 </span>kcptun kcptun   <span class="number"> 5306 </span>Mar<span class="number"> 21 </span>10:11 frpc_full.ini</span><br><span class="line">-rwxrwxr-x <span class="number"> 1 </span>kcptun kcptun<span class="number"> 7586848 </span>Mar<span class="number"> 21 </span>10:10 frps*</span><br><span class="line">-r--r----- <span class="number"> 1 </span>root   root    <span class="number"> 11207 </span>Mar<span class="number"> 25 </span>15:38 frps.2018-03-25.log</span><br><span class="line">-rw-rw-r-- <span class="number"> 1 </span>kcptun kcptun   <span class="number"> 2127 </span>Mar<span class="number"> 25 </span>13:42 frps.ini</span><br><span class="line">-rw-rw---- <span class="number"> 1 </span>root   root      <span class="number"> 723 </span>Mar<span class="number"> 26 </span>05:06 frps.log</span><br><span class="line">-rw-rw-r-- <span class="number"> 1 </span>kcptun kcptun   <span class="number"> 2300 </span>Mar<span class="number"> 21 </span>10:11 frps_full.ini</span><br><span class="line">-rw------- <span class="number"> 1 </span>root   root        <span class="number"> 0 </span>Mar<span class="number"> 25 </span>11:12 nohup.out</span><br></pre></td></tr></table></figure><ol start="4"><li>ç¼–è¾‘é…ç½®æ–‡ä»¶  </li></ol><p><code>vim ./frps.ini</code></p><ol start="5"><li>å¯å‚è€ƒå¦‚ä¸‹é…ç½®: </li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡å™¨ç«¯ç›‘å¬å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚çš„ç«¯å£</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœåŠ¡å™¨ç«¯ç›‘å¬httpè¯·æ±‚çš„ç«¯å£(ç”±äº80ç«¯å£è¢«nginxå ç”¨,å› æ­¤æŒ‡å®šå…¶ä»–ç«¯å£)</span></span><br><span class="line"><span class="attr">vhost_http_port</span> = <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœåŠ¡å™¨ç”¨ä»¥æ˜¾ç¤ºè¿æ¥çŠ¶æ€çš„ç«™ç‚¹ç«¯å£,ä»¥ä¸‹é…ç½®ä¸­å¯ä»¥é€šè¿‡è®¿é—®IP:7500ç™»å½•æŸ¥çœ‹frpæœåŠ¡ç«¯çŠ¶æ€ç­‰ä¿¡æ¯</span></span><br><span class="line"><span class="attr">dashboard_addr</span> = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="attr">dashboard_port</span> = <span class="number">7500</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dashboardå¯¹åº”çš„ç”¨æˆ·å/å¯†ç </span></span><br><span class="line"><span class="attr">dashboard_user</span> = user</span><br><span class="line"><span class="attr">dashboard_pwd</span> = pwd</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="attr">log_file</span> = ./frps.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—è®°å½•é”™è¯¯çº§åˆ«,åˆ†ä¸º:trace, debug, info, warn, error</span></span><br><span class="line"><span class="attr">log_level</span> = warn</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—ä¿å­˜æœ€å¤§å¤©æ•°</span></span><br><span class="line"><span class="attr">log_max_days</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®¢æˆ·ç«¯è¿æ¥æ ¡éªŒç (å®¢æˆ·ç«¯éœ€ä¸ä¹‹ç›¸åŒ)</span></span><br><span class="line"><span class="attr">privilege_token</span> = privilege_token</span><br><span class="line"></span><br><span class="line"><span class="comment"># heartbeat configure, it's not recommended to modify the default value</span></span><br><span class="line"><span class="comment"># the default value of heartbeat_timeout is 90</span></span><br><span class="line"><span class="comment"># heartbeat_timeout = 90</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># only allow frpc to bind ports you list, if you set nothing, there won't be any limit</span></span><br><span class="line"><span class="comment"># privilege_allow_ports = 2000-3000,3001,3003,4000-50000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pool_count in each proxy will change to max_pool_count if they exceed the maximum value</span></span><br><span class="line"><span class="attr">max_pool_count</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># max ports can be used for each client, default value is 0 means no limit</span></span><br><span class="line"><span class="attr">max_ports_per_client</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># authentication_timeout means the timeout interval (seconds) when the frpc connects frps</span></span><br><span class="line"><span class="comment"># if authentication_timeout is zero, the time is not verified, default is 900s</span></span><br><span class="line"><span class="attr">authentication_timeout</span> = <span class="number">900</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¯æŒå¤–éƒ¨è®¿é—®çš„åŸŸå(éœ€è¦å°†åŸŸåè§£æåˆ°IP)</span></span><br><span class="line"><span class="attr">subdomain_host</span> = frps.lestat.me</span><br></pre></td></tr></table></figure><ol start="6"><li>é…ç½®nginxåå‘ä»£ç†,å°†æ¥è‡ª80ç«¯å£å¹¶æŒ‡å‘*.frp.lestat.meçš„è¯·æ±‚åˆ†å‘è‡³frpæœåŠ¡å™¨httpè¯·æ±‚çš„ç›‘å¬ç«¯å£</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> <span class="regexp">*.frps.lestat.me</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  http://127.0.0.1:8080;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-NginX-Proxy <span class="literal">true</span>;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">"upgrade"</span>;</span><br><span class="line">        <span class="attribute">proxy_max_temp_file_size</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">proxy_read_timeout</span> <span class="number">240s</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="7"><li>å¯åŠ¨frpæœåŠ¡å™¨å¹¶åå°è¿è¡Œ,å¯åŠ¨å®Œæˆåå¯é€šè¿‡<code>lsof -i :7000</code>æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</li></ol><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup <span class="string">./frps</span> -c <span class="string">./frps.ini</span> &amp;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h3><ol><li><p>åˆ›å»ºç›®å½•å¹¶è§£å‹</p></li><li><p>ç¼–è¾‘é…ç½®æ–‡ä»¶</p></li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = æœåŠ¡å™¨IP</span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">privilege_token</span> = privilege_token</span><br><span class="line"><span class="attr">auth_token</span> = auth_token</span><br><span class="line"><span class="section">[hccrm]</span></span><br><span class="line"><span class="attr">type</span> = http</span><br><span class="line"><span class="attr">local_port</span> = <span class="number">80</span></span><br><span class="line"><span class="attr">subdomain</span> = hccrm</span><br></pre></td></tr></table></figure><ol start="3"><li>å¯åŠ¨frpå®¢æˆ·ç«¯ç¨‹åº</li></ol><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./frpc</span> -c <span class="string">./frpc.ini</span></span><br></pre></td></tr></table></figure><ol start="4"><li>æœ¬åœ°apache/nginxè™šæ‹Ÿä¸»æœºé…ç½®åŸŸååˆ«å(alias),æ ¹æ®è‡ªå·±ç¯å¢ƒè€Œå®š</li></ol><p><img src="https://lestat.b0.upaiyun.com/blog/apache-alias.png" alt="mampé›†æˆapacheé…ç½®"></p><h2 id="æµç¨‹å›¾è§£"><a href="#æµç¨‹å›¾è§£" class="headerlink" title="æµç¨‹å›¾è§£"></a>æµç¨‹å›¾è§£</h2><h3 id="å‡è®¾ç”²ä½¿ç”¨çš„æµè§ˆå™¨å¸Œæœ›è®¿é—®ä¹™æ‰€åœ¨å†…ç½‘ç¯å¢ƒæœåŠ¡å™¨çš„webé¡¹ç›®"><a href="#å‡è®¾ç”²ä½¿ç”¨çš„æµè§ˆå™¨å¸Œæœ›è®¿é—®ä¹™æ‰€åœ¨å†…ç½‘ç¯å¢ƒæœåŠ¡å™¨çš„webé¡¹ç›®" class="headerlink" title="å‡è®¾ç”²ä½¿ç”¨çš„æµè§ˆå™¨å¸Œæœ›è®¿é—®ä¹™æ‰€åœ¨å†…ç½‘ç¯å¢ƒæœåŠ¡å™¨çš„webé¡¹ç›®:"></a>å‡è®¾ç”²ä½¿ç”¨çš„æµè§ˆå™¨å¸Œæœ›è®¿é—®ä¹™æ‰€åœ¨å†…ç½‘ç¯å¢ƒæœåŠ¡å™¨çš„webé¡¹ç›®:</h3><p><img src="https://lestat.b0.upaiyun.com/blog/frp+nginx.png" alt></p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>å°è¯•ä½¿ç”¨*.frps.lestat.meè®¿é—®ç«™ç‚¹çœ‹æ˜¯å¦æ­£å¸¸,ç›¸æ¯”ngrokçš„æµç¨‹,frpçœå»äº†ç¼–è¯‘,å°‘è¸©ä¸å°‘å‘,çš„ç¡®çœäº‹å¤šäº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="nginx" scheme="https://lestatmiao.github.io/tags/nginx/"/>
    
      <category term="frp" scheme="https://lestatmiao.github.io/tags/frp/"/>
    
  </entry>
  
  <entry>
    <title>ngrok+nginxå®ç°å†…ç½‘ç©¿é€</title>
    <link href="https://lestatmiao.github.io/2018/03/24/ngrok-nginx%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    <id>https://lestatmiao.github.io/2018/03/24/ngrok-nginxå®ç°å†…ç½‘ç©¿é€/</id>
    <published>2018-03-24T04:05:51.000Z</published>
    <updated>2018-03-26T14:50:27.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>å†™åœ¨å‰é¢:<br>å‰å¤©åœ¨qqç¾¤é‡Œçœ‹åˆ°æœ‰äººåœ¨è®¨è®ºæ›¿ä»£èŠ±ç”Ÿå£³çš„å·¥å…·ï¼Œè¯´åˆ°äº†ngrokï¼Œè¯´æ˜¯å¯ä»¥å®ç°èŠ±ç”Ÿå£³ä¸€æ ·çš„å†…ç½‘ç©¿é€ï¼Œä¸ªäººè®¤ä¸ºä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç”¨å¤„:</p><ol><li>å¯ä»¥åœ¨å…¬å¸æµ‹è¯•æœåŠ¡å™¨ä¸Šæ­å»ºä¸€ä¸ªæœåŠ¡,å®ç°æµ‹è¯•ç«™ç‚¹çš„æœ¬åœ°è®¿é—®(å…¬ç½‘è®¿é—®æœ¬åœ°æœåŠ¡å™¨)ï¼Œåœ¨è¿™ä¹‹å‰é€šå¸¸æ˜¯ä¸Šä¼ ç½‘ç«™åˆ°æœåŠ¡å™¨å¹¶è§£æä¸€ä¸ªå­åŸŸåï¼Œç›¸å¯¹æ¯”è¾ƒè´¹æ—¶  </li><li>å¾®ä¿¡æ¥å£å¼€å‘çš„æ—¶å€™ä¼˜åŠ¿æ›´æ˜æ˜¾ï¼Œå› ä¸ºå¾®ä¿¡çš„OAuthä¸€ç±»è®¤è¯éœ€è¦ä¸€ä¸ªå…¬ç½‘åŸŸåä¸”ç«¯å£å¿…é¡»æ˜¯80/443(ä¹Ÿæ˜¯æœ¬æ–‡éœ€è¦ç”¨åˆ°nginxåšåå‘ä»£ç†çš„åŸå› ä¹‹ä¸€)  </li><li>æ¬¢è¿è¡¥å……â€¦  </li></ol></blockquote><h2 id="ngrok1-xä»‹ç»-2-xæ²¡æœ‰å¼€æºå®˜ç½‘"><a href="#ngrok1-xä»‹ç»-2-xæ²¡æœ‰å¼€æºå®˜ç½‘" class="headerlink" title="ngrok1.xä»‹ç»(2.xæ²¡æœ‰å¼€æºå®˜ç½‘)"></a>ngrok1.xä»‹ç»(2.xæ²¡æœ‰å¼€æº<a href="https://ngrok.com/" target="_blank" rel="noopener">å®˜ç½‘</a>)</h2><p><img src="https://lestat.b0.upaiyun.com/blog/ngrok-intro.png" alt><br><a href="https://github.com/inconshreveable/ngrok" target="_blank" rel="noopener">ngrok1.xæºç githubåœ°å€</a><br>å¦‚ä¸Šå°é¢å›¾æ‰€ç¤º</p><p>æ©˜è‰²å±å¹•çš„ç¬”è®°æœ¬æ˜¯ä½ çš„å·¥ä½œæœºå™¨ï¼Œå®‰è£…äº†ngrokå®¢æˆ·ç«¯<br>ngrok.comæ‰€åœ¨çš„æœåŠ¡å™¨å®‰è£…äº†ngrokçš„æœåŠ¡ç«¯ï¼ˆngrokdï¼‰<br>åˆ©ç”¨ngrok 8080å‘½ä»¤å¯ä»¥å°†ä½ æœ¬æœºçš„8080ç«¯å£æš´éœ²ç»™åå‘ä»£ç†è‡³ngrok.comçš„æŸä¸ªäºŒçº§åŸŸåå¦‚ï¼š<em>.ngrok.com<br>å…¬ç½‘ç”¨æˆ·å¯ä»¥é€šè¿‡</em>.ngrok.comå°±å¯ä»¥è®¿é—®ä½ æœ¬æœº8080ç«¯å£ä¸Šçš„ç«™ç‚¹å†…å®¹äº†ã€‚<br>ç”±æ­¤å¯è§ï¼Œå€ŸåŠ©ngrokï¼Œå¯ä»¥è§£å†³webé¡¹ç›®(å°¤å…¶æ˜¯å¾®ä¿¡æ¥å£ç›¸å…³)å¼€å‘è¿‡ç¨‹ç»å¸¸é‡åˆ°çš„â€œæœ¬åœ°å¼€å‘ï¼Œå¤–ç½‘è°ƒè¯•â€é—®é¢˜ã€‚  </p><h2 id="å…ˆå†³æ¡ä»¶"><a href="#å…ˆå†³æ¡ä»¶" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a>å…ˆå†³æ¡ä»¶</h2><ol><li>æœ‰ä¸€ä¸ªåŸŸå,å¹¶è§£æåˆ°è‡ªå·±æœåŠ¡å™¨ä¸Š,å¦‚:<code>*.ngrok.lestat.me</code></li><li>æœ‰ä¸€ä¸ªå…·å¤‡å›ºå®šipçš„å…¬ç½‘æœåŠ¡å™¨</li></ol><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><blockquote><p>åŸºæœ¬æ­¥éª¤:å®‰è£…goç¯å¢ƒ-&gt;ä¸‹è½½ngrokæºç -&gt;ä½¿ç”¨goç¼–è¯‘ngrokä»¥åŠç›¸å…³ç¯å¢ƒå˜é‡çš„è®¾ç½®-&gt;è¯ä¹¦é…ç½®-&gt;è¿è¡ŒngrokæœåŠ¡å™¨ç«¯å¹¶æŒ‡å®šç›‘å¬çš„http/httpsç«¯å£-&gt;nginxé…ç½®æ–‡ä»¶ä¸­å¯¹ä¸Šä¸€æ­¥ä¸­ç›¸å…³ç«¯å£åšåå‘ä»£ç†é…ç½®-&gt;é‡å¯nginx-&gt;ç”Ÿæˆå¯¹åº”OS(linux,darwin,windows)çš„å®¢æˆ·ç«¯-&gt;æœ¬åœ°æœºå™¨ä¸‹è½½ä¸Šä¸€æ­¥ç”Ÿæˆçš„å®¢æˆ·ç«¯-&gt;æœ¬åœ°æ–°å»ºé…ç½®æ–‡ä»¶ngrok.cfg-&gt;æœ¬åœ°è¿è¡Œå®¢æˆ·ç«¯å¹¶æŒ‡å®šé…ç½®æ–‡ä»¶-&gt;å‡ºç°<code>online</code>åˆ™è¯´æ˜ç©¿é€æˆåŠŸ</p></blockquote><h3 id="ä¸€ä¸ªä¾‹å­"><a href="#ä¸€ä¸ªä¾‹å­" class="headerlink" title="ä¸€ä¸ªä¾‹å­"></a>ä¸€ä¸ªä¾‹å­</h3><h4 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h4><p>æœ¬æœºåœ°å€ IPï¼š127.0.0.1ï¼ŒHTTP ä¸º 80<br>å¤–ç½‘åœ°å€ IPï¼š45.77.14.6ï¼ŒHTTP ä¸º 80(NGINXç›‘å¬è¯¥ç«¯å£,å¹¶å¯¹<em>.ngrok.lestat.meåŸŸåè¿›è¡Œè½¬å‘åˆ°æœåŠ¡å™¨çš„60ç«¯å£)<br>åŸŸåä¸ºï¼šhttp://</em>.ngrok.lestat.me</p><h4 id="é¢„æœŸç»“æœ"><a href="#é¢„æœŸç»“æœ" class="headerlink" title="é¢„æœŸç»“æœ"></a>é¢„æœŸç»“æœ</h4><p>å¤–ç½‘è®¿é—® http://*.ngrok.lestat.meå¯ä»¥è®¿é—®åˆ°æœ¬æœºä¸Š80ç«¯å£æä¾›çš„ç½‘ç«™<br>ä¸‹æ–‡æŒ‰ç…§å‰é¢çš„ä¾‹å­æ¥æ­å»º</p><h3 id="Goç¯å¢ƒçš„å®‰è£…"><a href="#Goç¯å¢ƒçš„å®‰è£…" class="headerlink" title="Goç¯å¢ƒçš„å®‰è£…"></a>Goç¯å¢ƒçš„å®‰è£…</h3><ol><li><p>ä¸‹è½½å¹¶è§£å‹GOLANG</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -c https:<span class="comment">//storage.googleapis.com/golang/go1.8.3.linux-amd64.tar.gz</span></span><br><span class="line">tar -C /usr/local -zxvf go1.<span class="number">8.3</span><span class="selector-class">.linux-amd64</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®ç›¸å…³ç¯å¢ƒå˜é‡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">GOROOT</span>=/usr/local/go</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$GOROOT/bin</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GOPATH</span>=<span class="variable">$HOME</span>/go</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GOROOT_BOOTSTRAP</span>=/usr/local/go</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ<br><code>go version</code></p></li></ol><h3 id="å®‰è£…ngrok"><a href="#å®‰è£…ngrok" class="headerlink" title="å®‰è£…ngrok"></a>å®‰è£…ngrok</h3><ol><li><p>ä¸‹è½½å¹¶é…ç½®å‚æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/inconshreveable/ngrok.git</span><br><span class="line"><span class="built_in">export</span> GOPATH=/usr/<span class="built_in">local</span>/ngrok/</span><br><span class="line"><span class="built_in">export</span> NGROK_DOMAIN=<span class="string">"ngrok.lestat.me"</span></span><br><span class="line"><span class="built_in">cd</span> ngrok</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆè¯ä¹¦  </p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out rootCA<span class="selector-class">.key</span> <span class="number">2048</span></span><br><span class="line">openssl req -x509 -new -nodes -key rootCA<span class="selector-class">.key</span> -subj <span class="string">"/CN=$NGROK_DOMAIN"</span> -days <span class="number">5000</span> -out rootCA.pem</span><br><span class="line">openssl genrsa -out server<span class="selector-class">.key</span> <span class="number">2048</span></span><br><span class="line">openssl req -new -key server<span class="selector-class">.key</span> -subj <span class="string">"/CN=$NGROK_DOMAIN"</span> -out server.csr</span><br><span class="line">openssl x509 -req -<span class="keyword">in</span> server<span class="selector-class">.csr</span> -CA rootCA<span class="selector-class">.pem</span> -CAkey rootCA<span class="selector-class">.key</span> -CAcreateserial -out server<span class="selector-class">.crt</span> -days <span class="number">5000</span></span><br></pre></td></tr></table></figure></li><li><p>å°†æºç ä¸‹çš„è¯ä¹¦å¤åˆ¶åˆ°æŒ‡å®šä½ç½®  </p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp rootCA<span class="selector-class">.pem</span> assets/client/tls/ngrokroot.crt</span><br><span class="line">cp server<span class="selector-class">.crt</span> assets/server/tls/snakeoil.crt</span><br><span class="line">cp server<span class="selector-class">.key</span> assets/server/tls/snakeoil.key</span><br></pre></td></tr></table></figure></li><li><p>ç¼–è¯‘æœåŠ¡å™¨&amp;å®¢æˆ·ç«¯(linux64ä½),å¦‚æœæ˜¯32ä½ç³»ç»Ÿåˆ™æ˜¯<code>amd386</code>  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/go/src</span><br><span class="line"><span class="attribute">GOOS</span>=linux <span class="attribute">GOARCH</span>=amd64 ./make.bash</span><br><span class="line">cd /usr/local/ngrok/</span><br><span class="line"><span class="attribute">GOOS</span>=linux <span class="attribute">GOARCH</span>=amd64 make release-server release-client</span><br></pre></td></tr></table></figure></li></ol><p>ç¼–è¯‘Mac64ä½å®¢æˆ·ç«¯<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/go/src</span><br><span class="line"><span class="attribute">GOOS</span>=darwin <span class="attribute">GOARCH</span>=amd64 ./make.bash</span><br><span class="line">cd /usr/local/ngrok/</span><br><span class="line"><span class="attribute">GOOS</span>=darwin <span class="attribute">GOARCH</span>=amd64 make release-client</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘Windows64ä½å®¢æˆ·ç«¯<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/go/src</span><br><span class="line"><span class="attribute">GOOS</span>=windows <span class="attribute">GOARCH</span>=amd64 ./make.bash</span><br><span class="line">cd /usr/local/ngrok/</span><br><span class="line"><span class="attribute">GOOS</span>=windows <span class="attribute">GOARCH</span>=amd64 make release-client</span><br></pre></td></tr></table></figure></p><h3 id="æœåŠ¡ç«¯è¿è¡Œ"><a href="#æœåŠ¡ç«¯è¿è¡Œ" class="headerlink" title="æœåŠ¡ç«¯è¿è¡Œ"></a>æœåŠ¡ç«¯è¿è¡Œ</h3><ol><li><p>è¿›å…¥åˆ°ngrokçš„binç›®å½•ä¸‹  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/ngrok/bin</span><br><span class="line">./ngrokd <span class="attribute">-domain</span>=<span class="string">"<span class="variable">$NGROK_DOMAIN</span>"</span> <span class="attribute">-httpAddr</span>=<span class="string">":60"</span> <span class="attribute">-httpsAddr</span>=<span class="string">":63"</span></span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœå‡ºç°å¦‚ä¸‹æç¤º,è¯´æ˜æœåŠ¡ç«¯å¼€å¯æˆåŠŸ</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[06:59:42 UTC 2018/03/24]</span> <span class="selector-attr">[INFO]</span> (ngrok/log.(*PrefixLogger).<span class="attribute">Info</span>:<span class="number">83</span>) <span class="selector-attr">[registry]</span> <span class="selector-attr">[tun]</span> <span class="selector-tag">No</span> <span class="selector-tag">affinity</span> <span class="selector-tag">cache</span> <span class="selector-tag">specified</span></span><br><span class="line"><span class="selector-attr">[06:59:42 UTC 2018/03/24]</span> <span class="selector-attr">[INFO]</span> (ngrok/log.<span class="attribute">Info</span>:<span class="number">112</span>) <span class="selector-tag">Listening</span> <span class="selector-tag">for</span> <span class="selector-tag">public</span> <span class="selector-tag">http</span> <span class="selector-tag">connections</span> <span class="selector-tag">on</span> <span class="selector-attr">[::]</span><span class="selector-pseudo">:60</span></span><br><span class="line"><span class="selector-attr">[06:59:42 UTC 2018/03/24]</span> <span class="selector-attr">[INFO]</span> (ngrok/log.<span class="attribute">Info</span>:<span class="number">112</span>) <span class="selector-tag">Listening</span> <span class="selector-tag">for</span> <span class="selector-tag">public</span> <span class="selector-tag">https</span> <span class="selector-tag">connections</span> <span class="selector-tag">on</span> <span class="selector-attr">[::]</span><span class="selector-pseudo">:63</span></span><br><span class="line"><span class="selector-attr">[06:59:42 UTC 2018/03/24]</span> <span class="selector-attr">[INFO]</span> (ngrok/log.<span class="attribute">Info</span>:<span class="number">112</span>) <span class="selector-tag">Listening</span> <span class="selector-tag">for</span> <span class="selector-tag">control</span> <span class="selector-tag">and</span> <span class="selector-tag">proxy</span> <span class="selector-tag">connections</span> <span class="selector-tag">on</span> <span class="selector-attr">[::]</span><span class="selector-pseudo">:4443</span></span><br><span class="line"><span class="selector-attr">[06:59:42 UTC 2018/03/24]</span> <span class="selector-attr">[INFO]</span> (ngrok/log.(*PrefixLogger).<span class="attribute">Info</span>:<span class="number">83</span>) <span class="selector-attr">[metrics]</span> <span class="selector-tag">Reporting</span> <span class="selector-tag">every</span> <span class="selector-tag">30</span> <span class="selector-tag">seconds</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="å®¢æˆ·ç«¯è¿è¡Œä¸ä½¿ç”¨"><a href="#å®¢æˆ·ç«¯è¿è¡Œä¸ä½¿ç”¨" class="headerlink" title="å®¢æˆ·ç«¯è¿è¡Œä¸ä½¿ç”¨"></a>å®¢æˆ·ç«¯è¿è¡Œä¸ä½¿ç”¨</h3><p>mac å®¢æˆ·ç«¯çš„ä½ç½®ï¼š<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/ngrok/</span>bin<span class="regexp">/darwin_amd64/</span>ngrok</span><br></pre></td></tr></table></figure></p><p>windows å®¢æˆ·ç«¯çš„ä½ç½®ï¼š<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/ngrok/</span>bin<span class="regexp">/windows_amd64/</span>ngrok.exe</span><br></pre></td></tr></table></figure></p><p>linux å®¢æˆ·ç«¯çš„ä½ç½®ï¼š<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/ngrok/</span>bin<span class="regexp">/ngrok</span></span><br></pre></td></tr></table></figure></p><p>æ–°å»ºngrok.cfgæ–‡ä»¶(é…ç½®æ–‡ä»¶)<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">server_addr:</span> <span class="string">"ngrok.lestat.me:4443"</span></span><br><span class="line"><span class="symbol">trust_host_root_certs:</span> false</span><br><span class="line"><span class="symbol">tunnels:</span> <span class="meta">#å¯å®šä¹‰å¤šä¸ªåŸŸå</span></span><br><span class="line"><span class="symbol">  test1:</span></span><br><span class="line"><span class="symbol">   subdomain:</span> <span class="string">"test1"</span> <span class="meta">#å®šä¹‰æœåŠ¡å™¨åˆ†é…åŸŸåå‰ç¼€</span></span><br><span class="line"><span class="symbol">   proto:</span></span><br><span class="line"><span class="symbol">    http:</span> <span class="number">80</span> <span class="meta">#æ˜ å°„ç«¯å£ï¼Œä¸åŠ ipé»˜è®¤æœ¬æœº</span></span><br><span class="line"><span class="symbol">  test2:</span></span><br><span class="line"><span class="symbol">   subdomain:</span> <span class="string">"test2"</span> <span class="meta">#å®šä¹‰æœåŠ¡å™¨åˆ†é…åŸŸåå‰ç¼€</span></span><br><span class="line"><span class="symbol">   proto:</span></span><br><span class="line"><span class="symbol">    http:</span> <span class="number">81</span> <span class="meta">#æ˜ å°„ç«¯å£ï¼Œä¸åŠ ipé»˜è®¤æœ¬æœº</span></span><br></pre></td></tr></table></figure></p><p>ä»å‘½ä»¤è¡Œè¿è¡Œå®¢æˆ·ç«¯æ–‡ä»¶,å¦‚ä¸‹:<br>æ–¹æ³•1:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./ngrok <span class="attribute">-config</span>=ngrok.cfg <span class="attribute">-log</span>=ngrok.log start test1</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•2:(æœ€åä¸€ä¸ª8080ä»£è¡¨æ˜ å°„çš„æœ¬åœ°ä¸»æœºç«¯å£)<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./ngrok <span class="attribute">-config</span>=ngrok.cfg <span class="attribute">-log</span>=ngrok.log <span class="attribute">-subdomain</span>=test1 8080</span><br></pre></td></tr></table></figure></p><p>å¦‚æœè¿”å›ç›¸ä¼¼äºä»¥ä¸‹çš„å†…å®¹,è¯´æ˜å®¢æˆ·ç«¯å¯åŠ¨æˆåŠŸ<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Tunnel</span> Status                 online                         </span><br><span class="line">Version                       <span class="number">1</span>.<span class="number">7</span>/<span class="number">1</span>.<span class="number">7</span>                        </span><br><span class="line">Forwarding                    https://hccrm.ngrok.lestat.me:60 -&gt; <span class="number">127.0.0.1:80</span>  </span><br><span class="line">Forwarding                    http://hccrm.ngrok.lestat.me:60 -&gt; <span class="number">127.0.0.1:80</span>   </span><br><span class="line">Web Interface                 <span class="number">127.0.0.1:4040</span>                 </span><br><span class="line"><span class="comment"># Conn                        0                              </span></span><br><span class="line">Avg Conn Time                 <span class="number">0</span>.<span class="number">00ms</span></span><br></pre></td></tr></table></figure></p><h3 id="nginxåå‘ä»£ç†ç›¸å…³é…ç½®"><a href="#nginxåå‘ä»£ç†ç›¸å…³é…ç½®" class="headerlink" title="nginxåå‘ä»£ç†ç›¸å…³é…ç½®"></a>nginxåå‘ä»£ç†ç›¸å…³é…ç½®</h3><p>å‡è®¾:  </p><ol><li>ngrokç›‘å¬httpçš„ç«¯å£ä¸º60</li><li>nginxç›‘å¬äº†å½“å‰æœåŠ¡å™¨çš„80ç«¯å£(åŸŸåè®¿é—®hccrm.ngrok.lestat.meæ—¶ä¼šç›´æ¥è®¿é—®åˆ°nginxç›‘å¬çš„80ç«¯å£,å› æ­¤éœ€è¦nginxè½¬å‘)<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  <span class="regexp">*.ngrok.lestat.me</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host  <span class="variable">$http_host</span>:<span class="number">60</span>; <span class="comment">#æ­¤å¤„ç«¯å£è¦è·Ÿ å¯åŠ¨æœåŠ¡ç«¯ngrok æ—¶æŒ‡å®šçš„ç«¯å£ä¸€è‡´</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Nginx-Proxy <span class="literal">true</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">""</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  http://127.0.0.1:60; <span class="comment"># åå‘ä»£ç†å¯¹åº”çš„æœ¬åœ°ip:port</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>é‡å¯nginx<br><code>service nginx reload</code></p><p>è‡³æ­¤,å·²å®ç°äº†å†…ç½‘ç©¿é€<br>ç›®å‰å­˜åœ¨çš„é—®é¢˜:</p><ol><li>ç›®å‰ä¸çŸ¥å¦‚ä½•å®ç°å¯¹æœ¬åœ°è™šæ‹Ÿä¸»æœºçš„è®¿é—®(ä¾‹å¦‚æœ¬åœ°apacheä¸Šhttpd-vhostsä¸­é…ç½®çš„è™šæ‹Ÿä¸»æœº)  </li><li>ç”±äºngrok1.xå·²äºä¸¤å¹´å‰åœæ­¢ç»´æŠ¤,å†åŠ ä¸Šç¬¬ä¸€ä¸ªé—®é¢˜1,å› æ­¤åç»­å‡†å¤‡å†™ä¸€ç¯‡å…³äº<a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">frp</a>çš„æ­å»ºè®°å½•,è¿™æ˜¯ä¸€ä¸ªé•¿æœŸç»´æŠ¤çš„å¼€æºé¡¹ç›®,å€¼å¾—å­¦ä¹ !  </li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆshadowsocksä¸­çš„pacé…ç½®</title>
    <link href="https://lestatmiao.github.io/2018/02/14/%E6%B5%85%E8%B0%88shadowsocks%E4%B8%AD%E7%9A%84pac%E9%85%8D%E7%BD%AE/"/>
    <id>https://lestatmiao.github.io/2018/02/14/æµ…è°ˆshadowsocksä¸­çš„pacé…ç½®/</id>
    <published>2018-02-14T03:43:29.000Z</published>
    <updated>2018-02-14T05:36:22.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>å¤§æ¦‚æ˜¯ä»å»å¹´å¼€å§‹ä½¿ç”¨çš„shadowsockså®ç°ç§‘å­¦ä¸Šç½‘,å½“æ—¶åœ¨é…ç½®å®Œä»£ç†æœåŠ¡å™¨ä¹‹åèƒ½å¤Ÿç”¨äº†å°±æ²¡ç®¡å…¶ä»–çš„é…ç½®ã€‚<br>ç›´åˆ°æœ€è¿‘æƒ³åœ¨ç»´åŸºç™¾ç§‘ä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·çš„æ—¶å€™å‘ç°<br><img src="https://lestat.b0.upaiyun.com/blog/wiki-forbidden.png" alt><br>ç”±äºä¸€äº›åŸå› ,å½“å‰ä½¿ç”¨ä»£ç†çš„ipè¢«å°ç¦äº†<br>ç”±äºGFWæ˜¯é€šè¿‡<a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%93%E5%AD%98%E6%B1%A1%E6%9F%93" target="_blank" rel="noopener">dnsæ±¡æŸ“</a>çš„æ–¹å¼å±è”½äº†zh.wikipedia.org(å…¶ä»–è¯­è¨€çš„wikipediaå…¶å®æ˜¯å¯ä»¥åœ¨å›½å†…ç›´æ¥è®¿é—®çš„æ¯”å¦‚<a href="https://en.wikipedia.org" target="_blank" rel="noopener">è‹±æ–‡ç«™</a>),è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡å…³é—­ä»£ç†å¹¶ä¿®æ”¹hostsæ–‡ä»¶è§£å†³,ä½†è¿™æ ·å¤ªéº»çƒ¦,å› ä¸ºéœ€è¦å®šæœŸæ›´æ–°hostsæ–‡ä»¶çš„ipåœ°å€,åæ¥googleäº†ä¸€ä¸‹å‘ç°shadowsocksé‡Œé¢æœ‰ä¸€ä¸ªåä¸ºpacçš„æ–‡ä»¶,è¿™ä¸ªæ–‡ä»¶çš„åŸŸååˆ—è¡¨æ¥è‡ªäº<a href="https://github.com/gfwlist/gfwlist" target="_blank" rel="noopener">GFWlist</a>,è€Œæ­£æ˜¯è¿™ä¸ªæ–‡ä»¶å†³å®šäº†shadowsockså¤„äºpacæ¨¡å¼æ—¶å“ªäº›åŸŸåéœ€è¦è¢«ä»£ç†,åœ¨è¿™ä¸ªæ–‡ä»¶ä¹‹å¤–çš„åŸŸåéƒ½ä¼šç›´æ¥è®¿é—®ã€‚å› æ­¤,è§£å†³ç»´åŸºçš„ipå°ç¦ä¸”è¦ç»§ç»­ä½¿ç”¨ä»£ç†ä¸Šç½‘åªéœ€è¦2ä¸ªæ­¥éª¤  </p><ol><li>ä¿®æ”¹æœ¬åœ°hostsä¸ºwikipediaä¸­æ–‡å½“å‰çš„ip(è§£å†³dnsæ±¡æŸ“)</li><li>ä¿®æ”¹pacæ–‡ä»¶ä¸­çš„é…ç½®,å°†wikipedia.orgç›¸å…³çš„é…ç½®å»æ‰å³å¯  </li></ol><p><strong>PACçš„ä¼˜åŠ¿</strong><br>PACè‡ªåŠ¨ä»£ç†å±äºæ™ºèƒ½åˆ¤æ–­æ¨¡å¼ï¼Œç›¸æ¯”å…¨å±€ä»£ç†ï¼Œå®ƒçš„ä¼˜ç‚¹æœ‰ï¼š  </p><ol><li>ä¸å½±å“å›½å†…ç½‘ç«™çš„è®¿é—®é€Ÿåº¦ï¼Œé˜²æ­¢æ— æ„ä¹‰çš„ç»•è·¯</li><li>èŠ‚çœShadowsocksæœåŠ¡çš„æµé‡ï¼ŒèŠ‚çœæœåŠ¡å™¨èµ„æº</li><li>æ§åˆ¶æ–¹ä¾¿</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>è¿‘æœŸå·¥ä½œä¸­çš„æ”¶è·</title>
    <link href="https://lestatmiao.github.io/2018/02/07/%E8%BF%91%E6%9C%9F%E5%B7%A5%E4%BD%9C%E4%B8%AD%E7%9A%84%E6%94%B6%E8%8E%B7/"/>
    <id>https://lestatmiao.github.io/2018/02/07/è¿‘æœŸå·¥ä½œä¸­çš„æ”¶è·/</id>
    <published>2018-02-07T09:18:00.000Z</published>
    <updated>2018-02-07T09:23:27.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>çœ¼ä¸‹å¿«è¦è¿‡å¹´äº†,æ‰‹å¤´çš„é¡¹ç›®ä¹Ÿç»ˆäºæ¥è¿‘å°¾å£°,æŠ½ç‚¹æ—¶é—´æ¥è®°å½•ä¸‹è¿‘æ®µæ—¶é—´çš„å·¥ä½œå¿ƒå¾—<br>å‰æ®µæ—¶é—´åœ¨å·¥ä½œä¹‹ä½™æˆ‘æŠ½ç©ºçœ‹äº†ä¸€äº›<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">ECMA6</a>çš„è¯­æ³•,ç®€å•å­¦ä¹ äº†ä¸€ä¸‹<a href="https://doc.webpack-china.org/" target="_blank" rel="noopener">webpack</a>,äº†è§£äº†<a href="https://babeljs.cn/" target="_blank" rel="noopener">babel</a>,åé¢ä¹Ÿå°è¯•ç€ä½¿ç”¨<a href="https://github.com/vuejs/vue-cli" target="_blank" rel="noopener">vue-cli</a>æ­å»ºè‡ªå·±çš„demoå¹¶ç†Ÿæ‚‰å…¶ä¸­çš„ç»“æ„  </p><p>è¯´è¯´æœ€è¿‘åšçš„ä¸€ä¸ªé¡¹ç›®:ä¸€ä¸ªæ¥å£å¼€å‘(å‰ç«¯)é¡¹ç›®,æ¥å£ç”±å®¢æˆ·æä¾›(javaå¼€å‘,jsonæ•°æ®æ ¼å¼),æˆ‘æ–¹è´Ÿè´£ç§»åŠ¨ç«¯webå¼€å‘å’Œåå°é¡µé¢çš„å¼€å‘,å¹¶è°ƒè¯•å¥½æ‰€æœ‰æ¥å£(åç«¯æ¥å£æƒ…å†µ:æƒé™ç›¸å…³[14],ä¼šå‘˜æ¨¡å—[10],ç‰‡åº“[14],,å‡ºå“[19],åª’ä½“[15],èµ„è®¯[11],ç›´é€šè½¦[14],ipæ´»åŠ¨[12],è¥é”€è”ç›Ÿ[13])<br>åˆšæ‹¿åˆ°éœ€æ±‚çš„æ—¶å€™æˆ‘è¿˜æ˜¯æ¯”è¾ƒæ‹…å¿ƒèƒ½å¦æå®š,æ¯•ç«Ÿä½œä¸ºä¸€ä¸ªphperä¹‹å‰çš„ç¡®æ²¡æœ‰æè¿‡spaçš„å¼€å‘,ä½†ä¹‹å‰åšäº†é‚£ä¹ˆå¤šspaçš„åŠŸè¯¾,ä¹Ÿè§‰å¾—æ˜¯æ—¶å€™çœŸæ­£çš„å®è·µä¸€ä¸‹äº†,äºæ˜¯å¾ˆå¿«æ‰¾åˆ°äº†ä¸€ä¸ªåŸºäº<a href="https://cn.vuejs.org/index.html" target="_blank" rel="noopener">vue</a>+<a href="http://element-cn.eleme.io/#/zh-CN/component/installation" target="_blank" rel="noopener">elementui</a>çš„åå°æ¡†æ¶<a href="https://github.com/PanJiaChen/vue-element-admin" target="_blank" rel="noopener">vue-element-admin</a>,<strong>æ®æˆ‘æœ€è¿‘è§‚å¯Ÿ,è¿™ä¸ªé¡¹ç›®åœ¨githubä¸Šæ¯å¤©å¹³å‡å¢åŠ å°†è¿‘100ä¸ªstarâ€¦</strong>  </p><p>è¿™ä¸ªæ¡†æ¶æ›¿æˆ‘ä»¬å®Œæˆäº†å¾ˆå¤šåŸºæœ¬æ–¹æ³•çš„å°è£…,è·¯ç”±è®¿é—®æƒé™,é¡µçœ‰æ ‡ç­¾åˆ‡æ¢,å¸¸ç”¨çš„å„ç§è¡¨æ ¼,è¡¨å•ç­‰;å¼€å‘èµ·æ¥æ•ˆç‡ç›¸å¯¹è¾ƒé«˜,åœ¨æˆ‘åæ¥å®é™…çš„å¼€å‘ä¸­ä¹Ÿåº”è¯äº†è¿™ç‚¹<br>æœ€åèŠ±äº†ä¸¤å‘¨æ—¶é—´,æ­å»ºäº†ä¸€ä¸ªå°å‹åå°ç®¡ç†ç³»ç»Ÿå¹¶å®Œæˆæ‰€æœ‰æ¥å£çš„è°ƒè¯•<br>ä½¿ç”¨vueåšå¼€å‘çš„æ„Ÿè§‰å°±æ˜¯ä»£ç æ¯”æ›¾ç»ç”¨jqçš„é¡¹ç›®æ›´è§„èŒƒ(ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºæ¡†æ¶ä¸­å¼•å…¥äº†eslint,é…åˆvscodeçš„eslint+prettierä¸€é”®æ ¼å¼åŒ–,å®ç°ç®€å•æ“ä½œå°±èƒ½éµå¾ªeslintä»£ç è§„èŒƒ);ç”±äºvue-cliå·²ç»å°†webpack,babelæ‰“åŒ…å¥½,å¹¶ä¸”å®ç°äº†<code>ctrl</code>+<code>s</code>è‡ªåŠ¨åˆ·æ–°é¡µé¢é¢„è§ˆä¸”ä¸ä¼šæ¸…ç©º<code>console</code>é‡Œé¢çš„å†…å®¹,å¼€å‘çš„ä½“éªŒå˜å¾—éå¸¸å¥½ã€‚<br>å¼ºçƒˆæ¨èchromeçš„<code>Vue DevTools</code>æ’ä»¶,å®‰è£…å®Œæˆåå¯ä»¥åœ¨chromeå³ä¸Šæ–¹çœ‹åˆ°vueçš„logo,åœ¨devæ¨¡å¼ä¸‹çš„é¡µé¢å¯ä»¥ç›´æ¥çœ‹åˆ°å¼€å‘è€…å·¥å…·çš„æ ‡ç­¾æ å¤šå‡ºä¸€ä¸ªVueæ ‡ç­¾,ç‚¹å‡»å³å¯æŸ¥çœ‹åˆ°å½“å‰é¡µé¢çš„ä¿¡æ¯!  </p><p>ç›®å‰ä¸ºæ­¢,è‡ªå·±å¯¹vueçš„äº†è§£è¿˜ä¸å¤Ÿæ·±å…¥,å¯¹vuex,ç»„ä»¶çš„ä½¿ç”¨è¿˜ä¸å¤Ÿçµæ´»,è¿˜éœ€è¦æ›´å¤šçš„å®è·µ  </p><p><strong>æ–°çš„ä¸€å¹´,ç»§ç»­åŠ æ²¹!</strong></p><p><img src="https://lestat.b0.upaiyun.com/blog/dontgiveup.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Vueå¼€å‘ä¸­çš„ä¸€äº›æ€»ç»“</title>
    <link href="https://lestatmiao.github.io/2018/01/26/Vue%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82/"/>
    <id>https://lestatmiao.github.io/2018/01/26/Vueå¼€å‘ä¸­çš„ä¸€äº›ç»†èŠ‚/</id>
    <published>2018-01-26T08:20:18.000Z</published>
    <updated>2018-01-26T08:33:24.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="å…³äºaxiosçš„ä½¿ç”¨ç»†èŠ‚"><a href="#å…³äºaxiosçš„ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="å…³äºaxiosçš„ä½¿ç”¨ç»†èŠ‚"></a>å…³äºaxiosçš„ä½¿ç”¨ç»†èŠ‚</h3><p>åŸºäºvueåšspaå¼€å‘,ä¸ªäººå¾ˆå¤šæ—¶å€™ä½¿ç”¨çš„è¯·æ±‚æ‰©å±•æ˜¯<a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a>,è¿™ä¸ªæ‰©å±•ä¼šæŠŠå¸¸ç”¨çš„è¯·æ±‚å°è£…å¥½å‘é€å‡ºå»,ä½¿ç”¨çš„æ—¶å€™åªéœ€è¦ä¼ å‚æ•°å³å¯ã€‚ä»Šå¤©é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯åç«¯æ¥å£æ¥æ”¶<code>get</code>æ–¹å¼ä¼ å‚,æˆ‘è¿™è¾¹æœ‰ä¸€ä¸ªæ•°ç»„éœ€è¦é€šè¿‡<code>get</code>æ–¹å¼ä¼ é€’è¿‡å»,å‡è®¾æ•°ç»„åç§°æ˜¯:<code>ids</code>,è¯·æ±‚ä¸­é»˜è®¤å°±æ˜¯<code>ids[]</code>çš„å½¢å¼,æ¥å£éœ€è¦æä¾›<code>ids</code>çš„å½¢å¼,æ­¤æ—¶éœ€è¦å¼•å…¥<a href="https://github.com/ljharb/qs" target="_blank" rel="noopener">qs</a>æ‰©å±•,å¹¶åœ¨è¯·æ±‚ä½ç½®æ·»åŠ ä¸€é¡¹é…ç½®,ä»¥è½¬æ¢å‚æ•°æ ¼å¼,ç¤ºä¾‹ä»£ç å¦‚ä¸‹:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* todo :ä¼šå‘˜å®¡æ ¸åˆ—è¡¨çš„é€šè¿‡ä¸é©³å›(æ‰¹é‡å’Œå•ä¸ªä¸ºåŒä¸€ä¸ªæ–¹æ³•), éœ€è¦ç®¡ç†å‘˜ç™»é™†</span></span><br><span class="line"><span class="comment">* @param data object</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">userInfoCheck</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    url: <span class="string">'/backend/userInfoCheck'</span>,</span><br><span class="line">    method: <span class="string">'get'</span>,</span><br><span class="line">    params: data,</span><br><span class="line">    paramsSerializer: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> qs.stringify(params, &#123; <span class="attr">arrayFormat</span>: <span class="string">'repeat'</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="vue" scheme="https://lestatmiao.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºvueä¸­$nextTickçš„ä¸€ç‚¹ä½¿ç”¨å¿ƒå¾—</title>
    <link href="https://lestatmiao.github.io/2018/01/24/vue%E5%BC%80%E5%8F%91%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%B0%8F%E7%BB%93/"/>
    <id>https://lestatmiao.github.io/2018/01/24/vueå¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜å°ç»“/</id>
    <published>2018-01-24T02:10:57.000Z</published>
    <updated>2018-01-24T02:54:29.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>å½“ä¸‹å…¬å¸åœ¨åšä¸€ä¸ªåª’ä½“é—¨æˆ·ç½‘ç«™,åå°ç”±å¦ä¸€å®¶å…¬å¸ä½¿ç”¨javaå¼€å‘å¹¶æä¾›æ¥å£,æœ¬äººè´Ÿè´£å¼€å‘åå°é¡µé¢,ä½¿ç”¨çš„æ˜¯<a href="https://github.com/PanJiaChen/vue-element-admin" target="_blank" rel="noopener">vue-element-admin</a>å¼€å‘<br>ä¸‹é¢è¯´ä¸€ä¸‹é—®é¢˜åœºæ™¯,åœ¨å¼€å‘è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ªåå°ç®¡ç†å‘˜è§’è‰²é¡µé¢,å…¶ä¸­åŒ…å«ä¸€ä¸ªè¡¨å•dialog,åœ¨å…¶ä¸­ä½¿ç”¨äº†el-treeç»„ä»¶,<strong>ç›¸å…³</strong> ä»£ç ç»“æ„å¦‚ä¸‹:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"filter-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">class</span>=<span class="string">"filter-item"</span> <span class="attr">style</span>=<span class="string">"margin-left: 10px;"</span> <span class="attr">v-waves</span> @<span class="attr">click</span>=<span class="string">"handleCreate"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span>&gt;</span>æ–°å¢è§’è‰²</span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:title</span>=<span class="string">"textMap[dialogStatus]"</span> <span class="attr">:visible.sync</span>=<span class="string">"dialogFormVisible"</span> <span class="attr">width</span>=<span class="string">"50%"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:rules</span>=<span class="string">"rules"</span> <span class="attr">ref</span>=<span class="string">"dataForm"</span> <span class="attr">:model</span>=<span class="string">"temp"</span> <span class="attr">label-position</span>=<span class="string">"top"</span> <span class="attr">label-width</span>=<span class="string">"90px"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">style</span>=<span class="string">'width: 400px; margin-left:50px;'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"é€‰æ‹©æƒé™"</span> <span class="attr">prop</span>=<span class="string">"sysPermission"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-tree</span> <span class="attr">ref</span>=<span class="string">"tree"</span> <span class="attr">:data</span>=<span class="string">"sysPermission"</span> <span class="attr">:props</span>=<span class="string">"formProps"</span> <span class="attr">show-checkbox</span></span></span><br><span class="line"><span class="tag">                   @<span class="attr">check-change</span>=<span class="string">"handleCheckChange"</span> <span class="attr">node-key</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ç›¸å…³çš„jså¦‚ä¸‹:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">'sysRoleList'</span>,</span><br><span class="line">        data() &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                tableKey: <span class="number">0</span>,</span><br><span class="line">                list: <span class="literal">null</span>,</span><br><span class="line">                total: <span class="literal">null</span>,</span><br><span class="line">                listLoading: <span class="literal">true</span>,</span><br><span class="line">                formLoading: <span class="literal">true</span>,</span><br><span class="line">                listQuery: &#123;</span><br><span class="line">                    page: <span class="number">1</span>,</span><br><span class="line">                    limit: <span class="number">20</span>,</span><br><span class="line">                    importance: <span class="literal">undefined</span>,</span><br><span class="line">                    title: <span class="literal">undefined</span>,</span><br><span class="line">                    type: <span class="literal">undefined</span>,</span><br><span class="line">                    sort: <span class="string">'+id'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                dialogFormVisible: <span class="literal">false</span>,</span><br><span class="line">                dialogStatus: <span class="string">'update'</span>,</span><br><span class="line">                textMap: &#123;</span><br><span class="line">                    update: <span class="string">'ç¼–è¾‘è§’è‰²'</span>,</span><br><span class="line">                    create: <span class="string">'æ–°å¢è§’è‰²'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                rules: &#123;</span><br><span class="line">                    sysRoleName: [&#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å¿…é¡»å¡«å†™è§’è‰²åç§°'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span>&#125;]</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="comment">// è¡¨å•æ•°æ®</span></span><br><span class="line">                temp: &#123;</span><br><span class="line">                    id: <span class="string">''</span>,</span><br><span class="line">                    sysPermissionList: [],</span><br><span class="line">                    sysRoleName: <span class="string">''</span></span><br><span class="line">                &#125;,</span><br><span class="line">                currentKeys: [],</span><br><span class="line">                <span class="comment">// è¡¨å•æƒé™å­—æ®µæ˜ å°„</span></span><br><span class="line">                formProps: &#123;</span><br><span class="line">                    label: <span class="string">'sysPermissionName'</span></span><br><span class="line">                &#125;,</span><br><span class="line">                sysPermission: &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        created() &#123;</span><br><span class="line">            <span class="comment">// åˆ—è¡¨æ•°æ®</span></span><br><span class="line">            <span class="comment">// this.getList()</span></span><br><span class="line">            <span class="comment">// è·å–æ‰€æœ‰æƒé™</span></span><br><span class="line">            <span class="comment">// this.findAllSysPermission()</span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            * todo:checkboxçŠ¶æ€å˜æ›´ç›‘å¬</span></span><br><span class="line"><span class="comment">            * */</span></span><br><span class="line">            handleCheckChange(data, checked, indeterminate) &#123;</span><br><span class="line">                <span class="keyword">const</span> idObj = &#123;<span class="attr">id</span>: data.id&#125;</span><br><span class="line">                <span class="keyword">this</span>.temp.sysPermissionList.push(idObj)</span><br><span class="line">            &#125;,</span><br><span class="line">            resetTemp() &#123;</span><br><span class="line">                <span class="keyword">this</span>.temp = &#123;</span><br><span class="line">                    id: <span class="string">''</span>,</span><br><span class="line">                    sysRoleName: <span class="string">''</span>,</span><br><span class="line">                    sysPermissionList: []</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            handleCreate() &#123;</span><br><span class="line">                <span class="keyword">this</span>.resetTemp()</span><br><span class="line">                <span class="keyword">this</span>.dialogStatus = <span class="string">'create'</span></span><br><span class="line">                <span class="keyword">this</span>.currentKeys = []</span><br><span class="line">                <span class="keyword">this</span>.dialogFormVisible = <span class="literal">true</span></span><br><span class="line">                <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.$refs[<span class="string">'dataForm'</span>].clearValidate()</span><br><span class="line">                    <span class="keyword">this</span>.$refs.tree.setCheckedKeys(<span class="keyword">this</span>.currentKeys)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            handleUpdate(row) &#123;</span><br><span class="line">                <span class="keyword">this</span>.resetTemp()</span><br><span class="line">                <span class="keyword">this</span>.dialogStatus = <span class="string">'update'</span></span><br><span class="line">                <span class="keyword">this</span>.dialogFormVisible = <span class="literal">true</span></span><br><span class="line">                <span class="keyword">this</span>.temp = <span class="built_in">Object</span>.assign(&#123;&#125;, row) <span class="comment">// copy obj</span></span><br><span class="line">                <span class="keyword">this</span>.currentKeys = []</span><br><span class="line">                row.sysPermissionList.forEach(<span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.currentKeys.push(value[<span class="number">0</span>])</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.$refs[<span class="string">'dataForm'</span>].clearValidate()</span><br><span class="line">                    <span class="keyword">this</span>.$refs.tree.setCheckedKeys(<span class="keyword">this</span>.currentKeys)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>éœ€æ±‚:<br>éœ€è¦åœ¨æ¯æ¬¡ç¼–è¾‘æ•°æ®çš„æ—¶å€™è§¦å‘<code>&lt;el-tree&gt;</code>çš„æ–¹æ³•<code>setCheckedKeys</code><br>é—®é¢˜:<br>ä¹‹å‰æ²¡æœ‰æŠŠ<code>this.$refs.tree.setCheckedKeys()</code>å†™åœ¨<code>this.$nextTick</code>çš„callbackä¹‹ä¸­,å› æ­¤ä¼šæç¤º:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">TypeError</span>: Cannot read property <span class="string">'setCheckedKeys'</span> <span class="keyword">of</span> <span class="literal">undefined</span></span><br></pre></td></tr></table></figure></p><p>è§£å†³æ–¹æ³•:<br>æŠŠdialogç»„ä»¶å†…çš„å…¶ä»–éœ€è¦æ‰§è¡Œæ–¹æ³•çš„ç»„ä»¶æ–¹æ³•å†™åˆ°<code>this.$nextTick</code>çš„callbackä¹‹ä¸­<br>åŸå› å¦‚ä¸‹(å®˜æ–¹):  </p><blockquote><p>å¯èƒ½ä½ è¿˜æ²¡æœ‰æ³¨æ„åˆ°ï¼ŒVue å¼‚æ­¥æ‰§è¡Œ DOM æ›´æ–°ã€‚åªè¦è§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®æ”¹å˜ã€‚å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œä¸Šéå¸¸é‡è¦ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯â€œtickâ€ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚Vue åœ¨å†…éƒ¨å°è¯•å¯¹å¼‚æ­¥é˜Ÿåˆ—ä½¿ç”¨åŸç”Ÿçš„ Promise.then å’Œ MessageChannelï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚<br>ä¾‹å¦‚ï¼Œå½“ä½ è®¾ç½® vm.someData = â€˜new valueâ€™ ï¼Œè¯¥ç»„ä»¶ä¸ä¼šç«‹å³é‡æ–°æ¸²æŸ“ã€‚å½“åˆ·æ–°é˜Ÿåˆ—æ—¶ï¼Œç»„ä»¶ä¼šåœ¨äº‹ä»¶å¾ªç¯é˜Ÿåˆ—æ¸…ç©ºæ—¶çš„ä¸‹ä¸€ä¸ªâ€œtickâ€æ›´æ–°ã€‚å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³åœ¨ DOM çŠ¶æ€æ›´æ–°ååšç‚¹ä»€ä¹ˆï¼Œè¿™å°±å¯èƒ½ä¼šæœ‰äº›æ£˜æ‰‹ã€‚è™½ç„¶ Vue.js é€šå¸¸é¼“åŠ±å¼€å‘äººå‘˜æ²¿ç€â€œæ•°æ®é©±åŠ¨â€çš„æ–¹å¼æ€è€ƒï¼Œé¿å…ç›´æ¥æ¥è§¦ DOMï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬ç¡®å®è¦è¿™ä¹ˆåšã€‚ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åç­‰å¾… Vue å®Œæˆæ›´æ–° DOM ï¼Œå¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨ Vue.nextTick(callback) ã€‚è¿™æ ·å›è°ƒå‡½æ•°åœ¨ DOM æ›´æ–°å®Œæˆåå°±ä¼šè°ƒç”¨ã€‚<br><a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="noopener">æ·±å…¥å“åº”å¼åŸç†</a>  </p></blockquote><p>ä¸ªäººç†è§£:<br>vueè¿™ä¹ˆåšæ˜¯å› ä¸ºé¢‘ç¹çš„æ›´æ–°domæ˜¯ç‰¹åˆ«è€—è´¹æ€§èƒ½çš„ï¼Œæ‰€ä»¥æäº†ä¸€ä¸ªæ‰¹å¤„ç†æ›´æ–°ï¼ŒæŠŠæ‰€æœ‰çš„updateæ“ä½œæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œæ ˆçš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—<br>ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„åœºæ™¯ï¼Œcreatedå›è°ƒé‡Œæ˜¯æ— æ³•ç›´æ¥é€šè¿‡this.$refsè·å–åˆ°ç”¨refå‘½åçš„å­ç»„ä»¶çš„ï¼Œåªæœ‰é€šè¿‡$nextTickæ‰èƒ½è®¿é—®åˆ°ã€‚è¿˜æœ‰æ¯”å¦‚dialogé‡Œæœ‰ä¸€ä¸ªæ­¥éª¤æ¡ç»„ä»¶ï¼Œåœ¨æ¯æ¬¡æ‰“å¼€å¯¹è¯æ¡†éƒ½æƒ³è§¦å‘æ­¥éª¤1çš„åŠ¨ä½œã€‚å¦‚æœç›´æ¥å†™step=0;step=1;æ˜¯ä¸ä¼šæœ‰å˜åŒ–çš„ï¼Œå› ä¸ºæ•´ä¸ªå‡½æ•°æ‰§è¡Œå®Œä¹‹å‰DOMéƒ½ä¸ä¼šåˆ·æ–°ã€‚æŠŠstep=1æ”¾åˆ°$nextTické‡Œå°±å¯ä»¥äº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="vue" scheme="https://lestatmiao.github.io/tags/vue/"/>
    
      <category term="ç»„ä»¶" scheme="https://lestatmiao.github.io/tags/%E7%BB%84%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>certbot+letsencrypté…ç½®å…è´¹å•è¯ä¹¦å¤šåŸŸåsslè¯ä¹¦</title>
    <link href="https://lestatmiao.github.io/2018/01/03/certbot-letsencrypt%E9%85%8D%E7%BD%AEssl%E8%AF%81%E4%B9%A6/"/>
    <id>https://lestatmiao.github.io/2018/01/03/certbot-letsencrypté…ç½®sslè¯ä¹¦/</id>
    <published>2018-01-03T08:44:05.000Z</published>
    <updated>2018-03-08T01:58:14.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p><strong>å‰äº›å¤©çœ‹åˆ°å¾®ä¿¡å…¬ä¼—å¹³å°å®˜æ–¹å…¬å‘Š<a href="https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&amp;announce_id=1505983913&amp;version=&amp;lang=zh_CN" target="_blank" rel="noopener">å…³äºå…¬ä¼—å¹³å°æ¥å£ä¸å†æ”¯æŒHTTPæ–¹å¼è°ƒç”¨çš„å…¬å‘Š</a>ä¹‹åå†³å®šæŠŠé¡¹ç›®çš„åè®®ä»<code>http</code>æ”¹æˆ<code>https</code>,äºæ˜¯å¼€å§‹åœ¨ç½‘ä¸ŠæŸ¥,å®Œæˆä¹‹åæ€»ç»“äº†ä¸€ç‚¹ç»éªŒ</strong>  </p><blockquote><p>æœ¬æ–‡æ¼”ç¤ºçš„æ˜¯é€šç”¨è¯ä¹¦,å³åœ¨<code>certbot</code>å‘½ä»¤ä¸­ä¸éœ€è¦æŒ‡å®š<code>--apache</code>æˆ–è€…<code>--nginx</code>ä¹‹ç±»,åªéœ€è¦åœ¨å®Œæˆè¯ä¹¦ç”Ÿæˆä¹‹ååœ¨æœåŠ¡å™¨é…ç½®æ–‡ä»¶é‡Œè¿›è¡Œå¼•ç”¨å³å¯</p></blockquote><h3 id="Letâ€™s-Encrypt"><a href="#Letâ€™s-Encrypt" class="headerlink" title="Letâ€™s Encrypt"></a>Letâ€™s Encrypt</h3><p>Letâ€™s Encrypt è®¤è¯ç­¾å‘ä¸ºæ¯3ä¸ªæœˆä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯æ¯ 90 å¤©å¿…é¡»æ›´æ–°ï¼ˆrenewï¼‰ä¸€æ¬¡ã€‚å–å¾—è®¤è¯çš„è¿‡ç¨‹éœ€è¦è¿›ä¸»æœºå®‰è£ä»£ç†ç¨‹åº:<a href="https://certbot.eff.org/" target="_blank" rel="noopener">certbot</a>,ä¸‹é¢ä»¥ubuntuä¸ºä¾‹:  </p><ul><li><p>å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install software-properties-common</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo add-apt-repository ppa:certbot/certbot</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install certbot</span></span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆè¯ä¹¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo certbot certonly</span></span><br></pre></td></tr></table></figure></li></ul><p>æ­¤æ—¶ä¼šå‡ºç°é€‰é¡¹,æŒ‰ç…§æç¤ºé€‰æ‹©å³å¯  </p><ul><li>è¯ä¹¦è‡ªåŠ¨ç»­æœŸå¯ä»¥ä½¿ç”¨<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot renew <span class="comment">--force-renew</span></span><br></pre></td></tr></table></figure></li></ul><p>æ‰‹åŠ¨å¼ºåˆ¶ä¸ºè¯ä¹¦ç»­æœŸ<br>å¦‚æœå‡ºç°ä»¥ä¸‹æç¤ºåˆ™è¯´æ˜æ›´æ–°æˆåŠŸ<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Congratulations, all renew<span class="type">als</span> succeeded. The following certs have been renew<span class="type">ed</span>:</span><br></pre></td></tr></table></figure></p><p>ä½†ä¸ºäº†æ›´æ–¹ä¾¿,é€šå¸¸ä½¿ç”¨<code>crontab -e</code>ç¼–è¾‘å®šæ—¶ä»»åŠ¡,å¹¶åŠ å…¥<br><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span><span class="number">0</span> <span class="number">1</span> * * certbot renew --force-renew â€œé‡å¯æœåŠ¡å™¨å‘½ä»¤â€</span><br></pre></td></tr></table></figure></p><p>å®ç°æ¯ä¸ªæœˆ1å·0ç‚¹è‡ªåŠ¨ç»­æœŸ</p><h3 id="åœ¨æœåŠ¡å™¨é…ç½®ç›¸å…³è¯ä¹¦"><a href="#åœ¨æœåŠ¡å™¨é…ç½®ç›¸å…³è¯ä¹¦" class="headerlink" title="åœ¨æœåŠ¡å™¨é…ç½®ç›¸å…³è¯ä¹¦"></a>åœ¨æœåŠ¡å™¨é…ç½®ç›¸å…³è¯ä¹¦</h3><p><a href="https://lestatmiao.github.io/2017/09/08/apache2-ssl/">apache2å¼€å¯SSL</a></p><p><strong>tips:</strong><br>å¦‚æœæœ‰å¤šä¸ªåŸŸå  </p><ol><li>å¯ä»¥ç”¨è¿‡åœ¨<code>Please enter in your domain name(s) (comma and/or space separated)  (Enter &#39;c&#39;to cancel):</code>æ­¥éª¤é€šè¿‡<code>,</code>æ¥åˆ†éš”åŸŸå</li><li><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ç›´æ¥ç”Ÿæˆå¤šä¸ªåŸŸåçš„è¯ä¹¦</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo certbot certonly --webroot -w /var/www/example -d example<span class="selector-class">.com</span> -d www<span class="selector-class">.example</span><span class="selector-class">.com</span> -w /var/www/thing -d thing<span class="selector-class">.is</span> -d m<span class="selector-class">.thing</span><span class="selector-class">.is</span></span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆçš„è¯ä¹¦é€šå¸¸ä¿å­˜åœ¨<code>/etc/letsencrypt/live/</code>ç›®å½•ä¸‹</p></li></ol><blockquote><p>æ³¨æ„:å¦‚æœå¤±è´¥è¶…è¿‡5æ¬¡ä¼šè¢«æœåŠ¡å™¨å±è”½1å°æ—¶</p></blockquote><h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p>ä»¥ä¸Šæ“ä½œå®Œæˆååœ¨pcç«¯æµè§ˆå™¨å¯æ­£å¸¸è¯»å–è¯ä¹¦å¹¶æ˜¾ç¤ºç»¿è‰²é”,ä½†åœ¨éƒ¨åˆ†ç§»åŠ¨ç«¯æµè§ˆå™¨ä¸Šå¯èƒ½æç¤ºè¯ä¹¦æ— æ•ˆ,åŸå› å¯ä»¥å‚è€ƒ<a href="https://blog.v2ssl.com/2017/02/07/%E5%90%88%E5%B9%B6ssl%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6%E5%92%8Cca%E5%8C%85%E8%AF%81%E4%B9%A6%E9%93%BE%E6%96%87%E4%BB%B6.html" target="_blank" rel="noopener">åˆå¹¶SSLæœåŠ¡å™¨è¯ä¹¦å’ŒCAåŒ…(è¯ä¹¦é“¾æ–‡ä»¶)</a><br>ç®€å•æ¥è¯´,å¯ä»¥é€šè¿‡åˆå¹¶SSLæœåŠ¡å™¨è¯ä¹¦å’ŒCAåŒ…(è¯ä¹¦é“¾æ–‡ä»¶)<br>å³:å¤åˆ¶fullchain.pemé‡Œçš„å†…å®¹è‡³cert.pem,é‡å¯æœåŠ¡å™¨å³å¯</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="ssl" scheme="https://lestatmiao.github.io/tags/ssl/"/>
    
  </entry>
  
  <entry>
    <title>è®°å½•ä¸€æ¬¡centos6æ’æŸ¥80ç«¯å£æ— æ³•è®¿é—®çš„é—®é¢˜</title>
    <link href="https://lestatmiao.github.io/2017/12/28/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1centos6%E6%8E%92%E6%9F%A580%E7%AB%AF%E5%8F%A3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://lestatmiao.github.io/2017/12/28/è®°å½•ä¸€æ¬¡centos6æ’æŸ¥80ç«¯å£æ— æ³•è®¿é—®çš„é—®é¢˜/</id>
    <published>2017-12-28T07:49:02.000Z</published>
    <updated>2017-12-28T08:26:43.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p><strong>å¤§æ¦‚æ˜¯ä¸€ä¸ªæœˆå‰çš„äº‹æƒ…äº†,æœ€è¿‘å·¥ä½œç¹å¿™,æš‚æ—¶å¿˜äº†è®°å½•â€¦</strong>  </p><p>å½“æ—¶çš„æƒ…å†µå¤§æ¦‚æ˜¯è¿™æ ·:<br>å®¢æˆ·çš„æœºæˆ¿å¼€é€šçš„æ˜¯å¹¿ç”µç½‘çš„å›ºå®šIP,æœåŠ¡å™¨ç³»ç»Ÿæ˜¯ centos6.8,å·²çŸ¥ 80 ç«¯å£å’Œ 22 ç«¯å£å¯¹å¤–æ˜¯å¼€æ”¾å¹¶èƒ½è®¿é—®çš„;<br>æœåŠ¡å™¨ä¸Šæœ‰ä¸¤ä¸ª web é¡¹ç›®,ä¸€ä¸ªå¯¹åº” 80 ç«¯å£,ä¸€ä¸ªå¯¹åº” 8080 ç«¯å£<br>web æœåŠ¡å™¨æ˜¯ apache2.2,ç›®å‰ç›‘å¬äº† 80 å’Œ 8080 ç«¯å£,httpd-vhosts.conf ä¸‹æœ‰ä¸¤ä¸ªè™šæ‹Ÿæœºé…ç½®,åˆ†åˆ«å¯¹åº” 80 å’Œ 8080 ç«¯å£;<br>é˜²ç«å¢™çŠ¶æ€:service iptables status(iptablesï¼šæœªè¿è¡Œé˜²ç«å¢™ã€‚)<br>SELinux çŠ¶æ€:getenforce (Disabled)<br>é¡¹ç›®ç›®å½•çš„è®¿é—®æƒé™æ˜¯è¶³å¤Ÿçš„<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">lsof -i :8080</span><br><span class="line"></span><br><span class="line">httpd 22357 root 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 22431 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 22433 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 22478 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 22668 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN) httpd 22690 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 23028 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 23030 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 23760 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 23761 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 23762 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line">httpd 23855 www 6u<span class="built_in"> IPv6 </span>27111118 0t0 TCP *:webcache (LISTEN)</span><br><span class="line"></span><br><span class="line">netstat -nlpt</span><br><span class="line">Active Internet connections (only servers) Proto Recv-Q Send-Q Local<span class="built_in"> Address </span>Foreign<span class="built_in"> Address </span>State PID/Program name</span><br><span class="line">tcp 0 0 0.0.0.0:58726 0.0.0.0:* LISTEN 2630/rpc.statd</span><br><span class="line">tcp 0 0 0.0.0.0:3306 0.0.0.0:* LISTEN 6324/mysqld</span><br><span class="line">tcp 0 0 0.0.0.0:111 0.0.0.0:* LISTEN 2574/rpcbind</span><br><span class="line">tcp 0 0 0.0.0.0:21 0.0.0.0:* LISTEN 3235/pure-ftpd (SER tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 3941/sshd</span><br><span class="line">tcp 0 0 127.0.0.1:631 0.0.0.0:* LISTEN 2668/cupsd</span><br><span class="line">tcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN 3109/sendmail</span><br><span class="line">tcp 0 0 :::34760 :::* LISTEN 2630/rpc.statd</span><br><span class="line">tcp 0 0 :::111 :::* LISTEN 2574/rpcbind</span><br><span class="line">tcp 0 0 :::8080 :::* LISTEN 22357/httpd</span><br><span class="line">tcp 0 0 :::80 :::* LISTEN 22357/httpd</span><br><span class="line">tcp 0 0 :::21 :::* LISTEN 3235/pure-ftpd (SER tcp 0 0 :::22 :::* LISTEN 3941/sshd</span><br><span class="line">tcp 0 0 ::1:631 :::* LISTEN 2668/cupsd</span><br><span class="line">tcp 0 0 :::443 :::* LISTEN 22357/httpd</span><br></pre></td></tr></table></figure></p><p>é—®é¢˜: æœåŠ¡å™¨çš„ 8080 ç«¯å£åœ¨æœ¬åœ°å¯ä»¥é€šè¿‡ curl å‘½ä»¤(curl <a href="http://localhost:8080)è·å–åˆ°" target="_blank" rel="noopener">http://localhost:8080)è·å–åˆ°</a> index.php çš„å†…å®¹,ä½†æ˜¯å¤–ç½‘æ— æ³•é€šè¿‡ ip:port çš„å½¢å¼è®¿é—®åˆ°</p><p>æœ€åé”å®šé—®é¢˜:8080ç«¯å£è¢«æœºæˆ¿é™åˆ¶äº†â€¦</p><blockquote><p>NOTE:è¿™ç§æƒ…å†µé€šå¸¸æ’æŸ¥æœºæˆ¿æˆ–è¿è¥å•†æ˜¯å¦å¯¹æ— æ³•è®¿é—®çš„ç«¯å£è¿›è¡Œäº†é™åˆ¶<br>é™„ä¸Šæœ¬äººå½“æ—¶åœ¨v2exä¸Šå‘çš„<a href="https://www.v2ex.com/t/410815" target="_blank" rel="noopener">ä¸»é¢˜</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="centos6" scheme="https://lestatmiao.github.io/tags/centos6/"/>
    
      <category term="ç«¯å£" scheme="https://lestatmiao.github.io/tags/%E7%AB%AF%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>SoapClientçš„ä¸€ç‚¹æ€»ç»“</title>
    <link href="https://lestatmiao.github.io/2017/12/18/SoapClient%E7%9A%84%E4%B8%80%E7%82%B9%E6%80%BB%E7%BB%93/"/>
    <id>https://lestatmiao.github.io/2017/12/18/SoapClientçš„ä¸€ç‚¹æ€»ç»“/</id>
    <published>2017-12-18T02:10:54.000Z</published>
    <updated>2017-12-18T03:11:19.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p><strong>è¿‘æœŸåœ¨å¼€å‘ä¸€ä¸ªå°å‹çš„é…’åº—è®¢æˆ¿ç³»ç»Ÿ</strong>  </p><hr><p><strong>åº”ç”¨åœºæ™¯:</strong>ç”±äºæ˜¯åœ¨å…¬å¸ä¹‹å‰ä¸€ä¸ªè®¢æˆ¿ç³»ç»ŸåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹,å› æ­¤å·¥ä½œé‡ä¸ç®—å¤§,ä½†éœ€è¦åœ¨ç³»ç»Ÿä¸­å¤šä¸ªä½ç½®å’Œé…’åº—æ–¹æä¾›çš„å¦ä¸€ä¸ªPMSç³»ç»Ÿçš„ä¿¡æ¯è¿›è¡Œå¯¹æ¥(éƒ¨åˆ†æ•°æ®éœ€è¦åŒæ­¥[åº“å­˜,æˆ¿é—´ç¼–å·,è®¢å•ä¿¡æ¯ç­‰ç­‰]),æ¥å£ä½¿ç”¨<code>xml</code>æ ¼å¼è¿›è¡Œæ•°æ®ä¼ é€’,åç«¯å¼€å‘è¯­è¨€æ˜¯php  </p><hr><p><strong>é—®é¢˜:</strong>å¼€å‘ä¸­é‡åˆ°çš„ä¸€ä¸ªå‘å°±æ˜¯ä½¿ç”¨SoapClientåœ¨è°ƒç”¨PMSç³»ç»Ÿæ¥å£çš„æ—¶å€™ä¼šå‡ºç°é—´æ­‡æ€§404(Solution: Soap WSDL Error - â€œfailed to load external entityâ€)  </p><hr><p><strong>è§£å†³æ–¹æ³•:</strong>å‘PMSæ¥å£æä¾›æ–¹ååº”è¿™ä¸ªæƒ…å†µä¹‹åé‚£è¾¹è¯´æ¥å£æ­£å¸¸,åæ¥ç½‘ä¸ŠæŸ¥é˜…æ‰å‘ç°éœ€è¦ä½¿ç”¨<a href="http://php.net/manual/zh/function.libxml-disable-entity-loader.php" target="_blank" rel="noopener">libxml_disable_entity_loader(false)</a>è¿™ä¸ªå‡½æ•°æ¥æ‰“å¼€<code>entity_loader</code>,éšå³é—®é¢˜è§£å†³.è¯¥å‡½æ•°é€šå¸¸æ·»åŠ åœ¨éœ€è¦ä½¿ç”¨<code>SoapClient</code>å®ä¾‹çš„è„šæœ¬ä¸Šæ–¹</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="Soap" scheme="https://lestatmiao.github.io/tags/Soap/"/>
    
      <category term="æ¥å£" scheme="https://lestatmiao.github.io/tags/%E6%8E%A5%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>phpexcelè¸©å‘è®°</title>
    <link href="https://lestatmiao.github.io/2017/12/01/phpexcel%E8%B8%A9%E5%9D%91%E8%AE%B0/"/>
    <id>https://lestatmiao.github.io/2017/12/01/phpexcelè¸©å‘è®°/</id>
    <published>2017-12-01T04:48:17.000Z</published>
    <updated>2017-12-01T05:08:25.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>æœ€è¿‘åœ¨ä½¿ç”¨phpexcelæ‰©å±•å¤„ç†è¡¨æ ¼å¯¼å…¥çš„æ—¶å€™,é‡åˆ°ä¸¤ä¸ªå‘,ç°åšä»¥ä¸‹è®°å½•</p><ul><li><p>å‘ä¸€:excelè¡¨ä¸­çš„å¯Œæ–‡æœ¬å¯¼å…¥åæ•°æ®å§‹ç»ˆä¸å¯¹</p><blockquote><p>è§£å†³æ–¹æ³•:å‡è®¾$tempä¸ºå¾ªç¯è¯»å–çš„æ¯åˆ—æ•°æ®å€¼,åˆ¤æ–­æ˜¯å¦æ˜¯<code>PHPExcel_RichText</code>ç±»çš„å®ä¾‹,å¦‚æœæ˜¯,åˆ™è°ƒç”¨$tempè‡ªèº«çš„æ–¹æ³•__toString()è½¬æ¢,ä»£ç å¦‚ä¸‹:  </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ($temp <span class="keyword">instanceof</span> PHPExcel_RichText) $temp = $temp-&gt;__toString();</span><br></pre></td></tr></table></figure></blockquote></li><li><p>å‘äºŒ:excelè¡¨ä¸­çš„æ—¥æœŸå¯¼å…¥åå˜æˆäº†<code>float</code>ç±»å‹çš„å€¼  </p><blockquote><p>è§£å†³æ–¹æ³•:å‡è®¾$tempä¸ºå¾ªç¯è¯»å–çš„æ¯åˆ—æ•°æ®å€¼,å‡è®¾æ—¥æœŸæ‰€åœ¨åˆ—ä¸º<code>D</code><br>ä»£ç å¦‚ä¸‹(è¿™é‡Œçš„ifä»…ä»…æ˜¯ç”¨æ¥åˆ¤æ–­æ—¥æœŸæ˜¯å¦ä¸ºç©º,å¦‚æœä¸åˆ¤æ–­,ä¸ºç©ºæ—¶ä¼šè‡ªåŠ¨ç”¨å½“å‰æ—¶é—´å¡«å……,æ ¹æ®å®é™…ä¸šåŠ¡å†³å®š):  </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>($k==<span class="string">'D'</span>)&#123;<span class="comment">//æŒ‡å®šDåˆ—ä¸ºæ—¶é—´æ‰€åœ¨åˆ—</span></span><br><span class="line">    $date = $objPHPExcel-&gt;getActiveSheet()-&gt;getCell(<span class="string">"$k$j"</span>)-&gt;getValue();</span><br><span class="line">    <span class="keyword">if</span>($date)&#123;</span><br><span class="line">        $temp = date(<span class="string">"Y-m-d"</span>, PHPExcel_Shared_Date::ExcelToPHP($date));</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        $temp = <span class="string">''</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    $temp = $objPHPExcel-&gt;getActiveSheet()-&gt;getCell(<span class="string">"$k$j"</span>)-&gt;getValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li></ul><p>ç›®å‰æš‚æœªå‘ç°å…¶ä»–å‘</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="php" scheme="https://lestatmiao.github.io/tags/php/"/>
    
      <category term="excel" scheme="https://lestatmiao.github.io/tags/excel/"/>
    
      <category term="æ‰©å±•" scheme="https://lestatmiao.github.io/tags/%E6%89%A9%E5%B1%95/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªæŠ•ç¥¨é¡¹ç›®çš„æ€»ç»“</title>
    <link href="https://lestatmiao.github.io/2017/11/20/%E4%B8%80%E4%B8%AA%E6%8A%95%E7%A5%A8%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%80%BB%E7%BB%93/"/>
    <id>https://lestatmiao.github.io/2017/11/20/ä¸€ä¸ªæŠ•ç¥¨é¡¹ç›®çš„æ€»ç»“/</id>
    <published>2017-11-20T05:57:24.000Z</published>
    <updated>2017-11-20T06:28:46.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>æœ€è¿‘å¼€å‘äº†ä¸€ä¸ªåªæœ‰3ä¸ªé¡µé¢çš„å¾®ä¿¡æŠ•ç¥¨å°é¡¹ç›®<br>åŸºæœ¬æµç¨‹:ä¸€ä¸ªå¾®ä¿¡å·ä¸€å¤©åªèƒ½å¯¹ä¸€ä¸ªå‚ä¸è€…æŠ•ä¸€æ¬¡ç¥¨ä¸”ä¸€å¤©æ€»å…±å¯ä»¥å¯¹ä¸åŒå‚ä¸è€…æŠ•10æ¬¡ç¥¨<br>é¦–é¡µå†…å®¹:å±•ç¤ºæ‰€æœ‰æŠ•ç¥¨å‚ä¸è€…ä»¥åŠå…¶å¾—ç¥¨æ•°,æŒ‰ç…§ç¼–å·æ’åº(æ”¯æŒç‚¹å‡»æŠ•ç¥¨)<br>æ’è¡Œé¡µå†…å®¹:å±•ç¤ºæ‰€æœ‰æŠ•ç¥¨å‚ä¸è€…ä»¥åŠå…¶å¾—ç¥¨æ•°,æŒ‰ç…§å¾—ç¥¨æ•°æ’åº<br>è¯¦æƒ…é¡µå†…å®¹:å±•ç¤ºæŒ‡å®šå‚ä¸è€…ä»¥åŠå…¶å¾—ç¥¨æ•°(æ”¯æŒç‚¹å‡»æŠ•ç¥¨)<br>åå°ç•¥è¿‡â€¦<br>é¡¹ç›®ä¸Šçº¿åæœåŠ¡å™¨cpué•¿æ—¶é—´è´Ÿè½½100%,ä»”ç»†æŸ¥çœ‹åå‘ç°å‡ ä¸ªä¸»è¦é—®é¢˜:  </p><ol><li>é¦–é¡µå’Œè¯¦æƒ…é¡µjsä¸­æ²¡æœ‰å¯¹è§¦å‘å¼‚æ­¥è¯·æ±‚çš„<code>è¯·æ±‚ä¸­</code>çŠ¶æ€(å·²å‘å‡ºè¯·æ±‚ä¸”æœªæ”¶åˆ°å“åº”[<code>æœç´¢</code>,<code>ä¸‹ä¸€é¡µåŠ è½½</code>,<code>æŠ•ç¥¨æ“ä½œ</code>])æ²¡æœ‰ç¦ç”¨å¤„ç†å’Œæç¤º,å¯èƒ½å¯¼è‡´ç”¨æˆ·è¿ç»­ç‚¹å‡»æ“ä½œ,æŒ‚èµ·å¤šä¸ªè¯·æ±‚<br><strong>è§£å†³æ–¹æ³•:æ·»åŠ å¯¹åº”è¯·æ±‚ä¸­çš„çŠ¶æ€,åœ¨å‘å‡ºè¯·æ±‚å,æ”¶åˆ°å“åº”å‰éƒ½æ— æ³•å†æ¬¡å‘å‡ºç›¸åŒè¯·æ±‚</strong>  </li><li>ä¹‹å‰æœ‰å¯¹ä¸‰ä¸ªé¡µé¢çš„è®¿é—®é‡è¿›è¡Œç»Ÿè®¡,ä½†ç”¨çš„æ˜¯ç®€å•ç²—æš´æ¯æ¬¡è®¿é—®éƒ½ç›´æ¥æ›´æ–°æ•°æ®åº“çš„å“åº”å­—æ®µå€¼,å¯¼è‡´å¹¶å‘å¢åŠ æ—¶æ•°æ®åº“å†™å…¥æ¬¡æ•°è¿‡å¤š<br><strong>è§£å†³æ–¹æ³•:é…ç½®ä¸€ä¸ªå€¼,æ¯æ¬¡è¯·æ±‚æ—¶å…ˆå°†æ€»è®¿é—®é‡+1,å†åˆ¤æ–­å¦‚æœç­‰äºé…ç½®å€¼,åˆ™æ›´æ–°æ•°æ®åº“çš„æ€»è®¿é—®é‡å¹¶æ¸…ç©ºç¼“å­˜,åä¹‹å†™å…¥ç¼“å­˜</strong>  </li><li>å¿˜äº†å…³é—­TPæ¡†æ¶çš„è°ƒè¯•æ¨¡å¼(è°ƒè¯•æ¨¡å¼ä¼šä½¿æ¨¡æ¿ç¼“å­˜å’Œå­—æ®µç¼“å­˜å¤±æ•ˆ)<br><strong>è§£å†³æ–¹æ³•:å…³é—­è°ƒè¯•æ¨¡å¼</strong>  </li><li>mysqlæ•°æ®è¡¨çš„è”åˆç´¢å¼•æ²¡æœ‰ç”Ÿæ•ˆ(åŸå› å¾…å®š)  </li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="å¹¶å‘" scheme="https://lestatmiao.github.io/tags/%E5%B9%B6%E5%8F%91/"/>
    
      <category term="ç¼“å­˜" scheme="https://lestatmiao.github.io/tags/%E7%BC%93%E5%AD%98/"/>
    
      <category term="ä¼˜åŒ–" scheme="https://lestatmiao.github.io/tags/%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>abæµ‹è¯•ä¸­å¹¶å‘é‡å¯¼è‡´çš„æ‹’ç»é—®é¢˜</title>
    <link href="https://lestatmiao.github.io/2017/11/15/ab%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%B9%B6%E5%8F%91%E9%87%8F%E5%AF%BC%E8%87%B4%E7%9A%84%E6%8B%92%E7%BB%9D%E9%97%AE%E9%A2%98/"/>
    <id>https://lestatmiao.github.io/2017/11/15/abæµ‹è¯•ä¸­å¹¶å‘é‡å¯¼è‡´çš„æ‹’ç»é—®é¢˜/</id>
    <published>2017-11-15T06:24:33.000Z</published>
    <updated>2017-11-15T07:50:28.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>ä»Šå¤©å¯¹ä¸€ä¸ªå¾®ä¿¡æŠ•ç¥¨çš„å°é¡¹ç›®è¿›è¡Œabæµ‹è¯•<br>ç¯å¢ƒ:windows 10+cmd(ç®¡ç†å‘˜èº«ä»½)<br>é—®é¢˜:åœ¨è¾“å…¥äº†<code>ab -n 5000 -c 500 http://hostname/</code>å¹¶<code>enter</code>ä¹‹åç­‰å¾…ç‰‡åˆ»å‡ºç°äº†<code>apr_socket_connect():ç”±äºç›®æ ‡è®¡ç®—æœºç§¯ææ‹’ç»ï¼Œæ— æ³•è¿æ¥ã€‚(730061)</code><br>åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†å…¶ä»–äººçš„æ–¹æ³•,å‚è€ƒå,é—®é¢˜è§£å†³<br>è§£å†³æ–¹æ³•:æ‰¾åˆ°http.conf,æ‰“å¼€,æ‰¾åˆ°å…³äº<code>httpd-mpm.conf</code>çš„å¼•ç”¨é…ç½®,å¦‚æœæ²¡æœ‰å¼•ç”¨,åˆ™å»æ‰<code>#</code>,åä¹‹åˆ™æ— è§†,æ‰“å¼€<code>httpd-mpm.conf</code>æ–‡ä»¶,å°†å…¶ä¸­çš„<code>ThreadsPerChild</code>å‚æ•°å€¼è°ƒå¤§,é‡å¯<code>Apache</code>å³å¯</p><blockquote><p>è¡¥å……:åœ¨åç»­çš„æµ‹è¯•ä¸­é‡åˆ°äº†<code>apr_poll: The timeout specified has expired (70007)</code>çš„æç¤º<br>è§£å†³æ–¹æ³•:ä½¿ç”¨<code>-k</code>å‚æ•°(Connection: Keep-Alive)</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="å‹åŠ›æµ‹è¯•" scheme="https://lestatmiao.github.io/tags/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>headæ ‡ç­¾ä¸­è‡ªåŠ¨è®¾ç½®ieå†…æ ¸ç‰ˆæœ¬çš„å†™æ³•</title>
    <link href="https://lestatmiao.github.io/2017/11/11/head%E6%A0%87%E7%AD%BE%E4%B8%AD%E8%87%AA%E5%8A%A8%E8%AE%BE%E7%BD%AEie%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%E7%9A%84%E5%86%99%E6%B3%95/"/>
    <id>https://lestatmiao.github.io/2017/11/11/headæ ‡ç­¾ä¸­è‡ªåŠ¨è®¾ç½®ieå†…æ ¸ç‰ˆæœ¬çš„å†™æ³•/</id>
    <published>2017-11-10T16:25:35.000Z</published>
    <updated>2017-11-10T16:29:58.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>æœ€è¿‘åœ¨å¼€å‘ä¸­é‡åˆ°åå°ç®¡ç†ç³»ç»Ÿéƒ¨åˆ†æ ·å¼,jså¯¹IEæµè§ˆå™¨ä¸å…¼å®¹çš„æƒ…å†µ,æœ€åé€šè¿‡åœ¨headæ ‡ç­¾ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç å®ç°è‡ªåŠ¨è®¾ç½®IEå†…æ ¸ç‰ˆæœ¬è§£å†³:  </p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,Chrome=1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"renderer"</span> <span class="attr">content</span>=<span class="string">"webkit"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=9"</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
      <category term="mysql" scheme="https://lestatmiao.github.io/categories/mysql/"/>
    
    
      <category term="IE" scheme="https://lestatmiao.github.io/tags/IE/"/>
    
      <category term="å…¼å®¹" scheme="https://lestatmiao.github.io/tags/%E5%85%BC%E5%AE%B9/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨apache2åå‘ä»£ç†è®¿é—®google</title>
    <link href="https://lestatmiao.github.io/2017/10/14/%E4%BD%BF%E7%94%A8apache2%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AEgoogle/"/>
    <id>https://lestatmiao.github.io/2017/10/14/ä½¿ç”¨apache2åå‘ä»£ç†è®¿é—®google/</id>
    <published>2017-10-14T13:56:43.000Z</published>
    <updated>2017-10-15T05:04:39.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.9.1/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p><strong>å¼•è¨€</strong><br>åˆšåˆšåœ¨<a href="https://www.v2ex.com/t/397631#reply17" target="_blank" rel="noopener">v2ex</a>ä¸Šçœ‹åˆ°ä¸€ç¯‡ç”¨nginxåšåå‘ä»£ç†è®¿é—®googleçš„å¸–å­,å‡ºäºå¥½å¥‡,è¯•äº†è¯•ç”¨apacheè¿›è¡Œåå‘ä»£ç†è®¿é—®google,æœç„¶å¾ˆå¥½ç©!</p></blockquote><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ:"></a>å‡†å¤‡å·¥ä½œ:</h2><ul><li>apacheæœåŠ¡å™¨éœ€è¦å®‰è£…proxyç›¸å…³æ¨¡å—,å¦‚æœæ˜¯ubuntuç¯å¢ƒå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤<code>sudo a2enmod æ¨¡å—åç§°</code>è¿›è¡Œå®‰è£…,æ¨¡å—å¯ä»¥åœ¨<code>/etc/apache2/mods-available/</code>ç›®å½•ä¸‹æŸ¥çœ‹,å®‰è£…å¥½çš„æ¨¡å—å¯ä»¥åœ¨<code>/etc/apache2/mods-enabled/</code><br>é‡ŒæŸ¥çœ‹<br>è¿™é‡Œç›´æ¥ä¸Šæœ¬äººçš„é…ç½®:<pre><code>&lt;VirtualHost *:443&gt;  ServerName facebook.smarthippo.club  SSLEngine on  SSLCertificateFile &quot;/etc/letsencrypt/archive/facebook.smarthippo.club/cert1.pem&quot;  SSLCertificateKeyFile &quot;/etc/letsencrypt/archive/facebook.smarthippo.club/privkey1.pem&quot;  SetEnvIf User-Agent â€œ.*MSIE.*â€ \  nokeepalive ssl-unclean-shutdown \  downgrade-1.0 force-response-1.0  SSLProxyEngine On  ProxyPass / https://www.facebook.com/  ProxyPassReverse / https://www.facebook.com/&lt;/VirtualHost&gt;&lt;VirtualHost *:443&gt;  ServerName google.smarthippo.club  SSLEngine on  SSLCertificateFile &quot;/etc/letsencrypt/archive/google.smarthippo.club/cert1.pem&quot;  SSLCertificateKeyFile &quot;/etc/letsencrypt/archive/google.smarthippo.club/privkey1.pem&quot;  SetEnvIf User-Agent â€œ.*MSIE.*â€ \  nokeepalive ssl-unclean-shutdown \  downgrade-1.0 force-response-1.0  SSLProxyEngine On  ProxyPass / https://www.google.com.hk/  ProxyPassReverse / https://www.google.com.hk/&lt;/VirtualHost&gt;</code></pre>So,<a href="https://google.smarthippo.club" target="_blank" rel="noopener">Google</a>,<a href="https://wiki.smarthippo.club" target="_blank" rel="noopener">Wiki</a>,å°±æ˜¯è¿™ä¹ˆç®€å•~</li></ul><blockquote><p>å¤‡æ³¨:<br>è¿™ç¯‡æ–‡ç« çš„å‰æå½“ç„¶æ˜¯æœ‰ä¸€ä¸ªå›½å¤–çš„æœåŠ¡å™¨,å®‰åˆ©ä¸€æ³¢<a href="https://www.vultr.com/" target="_blank" rel="noopener">vultr(ä»·æ ¼åˆç†,ä¸”ç¨³å®š,æŒ‰å¤©è®¡è´¹)</a><br>å¯ä»¥é€šè¿‡æ·»åŠ å­åŸŸåçš„æ–¹å¼å®ç°å¯¹ä¸åŒå¢™å¤–ç«™ç‚¹çš„è®¿é—®,è¯¦è§ç¬¬äºŒä¸ªé…ç½®<br>å®‰è£…sslè¯ä¹¦<a href="https://www.zhukun.net/archives/8104" target="_blank" rel="noopener">ç½‘ä¸Š</a>å¤ªå¤š,å°±ä¸å†™äº†  </p></blockquote><h2 id="ç›®å‰å­˜åœ¨çš„é—®é¢˜"><a href="#ç›®å‰å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="ç›®å‰å­˜åœ¨çš„é—®é¢˜:"></a>ç›®å‰å­˜åœ¨çš„é—®é¢˜:</h2><ol><li>åœ¨åå‘ä»£ç†ç«™ç‚¹ä¸­å¦‚æœæœ‰è·³è½¬åˆ°å…¶ä»–è¢«å¢™ç«™ç‚¹çš„é“¾æ¥,ä¾ç„¶æ— æ³•è®¿é—®</li><li>éƒ¨åˆ†ç½‘ç«™å¯¹æœºå™¨è®¿é—®çš„è¯·æ±‚æœ‰é™åˆ¶,æ¯”å¦‚google,è™½ç„¶é¦–é¡µå¯ä»¥æ­£å¸¸è®¿é—®,ä½†å…¶ä»–é¡µé¢å¯èƒ½ä¼šè®¿é—®ä¸äº†,è·³è½¬åˆ°<code>ipv4.google.com</code>è¿›è¡ŒäººæœºéªŒè¯  </li></ol><p>æ­£åœ¨å°è¯•ç”¨apacheçš„è´Ÿè½½å‡è¡¡è§£å†³ç¬¬äºŒä¸ªé—®é¢˜â€¦</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.bootcss.com/aplayer/1.10.0/APlayer.min.css&quot;&gt;&lt;script src=&quot;htt
      
    
    </summary>
    
    
      <category term="ç¿»å¢™" scheme="https://lestatmiao.github.io/tags/%E7%BF%BB%E5%A2%99/"/>
    
      <category term="åå‘ä»£ç†" scheme="https://lestatmiao.github.io/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"/>
    
  </entry>
  
</feed>
