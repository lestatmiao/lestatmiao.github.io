<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[åŒä¸€é¡µé¢å·§å¦™ä½¿ç”¨å¤šä¸ªelement-uiçš„uploadç»„ä»¶]]></title>
    <url>%2F2018%2F06%2F30%2F%E5%90%8C%E4%B8%80%E9%A1%B5%E9%9D%A2%E5%B7%A7%E5%A6%99%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AAelement-ui%E7%9A%84upload%E7%BB%84%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[é—®é¢˜æœ€è¿‘åœ¨ä½¿ç”¨SSR(æœåŠ¡å™¨ç«¯æ¸²æŸ“)æ–¹å¼å¼•å…¥vue+element-uiå¼€å‘ä¸€ä¸ªå•†åŸŽé¡¹ç›®çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜:å› ä¸ºå•†åŸŽçš„è®¢å•æ˜¯å¯èƒ½åŒ…å«å¤šä¸ªå•†å“,æ‰€ä»¥è®¢å•çš„è¯„ä»·æ¶‰åŠåˆ°åŒä¸€ä¸ªé¡µé¢å¤šç»„è¡¨å•çš„å¼‚æ­¥æäº¤(æ¯ä¸€ç»„è¡¨å•åŒ…å«è¯„ä»·å†…å®¹å’Œä¸Šä¼ çš„å¤šå¼ å›¾ç‰‡)ç”±äºŽelement-uiçš„uploadç»„ä»¶é»˜è®¤æ²¡æœ‰æä¾›å¤šä¸ªç»„ä»¶åœ¨åŒä¸€é¡µé¢ç»‘å®šä¸åŒæ¨¡åž‹çš„æŽ¥å£,å› æ­¤åœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹,æœåˆ°äº†è¿™ç¯‡æ–‡ç« ,æ–‡ç« ä¸­æœ€åŽçš„å»ºè®®æ˜¯è‡ªå·±å°è£…ä¸€ä¸ªç»„ä»¶æ¥è°ƒç”¨uploadç»„ä»¶,ä½¿ç”¨çš„æ—¶å€™ç›´æŽ¥è°ƒç”¨è‡ªå·±å°è£…çš„è¿™ä¸ªç»„ä»¶,ä½†æ˜¯é¡¹ç›®æ—¶é—´ç´§è¿«,æˆ‘è¿™è¾¹å¸Œæœ›æ›´å¿«çš„æžå®šè¿™ä¸ªé—®é¢˜,äºŽæ˜¯æƒ³åˆ°äº†ä»¥ä¸‹åŠžæ³• è§£å†³æ–¹æ³•åœ¨uploadç»„ä»¶çš„æŽ¥å£ä¸­,æœ‰ä¸€ä¸ªdataæŽ¥å£,å¯ä»¥ç»‘å®šéœ€è¦ä¸Šä¼ çš„é™¤æ–‡ä»¶ä¹‹å¤–çš„å…¶ä»–æ•°æ®å¯¹è±¡,ç”±äºŽè®¢å•è¯„ä»·é¡µçš„ä¸€ä¸ªç‰¹ç‚¹:æ¯ä¸ªå•†å“ä¸è®ºæ•°é‡å¤§å°éƒ½åªä¼šè¢«è¯„ä»·ä¸€æ¬¡,å› æ­¤æ­¤å¤„ç›´æŽ¥å°†å½“å‰æ•°ç»„ä¸­å•†å“çš„uuidç»‘å®šåˆ°dataå¹¶ä¼ é€’è‡³ä¸Šä¼ æŽ¥å£,æ­¤æ“ä½œåŽè¡¨å•æäº¤çš„payloadå°±ä¼šåŒ…å«ç±»ä¼¼å¦‚ä¸‹æ•°æ®:123Content-Disposition: form-data; name="uuid"E7D947BA-79F1-11E8-B786-00163E063020 è€ŒåŽå°æ–‡ä»¶ä¸Šä¼ ä½ç½®å¯ä»¥åšä¸€ä¸ªåˆ¤æ–­:å¦‚æžœæŽ¥æ”¶çš„ä¸Šä¼ è¯·æ±‚åŒ…å«é¢å¤–å‚æ•°,åˆ™å…¨éƒ¨åŽŸè·¯è¿”å›ž,å› æ­¤åœ¨ä¸Šä¼ æˆåŠŸåŽåˆä¼šåœ¨on-successè¿™ä¸ªé’©å­æŽ¥æ”¶åˆ°è¿™ä¸ªå”¯ä¸€çš„uuid,æ­¤å¤„å¯¹å½“å‰é¡µé¢å•†å“æ•°ç»„è¿›è¡ŒéåŽ†å¹¶è¿›è¡Œæ¯”å¯¹,åœ¨åŒ…å«è¿”å›žçš„uuidå¯¹åº”æ•°ç»„çš„å¯¹åº”ä¿å­˜ç»„å›¾è·¯å¾„çš„æ•°ç»„pushå½“å‰ä¸Šä¼ æˆåŠŸçš„å›¾ç‰‡è·¯å¾„ 12345this.data.goods_list.forEach((e,k)=&gt;&#123; if(e.uuid === response.uuid)&#123; e.evaluate.thumbs.push(response.url) &#125;&#125;) ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç (html):12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;div class="userEva-cont" v-for="(item,key) in data.goods_list"&gt; &lt;table class="userEva-table"&gt; &lt;thead&gt; &lt;tr&gt; &lt;th width="420"&gt;å•†å“&lt;/th&gt; &lt;th width="280"&gt;åž‹å·&lt;/th&gt; &lt;th width="280"&gt;æ•°é‡&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt; &lt;div class="evaluate-pic"&gt;&lt;a :href="'/product/'+item.goods_id+'.html'"&gt;&lt;img :src="'__PHOTO__'+item.thumb"&gt;&lt;/a&gt;&lt;/div&gt; &lt;div class="evaluate-text"&gt; &lt;h3&gt;&lt;a&gt;&#123;&#123;item.goods_name&#125;&#125;&lt;/a&gt;&lt;/h3&gt; &lt;p&gt;ç¼–å·ï¼š&#123;&#123;item.uuid&#125;&#125;&lt;/p&gt; &lt;/div&gt; &lt;/td&gt; &lt;td&gt;åž‹å·ï¼š&#123;&#123;item.goods_specification_name&#125;&#125;&lt;/td&gt; &lt;td&gt;&#123;&#123;item.num&#125;&#125;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class="evaluate-wrap"&gt; &lt;form&gt; &lt;dl&gt; &lt;dt&gt;è¯„è®ºï¼š&lt;/dt&gt; &lt;dd&gt; &lt;textarea v-model="item.evaluate.content" placeholder="è¯„è®ºå†…å®¹"&gt;&lt;/textarea&gt; &lt;/dd&gt; &lt;/dl&gt; &lt;dl&gt; &lt;dt&gt;æ™’å•ï¼š&lt;/dt&gt; &lt;dd&gt; &lt;el-upload class="upload-demo" :action="basePath" :on-preview="handlePreview" :on-remove="handleRemove" drag multiple :data="item" :limit="5" :on-success="setFileList" list-type="picture"&gt; &lt;i class="el-icon-upload"&gt;&lt;/i&gt; &lt;div class="el-upload__text"&gt;å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–&lt;em&gt;ç‚¹å‡»ä¸Šä¼ &lt;/em&gt;&lt;/div&gt; &lt;div class="el-upload__tip" slot="tip"&gt;åªèƒ½ä¸Šä¼ jpg/pngæ–‡ä»¶ï¼Œä¸”ä¸è¶…è¿‡500kb&lt;/div&gt; &lt;/el-upload&gt; &lt;/dd&gt; &lt;/dl&gt; &lt;div class="evaluate-btns"&gt; &lt;button type="button" class="evaluate-sub" @click="submit(item.evaluate,item)"&gt;æäº¤è¯„ä»·&lt;/button&gt; &lt;label&gt;&lt;input type="checkbox" class="evaluate-show" v-model="item.evaluate.is_anonymous"&gt;åŒ¿åè¯„ä»·&lt;/label&gt; &lt;/div&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt; js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869/* * todo:åˆå§‹åŒ–vue * */var app = new Vue(&#123; el: '#container', data: &#123; data: __PAGE_DATA__, evaluateUrl: '/evaluate.html', imgDialogVisible: false, tempPath: '', basePath: '' &#125;, mounted() &#123; this.basePath = Vue.prototype.fileUploadBasePath &#125;, methods: &#123; handleRemove(file, fileList) &#123; this.data.goods_list.forEach((e,k)=&gt;&#123; if(e.uuid === file.response.uuid)&#123; //æ‰¾åˆ°å½“å‰urlä¸‹æ ‡ const index = e.evaluate.thumbs.indexOf(file.response.url) if(index !== -1)&#123; //åˆ é™¤ e.evaluate.thumbs.splice(index,1) &#125; &#125; &#125;) &#125;, handlePreview(file) &#123; this.tempPath = file.response.url this.imgDialogVisible = true &#125;, setFileList(response, file, fileList)&#123; this.data.goods_list.forEach((e,k)=&gt;&#123; if(e.uuid === response.uuid)&#123; e.evaluate.thumbs.push(response.url) &#125; &#125;) &#125;, submit(evaluate,item)&#123; evaluate.id = item.goods_id evaluate.goods_name = item.goods_name evaluate.goods_specification_name = item.goods_specification_name evaluate.order_id = this.data.goods.o_id evaluate = Object.assign(&#123;&#125;, evaluate) this.$http.post(this.evaluateUrl,&#123;no:this.data.goods.o_orderno,evaluate:evaluate&#125;).then(response =&gt; &#123; if(response.data.status === 200)&#123; //é‡æ–°æ‹‰å–æ•°æ® this.$http.get(location.href).then(function(response)&#123; if(response.data.status === 200)&#123; this.$message(&#123; message:'è¯„ä»·æˆåŠŸ!', type:'success' &#125;) //é‡æ–°æ‹‰å–æ•°æ® this.data = response.data.data &#125; &#125;).catch(e =&gt; &#123;&#125;) &#125;else&#123; this.$message(&#123; message:response.data.message, type:'error' &#125;) &#125; &#125;).catch(e =&gt; &#123;&#125;) &#125; &#125;&#125;) è‡³æ­¤,ç»è¿‡æµ‹è¯•,è§£å†³äº†åŒä¸€é¡µé¢å¤šä¸ªuploadç»„ä»¶ä¸Šä¼ é¢„è§ˆå¹¶åˆ†åˆ«å¼‚æ­¥æäº¤å¯¹åº”è¡¨å•åˆ°åŽå°çš„é—®é¢˜]]></content>
      <categories>
        <category>é—®é¢˜è®°å½•</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>element-ui</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vpsä½¿ç”¨googleçš„bbrè„šæœ¬åŠ é€Ÿ]]></title>
    <url>%2F2018%2F06%2F06%2Fvps%E4%BD%BF%E7%94%A8google%E7%9A%84bbr%E8%84%9A%E6%9C%AC%E5%8A%A0%E9%80%9F%2F</url>
    <content type="text"><![CDATA[é—®é¢˜ä»ŽåŽ»å¹´å¼€å§‹ç”¨vultrçš„vps,å…ˆæ˜¯æ­å»ºäº†ssserver,ç„¶åŽå„ç§webæœåŠ¡,ä»¥ä¸€ä¸ªnginxä¸ºä»£ç†æœåŠ¡å™¨,ä»£ç†æœ¬åœ°ä¸åŒç«¯å£çš„å„ç§æœåŠ¡,æ€»ä½“æ¥è¯´,vultrå®¶çš„vpsä½“éªŒå¾ˆå¥½,é™¤äº†ä¸€ç‚¹:é€Ÿåº¦è¾ƒæ…¢,å°¤å…¶æ˜¯æ™šä¸Š8-11ç‚¹(æˆ‘ä¹°çš„æ˜¯ä¸œäº¬èŠ‚ç‚¹),ä¹‹å‰åœ¨googleä¸Šçœ‹äº†å¾ˆä¹…å…³äºŽvpsåŠ é€Ÿçš„æ–¹æ¡ˆ,åŸºæœ¬éƒ½æ˜¯é€šè¿‡é”é€Ÿ,kcptunè¾ƒå¤š é”é€Ÿ:å›½äº§è½¯ä»¶,æ”¶è´¹,ä¸”ä¸å¼€æº,ä¸å¼€æº,æ„å‘³ç€å¯èƒ½è¢«ç›‘æŽ§,æ‰€ä»¥ç›´æŽ¥pass kcptun:ä¸ªäººè§‰å¾—éº»çƒ¦,serverç«¯é…äº†è¿˜è¦é…clientæœ€åŽ:å½“æ—¶æ²¡å‘çŽ°googleçš„bbr,äºŽæ˜¯å°†å°±ç”¨ç€,ä¹Ÿè¿˜è¡Œ,å°±æ˜¯å¶å°”æƒ³çœ‹çœ‹youtubeçš„æ—¶å€™åªèƒ½çœ‹480pçš„,è¿˜å¡çš„åŽ‰å®³â€¦ç›´åˆ°å‰å‡ å¤©,æ— æ„ä¸­çœ‹åˆ°googleçš„tcp-bbræ‹¥å¡žæŽ§åˆ¶æŠ€æœ¯â€¦å‚è€ƒé“¾æŽ¥ é…ç½® ç¡®è®¤VPSçš„è™šæ‹ŸåŒ–æŠ€æœ¯ä¸ä¸ºOpenvz(vultrçš„æœåŠ¡å™¨éƒ½ä¸æ˜¯OpenvzO(âˆ©_âˆ©)Oå“ˆå“ˆ~) ä¸‹è½½è„šæœ¬wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh æŸ¥çœ‹è„šæœ¬æ”¯æŒçš„ç³»ç»Ÿç‰ˆæœ¬(æ”¯æŒå†…æ ¸ç‰ˆæœ¬å¤§äºŽ4.9çš„ç³»ç»Ÿ),cat ./bbr.shåœ¨è„šæœ¬å¼€å§‹çš„æ³¨é‡Šä¸­åŒ…å«ä»¥ä¸‹ä¿¡æ¯:1System Required: CentOS 6+, Debian7+, Ubuntu12+ æˆ‘å½“å‰çš„vpsæ˜¯Ubuntu 18.04 LTS,å› æ­¤æ»¡è¶³å¼€å¯tcp_bbrçš„æ¡ä»¶ èµ‹äºˆæ‰§è¡Œæƒé™:chmod +x ./bbr.sh æ‰§è¡Œ:./bbr.sh å®ŒæˆåŽä½¿ç”¨lsmod | grep tcp_bbræŸ¥çœ‹tcp_bbråŠ é€Ÿæ¨¡å—æ˜¯å¦å·²ç»å®‰è£…æˆåŠŸ é‡å¯vps:reboot æ•ˆæžœç›´æŽ¥çœ‹YouTubeçš„1080Pè§†é¢‘å§,æœ€ç›´è§‚,ç›´æŽ¥ä¸Šå›¾å…¨ç¨‹æ— å¡é¡¿]]></content>
      <tags>
        <tag>google</tag>
        <tag>vps</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitlabå‡ºçŽ°forbiddençš„è§£å†³æ–¹æ³•]]></title>
    <url>%2F2018%2F06%2F06%2Fgitlab%E5%87%BA%E7%8E%B0forbidden%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[é—®é¢˜å‰äº›å¤©åœ¨å…¬å¸çš„æµ‹è¯•æœåŠ¡å™¨ä¸ŠåŸºäºŽdockerå®‰è£…äº†gitlab,ä»Šå¤©åŒäº‹çªç„¶åæ˜ gitlabåœ°å€è®¿é—®çš„æ—¶å€™é¡µé¢æç¤ºForbidden,httpçŠ¶æ€ç ä¹Ÿæ˜¯å¯¹åº”çš„403,äºŽæ˜¯googleä¸€ä¸‹,å‘çŽ°åŽŸå› å¯èƒ½æ˜¯è¾ƒå¤šçš„å¹¶å‘å¯¼è‡´çš„è®¿é—®è¢«æ‹’ç» åŽŸå›  Gitlabä½¿ç”¨rack_attackåšäº†å¹¶å‘è®¿é—®çš„é™åˆ¶ è§£å†³æ–¹æ³•é…ç½®/etc/gitlab/gitlab.rbæ–‡ä»¶,æœåŠ¡å™¨å½“å‰ä½¿ç”¨çš„docker,å¯¹åº”ç›®å½•æ˜¯/home/gitlab/config/gitlab.rb(è¯¥ç›®å½•/æ–‡ä»¶æ ¹æ®dockerå®¹å™¨åˆ›å»ºæ—¶æŒ‡å®šçš„ç›®å½•/æ–‡ä»¶æ˜ å°„å…³ç³»å†³å®š) æ‰¾åˆ°ä¸‹é¢è¿™æ®µé…ç½®1234567gitlab_rails['rack_attack_git_basic_auth'] = &#123; 'enabled' =&gt; true, 'ip_whitelist' =&gt; ["127.0.0.1", "æœåŠ¡å™¨å…¬ç½‘ip"], 'maxretry' =&gt; 10, 'findtime' =&gt; 60, 'bantime' =&gt; 3600&#125; åŽ»æŽ‰æ³¨é‡Š,ç„¶åŽæ”¹ä¸º1234567gitlab_rails['rack_attack_git_basic_auth'] = &#123; 'enabled' =&gt; true, 'ip_whitelist' =&gt; ["127.0.0.1", "æœåŠ¡å™¨å…¬ç½‘ip"], 'maxretry' =&gt; 100, 'findtime' =&gt; 60, 'bantime' =&gt; 60&#125; ä¿å­˜é€€å‡º è¿è¡Œdocker exec å®¹å™¨åç§° gitlab-ctl reconfigureè‡³æ­¤,ä¸Šè¿°é—®é¢˜è§£å†³ å‚è€ƒé“¾æŽ¥:GitLab issuing temporary IP bans - 403 forbidden]]></content>
      <tags>
        <tag>docker</tag>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockeræ­å»ºgitlabå’ŒsvnæœåŠ¡]]></title>
    <url>%2F2018%2F05%2F21%2Fdocker%E6%90%AD%E5%BB%BAgitlab%E5%92%8Csvn%E6%9C%8D%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰å…¬å¸é‡Œçš„ä»£ç éƒ½æ˜¯æ‰˜ç®¡åˆ°å±€åŸŸç½‘æœåŠ¡å™¨ä¸Šçš„,çŽ°åœ¨ç”±äºŽéƒ¨åˆ†åŒäº‹è¿œç¨‹åŠžå…¬çš„éœ€è¦,è®¡åˆ’æŠŠgitå’Œsvnéƒ½è½¬åˆ°å…¬ç½‘çš„centosæœåŠ¡å™¨ä¸ŠåŽ»,ä½†æ˜¯gitlabçš„é…ç½®æ˜¯çœŸå¿ƒè´¹æ—¶é—´,æ‰€ä»¥å†³å®šç”¨dockeræ¥åšè¿™ä¸ªäº‹æƒ…,ä»¥ä¸‹æ˜¯ä¸€äº›æ­¥éª¤å’Œæ€»ç»“ ä½¿ç”¨daocloudç»™dockeråŠ ä¸ªé€Ÿå…ˆâ€¦å¯ä»¥é€šè¿‡è¿™ä¸ªé“¾æŽ¥é‡Œé¢çš„å‘½ä»¤ç»™dockeræ”¹ä¸ªæº,ä¸ç„¶é€Ÿåº¦æ…¢æ­»â€¦ gitlabå®‰è£… æ‹‰å–é•œåƒ 1docker pull gitlab/gitlab-ce:latest æ–°å»ºæŽˆæƒç”¨æˆ· 1useradd -d /home/gitlab -s /bin/sh -m gitlab åŽå°è¿è¡Œå®¹å™¨,æŒ‡å®šåŸŸå,ç«¯å£æ˜ å°„å…³ç³»,ç›®å½•æ˜ å°„å…³ç³»,å°†å®¹å™¨å‘½åä¸ºgitlab,æ–¹ä¾¿åŽç»­æ“ä½œ 123456789docker run --detach \ --hostname git.vcs.trycheers.com \ --publish 10443:443 --publish 10080:80 --publish 10022:22 \ --name gitlab \ --restart always \ --volume /home/gitlab/config:/etc/gitlab \ --volume /home/gitlab/logs:/var/log/gitlab \ --volume /home/gitlab/data:/var/opt/gitlab \ gitlab/gitlab-ce:latest ç”¨apacheå¯¹10080ç«¯å£è¿›è¡Œåä»£,ä½¿ä¹‹èƒ½å¤Ÿé€šè¿‡åŸŸåè®¿é—® 123456&lt;VirtualHost *:80&gt; ServerName hostname ProxyPreserveHost On ProxyPass / http://localhost:10080/ ProxyPassReverse / http://localhost:10080/&lt;/VirtualHost&gt; svnå®‰è£… åŽå°è¿è¡Œå®¹å™¨,æŒ‡å®šç«¯å£æ˜ å°„å…³ç³»,ç›®å½•æ˜ å°„å…³ç³»,å°†å®¹å™¨å‘½åä¸ºsvn,æ–¹ä¾¿åŽç»­æ“ä½œ 1docker run -d -p 9200:80 -p 9201:443 -v /home/subversion/svn:/var/local/svn -v /home/subversion/svn_backup:/var/svn-backup -v /home/subversion/svn_conf/:/etc/apache2/dav_svn/ --name svn marvambass/subversion æ·»åŠ svnç”¨æˆ· 1htdigest /home/subversion/svn_conf/dav_svn.passwd Subversion username ä¿®æ”¹ä»“åº“/åˆ†ç»„/ç”¨æˆ·æƒé™ç›´æŽ¥ç¼–è¾‘/home/subversion/svn_conf/dav_svn.authz ç”¨apacheå¯¹9200ç«¯å£è¿›è¡Œåä»£,ä½¿ä¹‹èƒ½å¤Ÿé€šè¿‡åŸŸåè®¿é—® 123456&lt;VirtualHost *:80&gt; ServerName hostname ProxyPreserveHost On ProxyPass / http://localhost:9200/ ProxyPassReverse / http://localhost:9200/&lt;/VirtualHost&gt; å…³äºŽgitlabçš„ç³»ç»Ÿèµ„æºå ç”¨çœ‹å›¾è¯´è¯åœ¨dockerä¸­å¸¸é©»å†…å­˜å¤§æ¦‚æ˜¯2GB+,cpuå¼€é”€é€šå¸¸åªæ˜¯åœ¨å¯åŠ¨æ—¶å€™ç‰¹åˆ«å¤§,å› æ­¤è¦è¿è¡ŒgitlabæŽ¨èè‡³å°‘ä½¿ç”¨2æ ¸4GBçš„æœåŠ¡å™¨é…ç½®! å“Ž,ä¹Ÿéš¾æ€ªå½“æ—¶æŠ˜è…¾åŠå¤©ä¹Ÿæ²¡èƒ½åœ¨æˆ‘å®¶æ ‘èŽ“æ´¾(armæž¶æž„çš„4æ ¸cpu,512Må†…å­˜â€¦)ä¸Šæžå®šgitlabâ€¦ æ€»ç»“gitlabåœ¨åˆšå¯åŠ¨æ—¶ä¼šåŠ è½½å¤§é‡çš„çŽ¯å¢ƒä¾èµ–,å› æ­¤å¯èƒ½å‡ºçŽ°cpuå ç”¨é«˜çš„æƒ…å†µ,æ ¹æ®æœåŠ¡å™¨æ€§èƒ½ä¸åŒä¼šæŒç»­ä¸€æ®µæ—¶é—´,é€šå¸¸åœ¨cpuå ç”¨é™è‡³æ­£å¸¸æ—¶æ‰èƒ½è®¿é—®åˆ°æœ¬åœ°çš„gitlabé¡¹ç›®]]></content>
      <tags>
        <tag>docker</tag>
        <tag>gitlab</tag>
        <tag>svn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ ‘èŽ“æ´¾çŽ©è€è®°]]></title>
    <url>%2F2018%2F04%2F14%2F%E6%A0%91%E8%8E%93%E6%B4%BE%E7%8E%A9%E8%80%8D%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« æ˜¯è‡ªå·±å…¥æ‰‹æ ‘èŽ“æ´¾ä¹‹åŽçš„ä¸€äº›ä½¿ç”¨è®°å½•å‰äº›å¤©çœ‹ v2ex ä¸Šæœ‰äººè®¨è®ºæ ‘èŽ“æ´¾ï¼ŒäºŽæ˜¯å‡ºäºŽå¥½å¥‡åœ¨æ·˜å®ä¸Šæ·˜äº†ä¸€åªæ ‘èŽ“æ´¾æ¥çŽ©çŽ© ä½“ç§¯è¶…çº§å°â€¦ ä¸€ä¸ªæ¿å­,ä¸€ä¸ªå¡‘æ–™ç›’å­è£…ä¸Šå®Œå·¥ åˆšå¼€å§‹çš„æ—¶å€™å°è¯•äº†ä¸€ä¸‹å®˜æ–¹çš„NOOBSå·¥å…·å®‰è£…raspbianç³»ç»Ÿ,è¿™ä¸ªç³»ç»Ÿæ˜¯ä¸ºæ ‘èŽ“æ´¾å®šåˆ¶çš„åŸºäºŽDebiançš„ linux ç³»ç»Ÿ,ä½†ä¸çŸ¥ä»€ä¹ˆåŽŸå› æ€»æ˜¯é—´æ­‡æ€§å¡æ­»,åŠ ä¹‹ä¸ªäººåå¥½ ubuntu ä¸€ç‚¹,äºŽæ˜¯å®‰è£…äº†Ubuntu_MATE ç³»ç»Ÿå®‰è£…åŸºæœ¬æ­¥éª¤: ä¸‹è½½ç³»ç»Ÿé•œåƒ å°†ä¸‹è½½çš„ubuntu-mate-16.04.2-desktop-armhf-raspberry-pi.imgé•œåƒè§£åŽ‹åŽä½¿ç”¨ddå‘½ä»¤å°†é•œåƒå†™å…¥åˆ° sd å¡ä¸­(æˆ‘çš„çŽ¯å¢ƒä¸º macOS),æ³¨æ„å†™å…¥å®ŒæˆåŽä¸€å®šè¦ä½¿ç”¨unmountå°† sd å¡æŽ¨å‡º,ç„¶åŽæ‹”å‡º sd å¡ å°† sd å¡æ’å…¥æ ‘èŽ“æ´¾,å¹¶è¿žæŽ¥å¥½æ‰€æœ‰å¤–è®¾åŽå¼€æœº,ç„¶åŽåƒå®‰è£… QQ ä¸€æ ·å®Œæˆäº†Ubuntu_MATEçš„å®‰è£…è¿‡ç¨‹ ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿ: å½“æ—¶å†’å‡ºä¸€ä¸ªæƒ³æ³•:å†™ä¸€ä¸ªæ¯å¤©å®šæ—¶æ’­æ”¾æœªæ¥ä¸¤å¤©å¤©æ°”é¢„æŠ¥çš„å°ç¨‹åº(éžå½¼å°ç¨‹åº),æ¶‰åŠçš„åŠŸèƒ½ç‚¹:å¤©æ°”é¢„æŠ¥æŽ¥å£;ä¸€ä¸ªåŸºäºŽè½»é‡çº§çš„ api æ¡†æž¶å®žçŽ°çš„ api;ä¸€ä¸ªå®šæ—¶ä»»åŠ¡;ä¸€ä¸ªæ–‡å­—è½¬è¯­éŸ³è„šæœ¬;ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶æ’­æ”¾å™¨;å½“ç„¶è¿˜éœ€è¦ä¸€ä¸ªå¤–æŽ¥å°éŸ³ç®±â€¦ äºŽæ˜¯å®‰è£…äº† lnmp çŽ¯å¢ƒ(å½“ä¸‹æ²¡æœ‰ç”¨åˆ° mysql),mplayer,git,æ–‡å­—è½¬éŸ³é¢‘ä½¿ç”¨çš„ç™¾åº¦sdk(php),é€šè¿‡ git å®‰è£…äº†lumen æŽ¥å£å¼€å‘ è·¯ç”± 1$router-&gt;get('/get_weather','WeatherController@getWeather'); æŽ§åˆ¶å™¨WeatherController.php 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;?phpnamespace App\Http\Controllers;use GuzzleHttp\Client;use Illuminate\Support\Facades\Cache;class WeatherController extends Controller&#123; /** * Create a new controller instance. * * @return void */ public function __construct() &#123; // &#125; //åŸºäºŽæ ‘èŽ“æ´¾çš„ç®€æ˜“å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ public function getWeather() &#123; //èŽ·å–å¤©æ°”ä¿¡æ¯ $client = new Client(); // å®žä¾‹åŒ– $city = 'æˆéƒ½'; $city_code = urlencode($city); $aqi = [ 'å¥½', 'ä¸­ç­‰', 'ä¸é€‚äºŽæ•æ„Ÿäººç¾¤', 'ä¸å¥åº·', 'éžå¸¸ä¸å¥åº·', 'å±é™©', ]; if (Cache::has('report') === false) &#123; $url = 'https://www.sojson.com/open/api/weather/json.shtml?city=' . $city_code; // è®¾ç½®ä¸€ä¸ªå¯è®¿é—®çš„ url $http = $client-&gt;request('GET', $url); // æ‰§è¡Œ // åˆ¤æ–­ http çŠ¶æ€ç ä¸º 200 çš„æ—¶å€™ï¼Œæ‰§è¡ŒæˆåŠŸ $aqi_content = 'æœªçŸ¥'; if ($http-&gt;getStatusCode() == 200) &#123; $weather = json_decode($http-&gt;getBody()-&gt;getContents(), true); if ($weather['data']['forecast'][0]['aqi'] &lt;= 50) &#123; $aqi_content = $aqi[0]; &#125; else if ($weather['data']['forecast'][0]['aqi'] &lt;= 100) &#123; $aqi_content = $aqi[1]; &#125; else if ($weather['data']['forecast'][0]['aqi'] &lt;= 150) &#123; $aqi_content = $aqi[2]; &#125; else if ($weather['data']['forecast'][0]['aqi'] &lt;= 200) &#123; $aqi_content = $aqi[3]; &#125; else if ($weather['data']['forecast'][0]['aqi'] &lt;= 300) &#123; $aqi_content = $aqi[4]; &#125; else if ($weather['data']['forecast'][0]['aqi'] &lt;= 500) &#123; $aqi_content = $aqi[5]; &#125; else &#123; &#125; //æ‹¼è£…å­—ç¬¦ä¸² $report = 'çŽ°åœ¨é¢„æŠ¥,' . $city . 'æœªæ¥ä¸¤å¤©å¤©æ°”æƒ…å†µ,' . $city . ',' . date('Yå¹´mæœˆ', time()) . $weather['data']['forecast'][1]['date'] . ',å¤©æ°”æƒ…å†µ,' . $weather['data']['forecast'][1]['high'] . ',' . $weather['data']['forecast'][1]['low'] . ',' . $weather['data']['forecast'][1]['type'] . ',' . $weather['data']['forecast'][1]['fx'] . ',é£ŽåŠ›,' . $weather['data']['forecast'][1]['fl'] . ',æ—¥å‡ºæ—¶é—´,' . $weather['data']['forecast'][1]['sunrise'] . ',æ—¥è½æ—¶é—´,' . $weather['data']['forecast'][1]['sunset'] . ',ç©ºæ°”æ±¡æŸ“æŒ‡æ•°,' . $aqi_content; $report .= ',' . $city . ',' . date('Yå¹´mæœˆ', time()) . $weather['data']['forecast'][2]['date'] . ',å¤©æ°”æƒ…å†µ,' . $weather['data']['forecast'][2]['high'] . ',' . $weather['data']['forecast'][2]['low'] . ',' . $weather['data']['forecast'][2]['type'] . ',' . $weather['data']['forecast'][2]['fx'] . ',é£ŽåŠ›,' . $weather['data']['forecast'][2]['fl'] . ',æ—¥å‡ºæ—¶é—´,' . $weather['data']['forecast'][2]['sunrise'] . ',æ—¥è½æ—¶é—´,' . $weather['data']['forecast'][2]['sunset'] . ',ç©ºæ°”æ±¡æŸ“æŒ‡æ•°,' . $aqi_content; Cache::add('report', $report, 60); &#125; &#125; $report = Cache::get('report'); generate_audio($report); &#125;&#125; ä»¥ä¸Šçš„generate_audio()å³æ˜¯è‡ªè¡Œå°è£…åŽçš„ç™¾åº¦çš„æ–‡å­—è½¬è¯­éŸ³sdk å®šæ—¶ä»»åŠ¡ åˆ›å»ºä¸€ä¸ªç›®å½•/data/weather_reports/ç”¨äºŽä¿å­˜mp3ä¸´æ—¶æ–‡ä»¶ crontab -eæ·»åŠ å®šæ—¶ä»»åŠ¡130 19 * * * curl http://localhost/get_weather &amp;&amp; /usr/bin/mplayer /data/weather_reports/weather_forecast.mp3 &gt; /dev/null 2&gt;&amp;1 ä»¥ä¸Šæ˜¯æ¯å¤©19ç‚¹30åˆ†ä½¿ç”¨curlå‘½ä»¤è¯·æ±‚æœ¬åœ°çš„apiå¹¶ä½¿ç”¨mplayeræ‰“å¼€ä½äºŽ/data/weather_reports/ç›®å½•çš„weather_forecast.mp3æ–‡ä»¶,å¹¶å°†æ ‡å‡†è¾“å‡º&amp;é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°ç©ºæ–‡ä»¶ä¸­ ç®€æ˜“æ’­æŠ¥ç³»ç»Ÿå®Œæˆè‡³æ­¤,ä¸€ä¸ªå®šæ—¶æ’­æŠ¥å°ç¨‹åºå·²å®Œæˆ,åŒæ—¶è¿˜å¯ä»¥åˆ©ç”¨å†…ç½‘ç©¿é€å¼€æ”¾å…¬ç½‘å¯¹è¯¥æ ‘èŽ“æ´¾çš„sshè®¿é—®,å®žçŽ°è¿œç¨‹é¥æŽ§æ’­æ”¾ðŸ˜‹ä¸ºäº†è¿›ä¸€æ­¥æ–¹ä¾¿æ“ä½œ(å› ä¸ºé™¤äº†ç¬¬ä¸€æ¬¡å®‰è£…ç³»ç»Ÿ,å…¶ä»–æ—¶å€™éƒ½å¸Œæœ›ç›´æŽ¥é€šè¿‡å‘½ä»¤è¡Œæ“ä½œæ ‘èŽ“æ´¾è€Œä¸æ˜¯å¤–æŽ¥ä¸€ä¸ªæ˜¾ç¤ºå™¨,èµ„æºæœ‰é™â€¦),å°†frpå®¢æˆ·ç«¯çš„è¿žæŽ¥å‘½ä»¤åŠ å…¥äº†å¼€æœºå¯åŠ¨ å¼€æœºå¯åŠ¨æ­¥éª¤ åœ¨frpå®¢æˆ·ç«¯æ‰€åœ¨ç›®å½•æ–°å»ºshæ–‡ä»¶frp_start.shæ–‡ä»¶,å¹¶èµ‹äºˆæ‰§è¡Œæƒé™ 12touch ./frp_start.shchmod +x ./frp_start.sh å†™å…¥å‘½ä»¤ 123456789101112#!/bin/bash### BEGIN INIT INFO# Provides: lestat# Required-Start: $local_fs $network# Required-Stop: $local_fs# Default-Start: 2 3 4 5# Default-Stop: 0 1 6# Short-Description: start frp service# Description: start frp service### END INIT INFOcd frpå®¢æˆ·ç«¯æ‰€åœ¨ç›®å½•nohup ./frpc -c ./frpc.ini &amp; å°†æ–‡ä»¶è¿žæŽ¥åˆ°/etc/init.d/ç›®å½• 1ln -s frpå®¢æˆ·ç«¯æ‰€åœ¨ç›®å½•/frp_start.sh /etc/init.d/frp_start åœ¨/etc/init.d/ä½¿ç”¨update-rc.då‘½ä»¤è¿›è¡Œé…ç½® 1sudo update-rc.d frp_start defaults 99 é…ç½®æˆåŠŸåŽå¯ä»¥åœ¨/etc/rc[å¯¹åº”çš„ç³»ç»Ÿè¿è¡Œçº§åˆ«].d/ç›®å½•ä¸­çœ‹åˆ°frp_start æœªå®Œå¾…ç»­â€¦]]></content>
      <tags>
        <tag>æ ‘èŽ“æ´¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽmysqlæŸ¥è¯¢è¯­å¥çš„ä¸€æ¬¡é—®é¢˜è®°å½•]]></title>
    <url>%2F2018%2F04%2F03%2F%E5%85%B3%E4%BA%8Emysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E4%B8%80%E6%AC%A1%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªå…¬å¸å†…éƒ¨ä½¿ç”¨çš„è´¢åŠ¡æŠ¥è¡¨ç³»ç»Ÿ,åœ¨ä¸€æ¬¡æŸ¥è¯¢æ—¶æ•°æ®åº“æŠ¥äº†ä¸€ä¸ªé”™è¯¯,åœ¨ç½‘ä¸ŠæŸ¥çœ‹åŽŸå› å¹¶è§£å†³é—®é¢˜ä¹‹åŽé¡ºä¾¿è®°å½•ä¸€ä¸‹,è¯¥sqlçš„ç›®æ ‡æ˜¯ä»Žæ—¥æŠ¥ä¸»è¡¨,æ—¥æŠ¥æœˆæ•°æ®è¡¨,æ—¥æŠ¥æ¨¡å—è¡¨ä¸­æŸ¥è¯¢åˆ°æŒ‡å®šç»è¥å…¬å¸,æŒ‡å®šæ—¥æœŸçš„å½“æ—¥æ±‡æ€»æ•°æ®(åŒ…å«éƒ¨åˆ†å½“æœˆæ•°æ®ç”¨äºŽåŽç»­è®¡ç®—) é—®é¢˜sqlå¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263SELECT A1.depcode AS depcode, SUM(d_dd_xcddsntq) AS sntq, ( SELECT ( SUM(d_jk_scddldl) + SUM(d_jk_zcddldl) + SUM(d_jk_hdjkl) ) AS bysj FROM mall_daily A LEFT JOIN mall_daily_jk B ON A.id = B.d_id LEFT JOIN mall_daily_month C ON A.depcode = C.depcode AND A.d_datetime &gt;= C. START AND A.d_datetime &lt;= C. END WHERE A.d_date &gt;= DATE_FORMAT('2018-03-01', '%Y-%m-%d') AND A.d_date &lt;= DATE_FORMAT('2018-03-21', '%Y-%m-%d') AND A.depcode = A1.depcode ) AS aj13, ( SELECT SUM(B.d_dd_xcztdd) AS bysj FROM mall_daily A LEFT JOIN mall_daily_dd B ON A.id = B.d_id LEFT JOIN mall_daily_month C ON A.depcode = C.depcode AND A.d_datetime &gt;= C. START AND A.d_datetime &lt;= C. END WHERE A.d_date &gt;= DATE_FORMAT('2018-03-01', '%Y-%m-%d') AND A.d_date &lt;= DATE_FORMAT('2018-03-21', '%Y-%m-%d') AND C.table_name = 'DailyDd' AND A.depcode = A1.depcode ) AS aj25, TRUNCATE ( (SELECT aj25) / (SELECT aj13), 2 ) AS bysj, D.d_month_byjh AS byjh, TRUNCATE ( (SELECT bysj) / (SELECT byjh), 2 ) AS jhdcl, TRUNCATE (30 / 31, 2) AS sjjd, TRUNCATE ( (SELECT bysj) / (SELECT sntq), 2 ) AS tbFROM mall_daily A1LEFT JOIN mall_daily_dd B ON A1.id = B.d_idLEFT JOIN mall_daily_jk C ON A1.id = C.d_idLEFT JOIN mall_daily_month D ON A1.depcode = D.depcodeAND A1.d_datetime &gt;= D. STARTAND A1.d_datetime &lt;= D.ENDWHERE A1.d_date &gt;= DATE_FORMAT('2018-03-01', '%Y-%m-%d')AND A1.d_date &lt;= DATE_FORMAT('2018-03-21', '%Y-%m-%d')GROUP BY A1.depcode; ä¸Šè¿°sqlåœ¨æ‰§è¡Œæ—¶æç¤º1[Err] 1247 - Reference 'sntq' not supported (reference to group function) å¤§æ„æ˜¯ä¸æ”¯æŒâ€™sntqâ€™çš„å¼•ç”¨,ä½†æ˜¯ä¸Šé¢SELECTçš„å­—æ®µä¸­æ˜Žæ˜Žæœ‰è¿™ä¸ªaliasã€‚åŽæ¥ä¸´æ—¶é€šè¿‡åœ¨è¿™ä¸ªä½ç½®ç”¨è¡¨è¾¾å¼æ›¿æ¢äº†åˆ«åè§£å†³(å°†SELECT sntqæ›¿æ¢ä¸ºSUM(d_dd_xcddsntq)),ä½†å§‹ç»ˆè§‰å¾—ä¸å®Œç¾Ž,æœ€åŽgoogleä»¥ä¸‹æ‰¾åˆ°äº†æ›´å¥½çš„è§£å†³æ–¹å¼,å°±æ˜¯åœ¨è¿™ä¸ªæŸ¥è¯¢è¯­å¥å¤–å±‚å†å¥—ä¸€å±‚æŸ¥è¯¢è¯­å¥,ä¹Ÿå°±æ˜¯å°†å½“å‰æŸ¥è¯¢è¯­å¥ä½œä¸ºå¦ä¸€ä¸ªè¯­å¥çš„å­æŸ¥è¯¢,ä¿®æ”¹åŽç»“æž„å¦‚ä¸‹: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970SELECT depcode, sntq, bysj, byjh, jhdcl, sjjd, TRUNCATE (bysj / sntq, 2) AS tbFROM ( SELECT A1.depcode AS depcode, SUM(d_dd_xcddsntq) AS sntq, ( SELECT ( SUM(d_jk_scddldl) + SUM(d_jk_zcddldl) + SUM(d_jk_hdjkl) ) AS bysj FROM mall_daily A LEFT JOIN mall_daily_jk B ON A.id = B.d_id LEFT JOIN mall_daily_month C ON A.depcode = C.depcode AND A.d_datetime &gt;= C. START AND A.d_datetime &lt;= C. END WHERE A.d_date &gt;= DATE_FORMAT('2018-03-01', '%Y-%m-%d') AND A.d_date &lt;= DATE_FORMAT('2018-03-21', '%Y-%m-%d') AND A.depcode = A1.depcode ) AS aj13, ( SELECT SUM(B.d_dd_xcztdd) AS bysj FROM mall_daily A LEFT JOIN mall_daily_dd B ON A.id = B.d_id LEFT JOIN mall_daily_month C ON A.depcode = C.depcode AND A.d_datetime &gt;= C. START AND A.d_datetime &lt;= C. END WHERE A.d_date &gt;= DATE_FORMAT('2018-03-01', '%Y-%m-%d') AND A.d_date &lt;= DATE_FORMAT('2018-03-21', '%Y-%m-%d') AND C.table_name = 'DailyDd' AND A.depcode = A1.depcode ) AS aj25, TRUNCATE ( (SELECT aj25) / (SELECT aj13), 2 ) AS bysj, D.d_month_byjh AS byjh, TRUNCATE ( (SELECT bysj) / (SELECT byjh), 2 ) AS jhdcl, TRUNCATE (30 / 31, 2) AS sjjd FROM mall_daily A1 LEFT JOIN mall_daily_dd B ON A1.id = B.d_id LEFT JOIN mall_daily_jk C ON A1.id = C.d_id LEFT JOIN mall_daily_month D ON A1.depcode = D.depcode AND A1.d_datetime &gt;= D. START AND A1.d_datetime &lt;= D. END WHERE A1.d_date &gt;= DATE_FORMAT('2018-03-01', '%Y-%m-%d') AND A1.d_date &lt;= DATE_FORMAT('2018-03-21', '%Y-%m-%d') GROUP BY A1.depcode ) t; å‚è€ƒé“¾æŽ¥]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[frp+nginxå®žçŽ°å†…ç½‘ç©¿é€]]></title>
    <url>%2F2018%2F03%2F26%2Ffrp%2Bnginx%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%2F</url>
    <content type="text"><![CDATA[å†™åœ¨å‰é¢:ä¸Šä¸€ç¯‡æ–‡ç« å†™äº†å…³äºŽngrok+nginxå®žçŽ°å†…ç½‘ç©¿é€çš„æµç¨‹,å¹¶æå‡ºäº†ä¸€äº›å­˜åœ¨çš„é—®é¢˜,æ˜¨å¤©è¯•è¿‡frpä¹‹åŽ,å°†ä¹‹å‰ngrokå­˜åœ¨çš„æ— æ³•æ˜ å°„æœ¬åœ°åŸŸåçš„é—®é¢˜è§£å†³äº† frp æ˜¯ä¸€ä¸ªå¯ç”¨äºŽå†…ç½‘ç©¿é€çš„é«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œæ”¯æŒ tcp, udp, http, https åè®®ã€‚ å…ˆå†³æ¡ä»¶æœ‰ä¸€ä¸ªåŸŸå,å¹¶è§£æžåˆ°è‡ªå·±æœåŠ¡å™¨ä¸Š,å¦‚:*.frp.lestat.meæœ‰ä¸€ä¸ªå…·å¤‡å›ºå®šipçš„å…¬ç½‘æœåŠ¡å™¨ ç³»ç»ŸçŽ¯å¢ƒå‡è®¾çŽ¯å¢ƒä¸º:æœåŠ¡å™¨OS:ubuntu17.10å®¢æˆ·ç«¯OS:macOS High Sierraä»¥ä¸‹å†…å®¹å°†æŒ‰ç…§ä¸Šè¿°çŽ¯å¢ƒè¿›è¡Œæ­å»º éƒ¨ç½²ç›¸å¯¹äºŽngrokè¿˜éœ€è¦ç¼–è¯‘æºç ,frpæ–¹ä¾¿å¾ˆå¤š,çœŸæ­£çš„å¼€ç®±å³ç”¨ æœåŠ¡å™¨ ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„frpæœåŠ¡ç«¯&amp;å®¢æˆ·ç«¯è‡³æœåŠ¡å™¨å’Œå†…ç½‘ç”µè„‘ 12wgethttps://github.com/fatedier/frp/releases/download/v0.16.1/frp_0.16.1_linux_amd64.tar.gz è§£åŽ‹ 123tar zxf ./frp_0.16.1_linux_amd64.tar.gzcd ./frp_0.16.1_linux_amd64ll ç›®å½•ç»“æž„å¦‚ä¸‹(ä¸åŒç‰ˆæœ¬å¯èƒ½æœ‰å·®å¼‚,ä½†å¤§è‡´ç›¸ä¼¼): 12345678910-rw-rw-r-- 1 kcptun kcptun 11358 Mar 21 10:11 LICENSE-rwxrwxr-x 1 kcptun kcptun 6154432 Mar 21 10:10 frpc*-rw-rw-r-- 1 kcptun kcptun 126 Mar 21 10:11 frpc.ini-rw-rw-r-- 1 kcptun kcptun 5306 Mar 21 10:11 frpc_full.ini-rwxrwxr-x 1 kcptun kcptun 7586848 Mar 21 10:10 frps*-r--r----- 1 root root 11207 Mar 25 15:38 frps.2018-03-25.log-rw-rw-r-- 1 kcptun kcptun 2127 Mar 25 13:42 frps.ini-rw-rw---- 1 root root 723 Mar 26 05:06 frps.log-rw-rw-r-- 1 kcptun kcptun 2300 Mar 21 10:11 frps_full.ini-rw------- 1 root root 0 Mar 25 11:12 nohup.out ç¼–è¾‘é…ç½®æ–‡ä»¶ vim ./frps.ini å¯å‚è€ƒå¦‚ä¸‹é…ç½®: 123456789101112131415161718192021222324252627282930313233343536373839404142434445# æœåŠ¡å™¨ç«¯ç›‘å¬å®¢æˆ·ç«¯è¿žæŽ¥è¯·æ±‚çš„ç«¯å£bind_port = 7000# æœåŠ¡å™¨ç«¯ç›‘å¬httpè¯·æ±‚çš„ç«¯å£(ç”±äºŽ80ç«¯å£è¢«nginxå ç”¨,å› æ­¤æŒ‡å®šå…¶ä»–ç«¯å£)vhost_http_port = 8080# æœåŠ¡å™¨ç”¨ä»¥æ˜¾ç¤ºè¿žæŽ¥çŠ¶æ€çš„ç«™ç‚¹ç«¯å£,ä»¥ä¸‹é…ç½®ä¸­å¯ä»¥é€šè¿‡è®¿é—®IP:7500ç™»å½•æŸ¥çœ‹frpæœåŠ¡ç«¯çŠ¶æ€ç­‰ä¿¡æ¯dashboard_addr = 0.0.0.0dashboard_port = 7500# dashboardå¯¹åº”çš„ç”¨æˆ·å/å¯†ç dashboard_user = userdashboard_pwd = pwd# æ—¥å¿—æ–‡ä»¶è·¯å¾„log_file = ./frps.log# æ—¥å¿—è®°å½•é”™è¯¯çº§åˆ«,åˆ†ä¸º:trace, debug, info, warn, errorlog_level = warn# æ—¥å¿—ä¿å­˜æœ€å¤§å¤©æ•°log_max_days = 3# å®¢æˆ·ç«¯è¿žæŽ¥æ ¡éªŒç (å®¢æˆ·ç«¯éœ€ä¸Žä¹‹ç›¸åŒ)privilege_token = privilege_token# heartbeat configure, it's not recommended to modify the default value# the default value of heartbeat_timeout is 90# heartbeat_timeout = 90# only allow frpc to bind ports you list, if you set nothing, there won't be any limit# privilege_allow_ports = 2000-3000,3001,3003,4000-50000# pool_count in each proxy will change to max_pool_count if they exceed the maximum valuemax_pool_count = 5# max ports can be used for each client, default value is 0 means no limitmax_ports_per_client = 0# authentication_timeout means the timeout interval (seconds) when the frpc connects frps# if authentication_timeout is zero, the time is not verified, default is 900sauthentication_timeout = 900# æ”¯æŒå¤–éƒ¨è®¿é—®çš„åŸŸå(éœ€è¦å°†åŸŸåè§£æžåˆ°IP)subdomain_host = frps.lestat.me é…ç½®nginxåå‘ä»£ç†,å°†æ¥è‡ª80ç«¯å£å¹¶æŒ‡å‘*.frp.lestat.meçš„è¯·æ±‚åˆ†å‘è‡³frpæœåŠ¡å™¨httpè¯·æ±‚çš„ç›‘å¬ç«¯å£ 12345678910111213141516171819202122server &#123; listen 80; server_name *.frps.lestat.me; location / &#123; proxy_pass http://127.0.0.1:8080; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-NginX-Proxy true; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection "upgrade"; proxy_max_temp_file_size 0; proxy_redirect off; proxy_read_timeout 240s; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125;&#125; å¯åŠ¨frpæœåŠ¡å™¨å¹¶åŽå°è¿è¡Œ,å¯åŠ¨å®ŒæˆåŽå¯é€šè¿‡lsof -i :7000æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ 1nohup ./frps -c ./frps.ini &amp; å®¢æˆ·ç«¯ åˆ›å»ºç›®å½•å¹¶è§£åŽ‹ ç¼–è¾‘é…ç½®æ–‡ä»¶ 123456789[common]server_addr = æœåŠ¡å™¨IPserver_port = 7000privilege_token = privilege_tokenauth_token = auth_token[hccrm]type = httplocal_port = 80subdomain = hccrm å¯åŠ¨frpå®¢æˆ·ç«¯ç¨‹åº 1./frpc -c ./frpc.ini æœ¬åœ°apache/nginxè™šæ‹Ÿä¸»æœºé…ç½®åŸŸååˆ«å(alias),æ ¹æ®è‡ªå·±çŽ¯å¢ƒè€Œå®š æµç¨‹å›¾è§£å‡è®¾ç”²ä½¿ç”¨çš„æµè§ˆå™¨å¸Œæœ›è®¿é—®ä¹™æ‰€åœ¨å†…ç½‘çŽ¯å¢ƒæœåŠ¡å™¨çš„webé¡¹ç›®: æœ€åŽå°è¯•ä½¿ç”¨*.frps.lestat.meè®¿é—®ç«™ç‚¹çœ‹æ˜¯å¦æ­£å¸¸,ç›¸æ¯”ngrokçš„æµç¨‹,frpçœåŽ»äº†ç¼–è¯‘,å°‘è¸©ä¸å°‘å‘,çš„ç¡®çœäº‹å¤šäº†]]></content>
      <tags>
        <tag>nginx</tag>
        <tag>frp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ngrok+nginxå®žçŽ°å†…ç½‘ç©¿é€]]></title>
    <url>%2F2018%2F03%2F24%2Fngrok%2Bnginx%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%2F</url>
    <content type="text"><![CDATA[å†™åœ¨å‰é¢:å‰å¤©åœ¨qqç¾¤é‡Œçœ‹åˆ°æœ‰äººåœ¨è®¨è®ºæ›¿ä»£èŠ±ç”Ÿå£³çš„å·¥å…·ï¼Œè¯´åˆ°äº†ngrokï¼Œè¯´æ˜¯å¯ä»¥å®žçŽ°èŠ±ç”Ÿå£³ä¸€æ ·çš„å†…ç½‘ç©¿é€ï¼Œä¸ªäººè®¤ä¸ºä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç”¨å¤„: å¯ä»¥åœ¨å…¬å¸æµ‹è¯•æœåŠ¡å™¨ä¸Šæ­å»ºä¸€ä¸ªæœåŠ¡,å®žçŽ°æµ‹è¯•ç«™ç‚¹çš„æœ¬åœ°è®¿é—®(å…¬ç½‘è®¿é—®æœ¬åœ°æœåŠ¡å™¨)ï¼Œåœ¨è¿™ä¹‹å‰é€šå¸¸æ˜¯ä¸Šä¼ ç½‘ç«™åˆ°æœåŠ¡å™¨å¹¶è§£æžä¸€ä¸ªå­åŸŸåï¼Œç›¸å¯¹æ¯”è¾ƒè´¹æ—¶ å¾®ä¿¡æŽ¥å£å¼€å‘çš„æ—¶å€™ä¼˜åŠ¿æ›´æ˜Žæ˜¾ï¼Œå› ä¸ºå¾®ä¿¡çš„OAuthä¸€ç±»è®¤è¯éœ€è¦ä¸€ä¸ªå…¬ç½‘åŸŸåä¸”ç«¯å£å¿…é¡»æ˜¯80/443(ä¹Ÿæ˜¯æœ¬æ–‡éœ€è¦ç”¨åˆ°nginxåšåå‘ä»£ç†çš„åŽŸå› ä¹‹ä¸€) æ¬¢è¿Žè¡¥å……â€¦ ngrok1.xä»‹ç»(2.xæ²¡æœ‰å¼€æºå®˜ç½‘)ngrok1.xæºç githubåœ°å€å¦‚ä¸Šå°é¢å›¾æ‰€ç¤º æ©˜è‰²å±å¹•çš„ç¬”è®°æœ¬æ˜¯ä½ çš„å·¥ä½œæœºå™¨ï¼Œå®‰è£…äº†ngrokå®¢æˆ·ç«¯ngrok.comæ‰€åœ¨çš„æœåŠ¡å™¨å®‰è£…äº†ngrokçš„æœåŠ¡ç«¯ï¼ˆngrokdï¼‰åˆ©ç”¨ngrok 8080å‘½ä»¤å¯ä»¥å°†ä½ æœ¬æœºçš„8080ç«¯å£æš´éœ²ç»™åå‘ä»£ç†è‡³ngrok.comçš„æŸä¸ªäºŒçº§åŸŸåå¦‚ï¼š.ngrok.comå…¬ç½‘ç”¨æˆ·å¯ä»¥é€šè¿‡.ngrok.comå°±å¯ä»¥è®¿é—®ä½ æœ¬æœº8080ç«¯å£ä¸Šçš„ç«™ç‚¹å†…å®¹äº†ã€‚ç”±æ­¤å¯è§ï¼Œå€ŸåŠ©ngrokï¼Œå¯ä»¥è§£å†³webé¡¹ç›®(å°¤å…¶æ˜¯å¾®ä¿¡æŽ¥å£ç›¸å…³)å¼€å‘è¿‡ç¨‹ç»å¸¸é‡åˆ°çš„â€œæœ¬åœ°å¼€å‘ï¼Œå¤–ç½‘è°ƒè¯•â€é—®é¢˜ã€‚ å…ˆå†³æ¡ä»¶ æœ‰ä¸€ä¸ªåŸŸå,å¹¶è§£æžåˆ°è‡ªå·±æœåŠ¡å™¨ä¸Š,å¦‚:*.ngrok.lestat.me æœ‰ä¸€ä¸ªå…·å¤‡å›ºå®šipçš„å…¬ç½‘æœåŠ¡å™¨ éƒ¨ç½² åŸºæœ¬æ­¥éª¤:å®‰è£…goçŽ¯å¢ƒ-&gt;ä¸‹è½½ngrokæºç -&gt;ä½¿ç”¨goç¼–è¯‘ngrokä»¥åŠç›¸å…³çŽ¯å¢ƒå˜é‡çš„è®¾ç½®-&gt;è¯ä¹¦é…ç½®-&gt;è¿è¡ŒngrokæœåŠ¡å™¨ç«¯å¹¶æŒ‡å®šç›‘å¬çš„http/httpsç«¯å£-&gt;nginxé…ç½®æ–‡ä»¶ä¸­å¯¹ä¸Šä¸€æ­¥ä¸­ç›¸å…³ç«¯å£åšåå‘ä»£ç†é…ç½®-&gt;é‡å¯nginx-&gt;ç”Ÿæˆå¯¹åº”OS(linux,darwin,windows)çš„å®¢æˆ·ç«¯-&gt;æœ¬åœ°æœºå™¨ä¸‹è½½ä¸Šä¸€æ­¥ç”Ÿæˆçš„å®¢æˆ·ç«¯-&gt;æœ¬åœ°æ–°å»ºé…ç½®æ–‡ä»¶ngrok.cfg-&gt;æœ¬åœ°è¿è¡Œå®¢æˆ·ç«¯å¹¶æŒ‡å®šé…ç½®æ–‡ä»¶-&gt;å‡ºçŽ°onlineåˆ™è¯´æ˜Žç©¿é€æˆåŠŸ ä¸€ä¸ªä¾‹å­æ•°æ®å‡†å¤‡æœ¬æœºåœ°å€ IPï¼š127.0.0.1ï¼ŒHTTP ä¸º 80å¤–ç½‘åœ°å€ IPï¼š45.77.14.6ï¼ŒHTTP ä¸º 80(NGINXç›‘å¬è¯¥ç«¯å£,å¹¶å¯¹.ngrok.lestat.meåŸŸåè¿›è¡Œè½¬å‘åˆ°æœåŠ¡å™¨çš„60ç«¯å£)åŸŸåä¸ºï¼šhttp://.ngrok.lestat.me é¢„æœŸç»“æžœå¤–ç½‘è®¿é—® http://*.ngrok.lestat.meå¯ä»¥è®¿é—®åˆ°æœ¬æœºä¸Š80ç«¯å£æä¾›çš„ç½‘ç«™ä¸‹æ–‡æŒ‰ç…§å‰é¢çš„ä¾‹å­æ¥æ­å»º GoçŽ¯å¢ƒçš„å®‰è£… ä¸‹è½½å¹¶è§£åŽ‹GOLANG 12wget -c https://storage.googleapis.com/golang/go1.8.3.linux-amd64.tar.gztar -C /usr/local -zxvf go1.8.3.linux-amd64.tar.gz è®¾ç½®ç›¸å…³çŽ¯å¢ƒå˜é‡ 1234export GOROOT=/usr/local/goexport PATH=$PATH:$GOROOT/binexport GOPATH=$HOME/goexport GOROOT_BOOTSTRAP=/usr/local/go æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸgo version å®‰è£…ngrok ä¸‹è½½å¹¶é…ç½®å‚æ•° 12345cd /usr/local/git clone https://github.com/inconshreveable/ngrok.gitexport GOPATH=/usr/local/ngrok/export NGROK_DOMAIN="ngrok.lestat.me"cd ngrok ç”Ÿæˆè¯ä¹¦ 12345openssl genrsa -out rootCA.key 2048openssl req -x509 -new -nodes -key rootCA.key -subj "/CN=$NGROK_DOMAIN" -days 5000 -out rootCA.pemopenssl genrsa -out server.key 2048openssl req -new -key server.key -subj "/CN=$NGROK_DOMAIN" -out server.csropenssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days 5000 å°†æºç ä¸‹çš„è¯ä¹¦å¤åˆ¶åˆ°æŒ‡å®šä½ç½® 123cp rootCA.pem assets/client/tls/ngrokroot.crtcp server.crt assets/server/tls/snakeoil.crtcp server.key assets/server/tls/snakeoil.key ç¼–è¯‘æœåŠ¡å™¨&amp;å®¢æˆ·ç«¯(linux64ä½),å¦‚æžœæ˜¯32ä½ç³»ç»Ÿåˆ™æ˜¯amd386 1234cd /usr/local/go/srcGOOS=linux GOARCH=amd64 ./make.bashcd /usr/local/ngrok/GOOS=linux GOARCH=amd64 make release-server release-client ç¼–è¯‘Mac64ä½å®¢æˆ·ç«¯1234cd /usr/local/go/srcGOOS=darwin GOARCH=amd64 ./make.bashcd /usr/local/ngrok/GOOS=darwin GOARCH=amd64 make release-client ç¼–è¯‘Windows64ä½å®¢æˆ·ç«¯1234cd /usr/local/go/srcGOOS=windows GOARCH=amd64 ./make.bashcd /usr/local/ngrok/GOOS=windows GOARCH=amd64 make release-client æœåŠ¡ç«¯è¿è¡Œ è¿›å…¥åˆ°ngrokçš„binç›®å½•ä¸‹ 12cd /usr/local/ngrok/bin./ngrokd -domain="$NGROK_DOMAIN" -httpAddr=":60" -httpsAddr=":63" å¦‚æžœå‡ºçŽ°å¦‚ä¸‹æç¤º,è¯´æ˜ŽæœåŠ¡ç«¯å¼€å¯æˆåŠŸ 12345[06:59:42 UTC 2018/03/24] [INFO] (ngrok/log.(*PrefixLogger).Info:83) [registry] [tun] No affinity cache specified[06:59:42 UTC 2018/03/24] [INFO] (ngrok/log.Info:112) Listening for public http connections on [::]:60[06:59:42 UTC 2018/03/24] [INFO] (ngrok/log.Info:112) Listening for public https connections on [::]:63[06:59:42 UTC 2018/03/24] [INFO] (ngrok/log.Info:112) Listening for control and proxy connections on [::]:4443[06:59:42 UTC 2018/03/24] [INFO] (ngrok/log.(*PrefixLogger).Info:83) [metrics] Reporting every 30 seconds å®¢æˆ·ç«¯è¿è¡Œä¸Žä½¿ç”¨mac å®¢æˆ·ç«¯çš„ä½ç½®ï¼š1/usr/local/ngrok/bin/darwin_amd64/ngrok windows å®¢æˆ·ç«¯çš„ä½ç½®ï¼š1/usr/local/ngrok/bin/windows_amd64/ngrok.exe linux å®¢æˆ·ç«¯çš„ä½ç½®ï¼š1/usr/local/ngrok/bin/ngrok æ–°å»ºngrok.cfgæ–‡ä»¶(é…ç½®æ–‡ä»¶)1234567891011server_addr: "ngrok.lestat.me:4443"trust_host_root_certs: falsetunnels: #å¯å®šä¹‰å¤šä¸ªåŸŸå test1: subdomain: "test1" #å®šä¹‰æœåŠ¡å™¨åˆ†é…åŸŸåå‰ç¼€ proto: http: 80 #æ˜ å°„ç«¯å£ï¼Œä¸åŠ ipé»˜è®¤æœ¬æœº test2: subdomain: "test2" #å®šä¹‰æœåŠ¡å™¨åˆ†é…åŸŸåå‰ç¼€ proto: http: 81 #æ˜ å°„ç«¯å£ï¼Œä¸åŠ ipé»˜è®¤æœ¬æœº ä»Žå‘½ä»¤è¡Œè¿è¡Œå®¢æˆ·ç«¯æ–‡ä»¶,å¦‚ä¸‹:æ–¹æ³•1:1./ngrok -config=ngrok.cfg -log=ngrok.log start test1 æ–¹æ³•2:(æœ€åŽä¸€ä¸ª8080ä»£è¡¨æ˜ å°„çš„æœ¬åœ°ä¸»æœºç«¯å£)1./ngrok -config=ngrok.cfg -log=ngrok.log -subdomain=test1 8080 å¦‚æžœè¿”å›žç›¸ä¼¼äºŽä»¥ä¸‹çš„å†…å®¹,è¯´æ˜Žå®¢æˆ·ç«¯å¯åŠ¨æˆåŠŸ1234567Tunnel Status online Version 1.7/1.7 Forwarding https://hccrm.ngrok.lestat.me:60 -&gt; 127.0.0.1:80 Forwarding http://hccrm.ngrok.lestat.me:60 -&gt; 127.0.0.1:80 Web Interface 127.0.0.1:4040 # Conn 0 Avg Conn Time 0.00ms nginxåå‘ä»£ç†ç›¸å…³é…ç½®å‡è®¾: ngrokç›‘å¬httpçš„ç«¯å£ä¸º60 nginxç›‘å¬äº†å½“å‰æœåŠ¡å™¨çš„80ç«¯å£(åŸŸåè®¿é—®hccrm.ngrok.lestat.meæ—¶ä¼šç›´æŽ¥è®¿é—®åˆ°nginxç›‘å¬çš„80ç«¯å£,å› æ­¤éœ€è¦nginxè½¬å‘)123456789101112131415161718server &#123; listen 80; server_name *.ngrok.lestat.me; location / &#123; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host:60; #æ­¤å¤„ç«¯å£è¦è·Ÿ å¯åŠ¨æœåŠ¡ç«¯ngrok æ—¶æŒ‡å®šçš„ç«¯å£ä¸€è‡´ proxy_set_header X-Nginx-Proxy true; proxy_set_header Connection ""; proxy_pass http://127.0.0.1:60; # åå‘ä»£ç†å¯¹åº”çš„æœ¬åœ°ip:port &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125;&#125; é‡å¯nginxservice nginx reload è‡³æ­¤,å·²å®žçŽ°äº†å†…ç½‘ç©¿é€ç›®å‰å­˜åœ¨çš„é—®é¢˜: ç›®å‰ä¸çŸ¥å¦‚ä½•å®žçŽ°å¯¹æœ¬åœ°è™šæ‹Ÿä¸»æœºçš„è®¿é—®(ä¾‹å¦‚æœ¬åœ°apacheä¸Šhttpd-vhostsä¸­é…ç½®çš„è™šæ‹Ÿä¸»æœº) ç”±äºŽngrok1.xå·²äºŽä¸¤å¹´å‰åœæ­¢ç»´æŠ¤,å†åŠ ä¸Šç¬¬ä¸€ä¸ªé—®é¢˜1,å› æ­¤åŽç»­å‡†å¤‡å†™ä¸€ç¯‡å…³äºŽfrpçš„æ­å»ºè®°å½•,è¿™æ˜¯ä¸€ä¸ªé•¿æœŸç»´æŠ¤çš„å¼€æºé¡¹ç›®,å€¼å¾—å­¦ä¹ !]]></content>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆshadowsocksä¸­çš„pacé…ç½®]]></title>
    <url>%2F2018%2F02%2F14%2F%E6%B5%85%E8%B0%88shadowsocks%E4%B8%AD%E7%9A%84pac%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[å¤§æ¦‚æ˜¯ä»ŽåŽ»å¹´å¼€å§‹ä½¿ç”¨çš„shadowsockså®žçŽ°ç§‘å­¦ä¸Šç½‘,å½“æ—¶åœ¨é…ç½®å®Œä»£ç†æœåŠ¡å™¨ä¹‹åŽèƒ½å¤Ÿç”¨äº†å°±æ²¡ç®¡å…¶ä»–çš„é…ç½®ã€‚ç›´åˆ°æœ€è¿‘æƒ³åœ¨ç»´åŸºç™¾ç§‘ä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·çš„æ—¶å€™å‘çŽ°ç”±äºŽä¸€äº›åŽŸå› ,å½“å‰ä½¿ç”¨ä»£ç†çš„ipè¢«å°ç¦äº†ç”±äºŽGFWæ˜¯é€šè¿‡dnsæ±¡æŸ“çš„æ–¹å¼å±è”½äº†zh.wikipedia.org(å…¶ä»–è¯­è¨€çš„wikipediaå…¶å®žæ˜¯å¯ä»¥åœ¨å›½å†…ç›´æŽ¥è®¿é—®çš„æ¯”å¦‚è‹±æ–‡ç«™),è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡å…³é—­ä»£ç†å¹¶ä¿®æ”¹hostsæ–‡ä»¶è§£å†³,ä½†è¿™æ ·å¤ªéº»çƒ¦,å› ä¸ºéœ€è¦å®šæœŸæ›´æ–°hostsæ–‡ä»¶çš„ipåœ°å€,åŽæ¥googleäº†ä¸€ä¸‹å‘çŽ°shadowsocksé‡Œé¢æœ‰ä¸€ä¸ªåä¸ºpacçš„æ–‡ä»¶,è¿™ä¸ªæ–‡ä»¶çš„åŸŸååˆ—è¡¨æ¥è‡ªäºŽGFWlist,è€Œæ­£æ˜¯è¿™ä¸ªæ–‡ä»¶å†³å®šäº†shadowsockså¤„äºŽpacæ¨¡å¼æ—¶å“ªäº›åŸŸåéœ€è¦è¢«ä»£ç†,åœ¨è¿™ä¸ªæ–‡ä»¶ä¹‹å¤–çš„åŸŸåéƒ½ä¼šç›´æŽ¥è®¿é—®ã€‚å› æ­¤,è§£å†³ç»´åŸºçš„ipå°ç¦ä¸”è¦ç»§ç»­ä½¿ç”¨ä»£ç†ä¸Šç½‘åªéœ€è¦2ä¸ªæ­¥éª¤ ä¿®æ”¹æœ¬åœ°hostsä¸ºwikipediaä¸­æ–‡å½“å‰çš„ip(è§£å†³dnsæ±¡æŸ“) ä¿®æ”¹pacæ–‡ä»¶ä¸­çš„é…ç½®,å°†wikipedia.orgç›¸å…³çš„é…ç½®åŽ»æŽ‰å³å¯ PACçš„ä¼˜åŠ¿PACè‡ªåŠ¨ä»£ç†å±žäºŽæ™ºèƒ½åˆ¤æ–­æ¨¡å¼ï¼Œç›¸æ¯”å…¨å±€ä»£ç†ï¼Œå®ƒçš„ä¼˜ç‚¹æœ‰ï¼š ä¸å½±å“å›½å†…ç½‘ç«™çš„è®¿é—®é€Ÿåº¦ï¼Œé˜²æ­¢æ— æ„ä¹‰çš„ç»•è·¯ èŠ‚çœShadowsocksæœåŠ¡çš„æµé‡ï¼ŒèŠ‚çœæœåŠ¡å™¨èµ„æº æŽ§åˆ¶æ–¹ä¾¿]]></content>
  </entry>
  <entry>
    <title><![CDATA[è¿‘æœŸå·¥ä½œä¸­çš„æ”¶èŽ·]]></title>
    <url>%2F2018%2F02%2F07%2F%E8%BF%91%E6%9C%9F%E5%B7%A5%E4%BD%9C%E4%B8%AD%E7%9A%84%E6%94%B6%E8%8E%B7%2F</url>
    <content type="text"><![CDATA[çœ¼ä¸‹å¿«è¦è¿‡å¹´äº†,æ‰‹å¤´çš„é¡¹ç›®ä¹Ÿç»ˆäºŽæŽ¥è¿‘å°¾å£°,æŠ½ç‚¹æ—¶é—´æ¥è®°å½•ä¸‹è¿‘æ®µæ—¶é—´çš„å·¥ä½œå¿ƒå¾—å‰æ®µæ—¶é—´åœ¨å·¥ä½œä¹‹ä½™æˆ‘æŠ½ç©ºçœ‹äº†ä¸€äº›ECMA6çš„è¯­æ³•,ç®€å•å­¦ä¹ äº†ä¸€ä¸‹webpack,äº†è§£äº†babel,åŽé¢ä¹Ÿå°è¯•ç€ä½¿ç”¨vue-cliæ­å»ºè‡ªå·±çš„demoå¹¶ç†Ÿæ‚‰å…¶ä¸­çš„ç»“æž„ è¯´è¯´æœ€è¿‘åšçš„ä¸€ä¸ªé¡¹ç›®:ä¸€ä¸ªæŽ¥å£å¼€å‘(å‰ç«¯)é¡¹ç›®,æŽ¥å£ç”±å®¢æˆ·æä¾›(javaå¼€å‘,jsonæ•°æ®æ ¼å¼),æˆ‘æ–¹è´Ÿè´£ç§»åŠ¨ç«¯webå¼€å‘å’ŒåŽå°é¡µé¢çš„å¼€å‘,å¹¶è°ƒè¯•å¥½æ‰€æœ‰æŽ¥å£(åŽç«¯æŽ¥å£æƒ…å†µ:æƒé™ç›¸å…³[14],ä¼šå‘˜æ¨¡å—[10],ç‰‡åº“[14],,å‡ºå“[19],åª’ä½“[15],èµ„è®¯[11],ç›´é€šè½¦[14],ipæ´»åŠ¨[12],è¥é”€è”ç›Ÿ[13])åˆšæ‹¿åˆ°éœ€æ±‚çš„æ—¶å€™æˆ‘è¿˜æ˜¯æ¯”è¾ƒæ‹…å¿ƒèƒ½å¦æžå®š,æ¯•ç«Ÿä½œä¸ºä¸€ä¸ªphperä¹‹å‰çš„ç¡®æ²¡æœ‰æžè¿‡spaçš„å¼€å‘,ä½†ä¹‹å‰åšäº†é‚£ä¹ˆå¤šspaçš„åŠŸè¯¾,ä¹Ÿè§‰å¾—æ˜¯æ—¶å€™çœŸæ­£çš„å®žè·µä¸€ä¸‹äº†,äºŽæ˜¯å¾ˆå¿«æ‰¾åˆ°äº†ä¸€ä¸ªåŸºäºŽvue+elementuiçš„åŽå°æ¡†æž¶vue-element-admin,æ®æˆ‘æœ€è¿‘è§‚å¯Ÿ,è¿™ä¸ªé¡¹ç›®åœ¨githubä¸Šæ¯å¤©å¹³å‡å¢žåŠ å°†è¿‘100ä¸ªstarâ€¦ è¿™ä¸ªæ¡†æž¶æ›¿æˆ‘ä»¬å®Œæˆäº†å¾ˆå¤šåŸºæœ¬æ–¹æ³•çš„å°è£…,è·¯ç”±è®¿é—®æƒé™,é¡µçœ‰æ ‡ç­¾åˆ‡æ¢,å¸¸ç”¨çš„å„ç§è¡¨æ ¼,è¡¨å•ç­‰;å¼€å‘èµ·æ¥æ•ˆçŽ‡ç›¸å¯¹è¾ƒé«˜,åœ¨æˆ‘åŽæ¥å®žé™…çš„å¼€å‘ä¸­ä¹Ÿåº”è¯äº†è¿™ç‚¹æœ€åŽèŠ±äº†ä¸¤å‘¨æ—¶é—´,æ­å»ºäº†ä¸€ä¸ªå°åž‹åŽå°ç®¡ç†ç³»ç»Ÿå¹¶å®Œæˆæ‰€æœ‰æŽ¥å£çš„è°ƒè¯•ä½¿ç”¨vueåšå¼€å‘çš„æ„Ÿè§‰å°±æ˜¯ä»£ç æ¯”æ›¾ç»ç”¨jqçš„é¡¹ç›®æ›´è§„èŒƒ(ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºæ¡†æž¶ä¸­å¼•å…¥äº†eslint,é…åˆvscodeçš„eslint+prettierä¸€é”®æ ¼å¼åŒ–,å®žçŽ°ç®€å•æ“ä½œå°±èƒ½éµå¾ªeslintä»£ç è§„èŒƒ);ç”±äºŽvue-cliå·²ç»å°†webpack,babelæ‰“åŒ…å¥½,å¹¶ä¸”å®žçŽ°äº†ctrl+sè‡ªåŠ¨åˆ·æ–°é¡µé¢é¢„è§ˆä¸”ä¸ä¼šæ¸…ç©ºconsoleé‡Œé¢çš„å†…å®¹,å¼€å‘çš„ä½“éªŒå˜å¾—éžå¸¸å¥½ã€‚å¼ºçƒˆæŽ¨èchromeçš„Vue DevToolsæ’ä»¶,å®‰è£…å®ŒæˆåŽå¯ä»¥åœ¨chromeå³ä¸Šæ–¹çœ‹åˆ°vueçš„logo,åœ¨devæ¨¡å¼ä¸‹çš„é¡µé¢å¯ä»¥ç›´æŽ¥çœ‹åˆ°å¼€å‘è€…å·¥å…·çš„æ ‡ç­¾æ å¤šå‡ºä¸€ä¸ªVueæ ‡ç­¾,ç‚¹å‡»å³å¯æŸ¥çœ‹åˆ°å½“å‰é¡µé¢çš„ä¿¡æ¯! ç›®å‰ä¸ºæ­¢,è‡ªå·±å¯¹vueçš„äº†è§£è¿˜ä¸å¤Ÿæ·±å…¥,å¯¹vuex,ç»„ä»¶çš„ä½¿ç”¨è¿˜ä¸å¤Ÿçµæ´»,è¿˜éœ€è¦æ›´å¤šçš„å®žè·µ æ–°çš„ä¸€å¹´,ç»§ç»­åŠ æ²¹!]]></content>
  </entry>
  <entry>
    <title><![CDATA[Vueå¼€å‘ä¸­çš„ä¸€äº›æ€»ç»“]]></title>
    <url>%2F2018%2F01%2F26%2FVue%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82%2F</url>
    <content type="text"><![CDATA[å…³äºŽaxiosçš„ä½¿ç”¨ç»†èŠ‚åŸºäºŽvueåšspaå¼€å‘,ä¸ªäººå¾ˆå¤šæ—¶å€™ä½¿ç”¨çš„è¯·æ±‚æ‰©å±•æ˜¯axios,è¿™ä¸ªæ‰©å±•ä¼šæŠŠå¸¸ç”¨çš„è¯·æ±‚å°è£…å¥½å‘é€å‡ºåŽ»,ä½¿ç”¨çš„æ—¶å€™åªéœ€è¦ä¼ å‚æ•°å³å¯ã€‚ä»Šå¤©é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯åŽç«¯æŽ¥å£æŽ¥æ”¶getæ–¹å¼ä¼ å‚,æˆ‘è¿™è¾¹æœ‰ä¸€ä¸ªæ•°ç»„éœ€è¦é€šè¿‡getæ–¹å¼ä¼ é€’è¿‡åŽ»,å‡è®¾æ•°ç»„åç§°æ˜¯:ids,è¯·æ±‚ä¸­é»˜è®¤å°±æ˜¯ids[]çš„å½¢å¼,æŽ¥å£éœ€è¦æä¾›idsçš„å½¢å¼,æ­¤æ—¶éœ€è¦å¼•å…¥qsæ‰©å±•,å¹¶åœ¨è¯·æ±‚ä½ç½®æ·»åŠ ä¸€é¡¹é…ç½®,ä»¥è½¬æ¢å‚æ•°æ ¼å¼,ç¤ºä¾‹ä»£ç å¦‚ä¸‹:1234567891011121314/** todo :ä¼šå‘˜å®¡æ ¸åˆ—è¡¨çš„é€šè¿‡ä¸Žé©³å›ž(æ‰¹é‡å’Œå•ä¸ªä¸ºåŒä¸€ä¸ªæ–¹æ³•), éœ€è¦ç®¡ç†å‘˜ç™»é™†* @param data object* */export function userInfoCheck(data) &#123; return request(&#123; url: '/backend/userInfoCheck', method: 'get', params: data, paramsSerializer: function(params) &#123; return qs.stringify(params, &#123; arrayFormat: 'repeat' &#125;) &#125; &#125;)&#125;]]></content>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽvueä¸­$nextTickçš„ä¸€ç‚¹ä½¿ç”¨å¿ƒå¾—]]></title>
    <url>%2F2018%2F01%2F24%2Fvue%E5%BC%80%E5%8F%91%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%B0%8F%E7%BB%93%2F</url>
    <content type="text"><![CDATA[å½“ä¸‹å…¬å¸åœ¨åšä¸€ä¸ªåª’ä½“é—¨æˆ·ç½‘ç«™,åŽå°ç”±å¦ä¸€å®¶å…¬å¸ä½¿ç”¨javaå¼€å‘å¹¶æä¾›æŽ¥å£,æœ¬äººè´Ÿè´£å¼€å‘åŽå°é¡µé¢,ä½¿ç”¨çš„æ˜¯vue-element-adminå¼€å‘ä¸‹é¢è¯´ä¸€ä¸‹é—®é¢˜åœºæ™¯,åœ¨å¼€å‘è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ªåŽå°ç®¡ç†å‘˜è§’è‰²é¡µé¢,å…¶ä¸­åŒ…å«ä¸€ä¸ªè¡¨å•dialog,åœ¨å…¶ä¸­ä½¿ç”¨äº†el-treeç»„ä»¶,ç›¸å…³ ä»£ç ç»“æž„å¦‚ä¸‹:12345678910111213&lt;div class="filter-container"&gt; &lt;el-button class="filter-item" style="margin-left: 10px;" v-waves @click="handleCreate" type="primary" icon="el-icon-edit"&gt;æ–°å¢žè§’è‰² &lt;/el-button&gt;&lt;/div&gt;&lt;el-dialog :title="textMap[dialogStatus]" :visible.sync="dialogFormVisible" width="50%"&gt; &lt;el-form :rules="rules" ref="dataForm" :model="temp" label-position="top" label-width="90px" style='width: 400px; margin-left:50px;'&gt; &lt;el-form-item label="é€‰æ‹©æƒé™" prop="sysPermission"&gt; &lt;el-tree ref="tree" :data="sysPermission" :props="formProps" show-checkbox @check-change="handleCheckChange" node-key="id"&gt;&lt;/el-tree&gt; &lt;/el-form-item&gt; &lt;/el-form&gt;&lt;/el-dialog&gt; ç›¸å…³çš„jså¦‚ä¸‹:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687export default &#123; name: 'sysRoleList', data() &#123; return &#123; tableKey: 0, list: null, total: null, listLoading: true, formLoading: true, listQuery: &#123; page: 1, limit: 20, importance: undefined, title: undefined, type: undefined, sort: '+id' &#125;, dialogFormVisible: false, dialogStatus: 'update', textMap: &#123; update: 'ç¼–è¾‘è§’è‰²', create: 'æ–°å¢žè§’è‰²' &#125;, rules: &#123; sysRoleName: [&#123;required: true, message: 'å¿…é¡»å¡«å†™è§’è‰²åç§°', trigger: 'blur'&#125;] &#125;, // è¡¨å•æ•°æ® temp: &#123; id: '', sysPermissionList: [], sysRoleName: '' &#125;, currentKeys: [], // è¡¨å•æƒé™å­—æ®µæ˜ å°„ formProps: &#123; label: 'sysPermissionName' &#125;, sysPermission: &#123;&#125; &#125; &#125;, created() &#123; // åˆ—è¡¨æ•°æ® // this.getList() // èŽ·å–æ‰€æœ‰æƒé™ // this.findAllSysPermission() &#125;, methods: &#123; /* * todo:checkboxçŠ¶æ€å˜æ›´ç›‘å¬ * */ handleCheckChange(data, checked, indeterminate) &#123; const idObj = &#123;id: data.id&#125; this.temp.sysPermissionList.push(idObj) &#125;, resetTemp() &#123; this.temp = &#123; id: '', sysRoleName: '', sysPermissionList: [] &#125; &#125;, handleCreate() &#123; this.resetTemp() this.dialogStatus = 'create' this.currentKeys = [] this.dialogFormVisible = true this.$nextTick(() =&gt; &#123; this.$refs['dataForm'].clearValidate() this.$refs.tree.setCheckedKeys(this.currentKeys) &#125;) &#125;, handleUpdate(row) &#123; this.resetTemp() this.dialogStatus = 'update' this.dialogFormVisible = true this.temp = Object.assign(&#123;&#125;, row) // copy obj this.currentKeys = [] row.sysPermissionList.forEach((value, index) =&gt; &#123; this.currentKeys.push(value[0]) &#125;) this.$nextTick(() =&gt; &#123; this.$refs['dataForm'].clearValidate() this.$refs.tree.setCheckedKeys(this.currentKeys) &#125;) &#125; &#125; &#125; éœ€æ±‚:éœ€è¦åœ¨æ¯æ¬¡ç¼–è¾‘æ•°æ®çš„æ—¶å€™è§¦å‘&lt;el-tree&gt;çš„æ–¹æ³•setCheckedKeysé—®é¢˜:ä¹‹å‰æ²¡æœ‰æŠŠthis.$refs.tree.setCheckedKeys()å†™åœ¨this.$nextTickçš„callbackä¹‹ä¸­,å› æ­¤ä¼šæç¤º:1TypeError: Cannot read property 'setCheckedKeys' of undefined è§£å†³æ–¹æ³•:æŠŠdialogç»„ä»¶å†…çš„å…¶ä»–éœ€è¦æ‰§è¡Œæ–¹æ³•çš„ç»„ä»¶æ–¹æ³•å†™åˆ°this.$nextTickçš„callbackä¹‹ä¸­åŽŸå› å¦‚ä¸‹(å®˜æ–¹): å¯èƒ½ä½ è¿˜æ²¡æœ‰æ³¨æ„åˆ°ï¼ŒVue å¼‚æ­¥æ‰§è¡Œ DOM æ›´æ–°ã€‚åªè¦è§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªçŽ¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®æ”¹å˜ã€‚å¦‚æžœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æŽ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶åŽ»é™¤é‡å¤æ•°æ®å¯¹äºŽé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œä¸Šéžå¸¸é‡è¦ã€‚ç„¶åŽï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªçŽ¯â€œtickâ€ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®žé™… (å·²åŽ»é‡çš„) å·¥ä½œã€‚Vue åœ¨å†…éƒ¨å°è¯•å¯¹å¼‚æ­¥é˜Ÿåˆ—ä½¿ç”¨åŽŸç”Ÿçš„ Promise.then å’Œ MessageChannelï¼Œå¦‚æžœæ‰§è¡ŒçŽ¯å¢ƒä¸æ”¯æŒï¼Œä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚ä¾‹å¦‚ï¼Œå½“ä½ è®¾ç½® vm.someData = â€˜new valueâ€™ ï¼Œè¯¥ç»„ä»¶ä¸ä¼šç«‹å³é‡æ–°æ¸²æŸ“ã€‚å½“åˆ·æ–°é˜Ÿåˆ—æ—¶ï¼Œç»„ä»¶ä¼šåœ¨äº‹ä»¶å¾ªçŽ¯é˜Ÿåˆ—æ¸…ç©ºæ—¶çš„ä¸‹ä¸€ä¸ªâ€œtickâ€æ›´æ–°ã€‚å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯å¦‚æžœä½ æƒ³åœ¨ DOM çŠ¶æ€æ›´æ–°åŽåšç‚¹ä»€ä¹ˆï¼Œè¿™å°±å¯èƒ½ä¼šæœ‰äº›æ£˜æ‰‹ã€‚è™½ç„¶ Vue.js é€šå¸¸é¼“åŠ±å¼€å‘äººå‘˜æ²¿ç€â€œæ•°æ®é©±åŠ¨â€çš„æ–¹å¼æ€è€ƒï¼Œé¿å…ç›´æŽ¥æŽ¥è§¦ DOMï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬ç¡®å®žè¦è¿™ä¹ˆåšã€‚ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åŽç­‰å¾… Vue å®Œæˆæ›´æ–° DOM ï¼Œå¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åŽç«‹å³ä½¿ç”¨ Vue.nextTick(callback) ã€‚è¿™æ ·å›žè°ƒå‡½æ•°åœ¨ DOM æ›´æ–°å®ŒæˆåŽå°±ä¼šè°ƒç”¨ã€‚æ·±å…¥å“åº”å¼åŽŸç† ä¸ªäººç†è§£:vueè¿™ä¹ˆåšæ˜¯å› ä¸ºé¢‘ç¹çš„æ›´æ–°domæ˜¯ç‰¹åˆ«è€—è´¹æ€§èƒ½çš„ï¼Œæ‰€ä»¥æžäº†ä¸€ä¸ªæ‰¹å¤„ç†æ›´æ–°ï¼ŒæŠŠæ‰€æœ‰çš„updateæ“ä½œæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œæ ˆçš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ä¸€ä¸ªæ¯”è¾ƒå…¸åž‹çš„åœºæ™¯ï¼Œcreatedå›žè°ƒé‡Œæ˜¯æ— æ³•ç›´æŽ¥é€šè¿‡this.$refsèŽ·å–åˆ°ç”¨refå‘½åçš„å­ç»„ä»¶çš„ï¼Œåªæœ‰é€šè¿‡$nextTickæ‰èƒ½è®¿é—®åˆ°ã€‚è¿˜æœ‰æ¯”å¦‚dialogé‡Œæœ‰ä¸€ä¸ªæ­¥éª¤æ¡ç»„ä»¶ï¼Œåœ¨æ¯æ¬¡æ‰“å¼€å¯¹è¯æ¡†éƒ½æƒ³è§¦å‘æ­¥éª¤1çš„åŠ¨ä½œã€‚å¦‚æžœç›´æŽ¥å†™step=0;step=1;æ˜¯ä¸ä¼šæœ‰å˜åŒ–çš„ï¼Œå› ä¸ºæ•´ä¸ªå‡½æ•°æ‰§è¡Œå®Œä¹‹å‰DOMéƒ½ä¸ä¼šåˆ·æ–°ã€‚æŠŠstep=1æ”¾åˆ°$nextTické‡Œå°±å¯ä»¥äº†]]></content>
      <tags>
        <tag>vue</tag>
        <tag>ç»„ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[certbot+letsencrypté…ç½®å…è´¹å•è¯ä¹¦å¤šåŸŸåsslè¯ä¹¦]]></title>
    <url>%2F2018%2F01%2F03%2Fcertbot-letsencrypt%E9%85%8D%E7%BD%AEssl%E8%AF%81%E4%B9%A6%2F</url>
    <content type="text"><![CDATA[å‰äº›å¤©çœ‹åˆ°å¾®ä¿¡å…¬ä¼—å¹³å°å®˜æ–¹å…¬å‘Šå…³äºŽå…¬ä¼—å¹³å°æŽ¥å£ä¸å†æ”¯æŒHTTPæ–¹å¼è°ƒç”¨çš„å…¬å‘Šä¹‹åŽå†³å®šæŠŠé¡¹ç›®çš„åè®®ä»Žhttpæ”¹æˆhttps,äºŽæ˜¯å¼€å§‹åœ¨ç½‘ä¸ŠæŸ¥,å®Œæˆä¹‹åŽæ€»ç»“äº†ä¸€ç‚¹ç»éªŒ æœ¬æ–‡æ¼”ç¤ºçš„æ˜¯é€šç”¨è¯ä¹¦,å³åœ¨certbotå‘½ä»¤ä¸­ä¸éœ€è¦æŒ‡å®š--apacheæˆ–è€…--nginxä¹‹ç±»,åªéœ€è¦åœ¨å®Œæˆè¯ä¹¦ç”Ÿæˆä¹‹åŽåœ¨æœåŠ¡å™¨é…ç½®æ–‡ä»¶é‡Œè¿›è¡Œå¼•ç”¨å³å¯ Letâ€™s EncryptLetâ€™s Encrypt è®¤è¯ç­¾å‘ä¸ºæ¯3ä¸ªæœˆä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯æ¯ 90 å¤©å¿…é¡»æ›´æ–°ï¼ˆrenewï¼‰ä¸€æ¬¡ã€‚å–å¾—è®¤è¯çš„è¿‡ç¨‹éœ€è¦è¿›ä¸»æœºå®‰è£ä»£ç†ç¨‹åº:certbot,ä¸‹é¢ä»¥ubuntuä¸ºä¾‹: å®‰è£… 12345$ sudo apt-get update$ sudo apt-get install software-properties-common$ sudo add-apt-repository ppa:certbot/certbot$ sudo apt-get update$ sudo apt-get install certbot ç”Ÿæˆè¯ä¹¦ 1$ sudo certbot certonly æ­¤æ—¶ä¼šå‡ºçŽ°é€‰é¡¹,æŒ‰ç…§æç¤ºé€‰æ‹©å³å¯ è¯ä¹¦è‡ªåŠ¨ç»­æœŸå¯ä»¥ä½¿ç”¨1certbot renew --force-renew æ‰‹åŠ¨å¼ºåˆ¶ä¸ºè¯ä¹¦ç»­æœŸå¦‚æžœå‡ºçŽ°ä»¥ä¸‹æç¤ºåˆ™è¯´æ˜Žæ›´æ–°æˆåŠŸ1Congratulations, all renewals succeeded. The following certs have been renewed: ä½†ä¸ºäº†æ›´æ–¹ä¾¿,é€šå¸¸ä½¿ç”¨crontab -eç¼–è¾‘å®šæ—¶ä»»åŠ¡,å¹¶åŠ å…¥10 0 1 * * certbot renew --force-renew â€œé‡å¯æœåŠ¡å™¨å‘½ä»¤â€ å®žçŽ°æ¯ä¸ªæœˆ1å·0ç‚¹è‡ªåŠ¨ç»­æœŸ åœ¨æœåŠ¡å™¨é…ç½®ç›¸å…³è¯ä¹¦apache2å¼€å¯SSL tips:å¦‚æžœæœ‰å¤šä¸ªåŸŸå å¯ä»¥ç”¨è¿‡åœ¨Please enter in your domain name(s) (comma and/or space separated) (Enter &#39;c&#39; to cancel):æ­¥éª¤é€šè¿‡,æ¥åˆ†éš”åŸŸå å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ç›´æŽ¥ç”Ÿæˆå¤šä¸ªåŸŸåçš„è¯ä¹¦ 1$ sudo certbot certonly --webroot -w /var/www/example -d example.com -d www.example.com -w /var/www/thing -d thing.is -d m.thing.is ç”Ÿæˆçš„è¯ä¹¦é€šå¸¸ä¿å­˜åœ¨/etc/letsencrypt/live/ç›®å½•ä¸‹ æ³¨æ„:å¦‚æžœå¤±è´¥è¶…è¿‡5æ¬¡ä¼šè¢«æœåŠ¡å™¨å±è”½1å°æ—¶ åŽè®°ä»¥ä¸Šæ“ä½œå®ŒæˆåŽåœ¨pcç«¯æµè§ˆå™¨å¯æ­£å¸¸è¯»å–è¯ä¹¦å¹¶æ˜¾ç¤ºç»¿è‰²é”,ä½†åœ¨éƒ¨åˆ†ç§»åŠ¨ç«¯æµè§ˆå™¨ä¸Šå¯èƒ½æç¤ºè¯ä¹¦æ— æ•ˆ,åŽŸå› å¯ä»¥å‚è€ƒåˆå¹¶SSLæœåŠ¡å™¨è¯ä¹¦å’ŒCAåŒ…(è¯ä¹¦é“¾æ–‡ä»¶) ç®€å•æ¥è¯´,å¯ä»¥é€šè¿‡åˆå¹¶SSLæœåŠ¡å™¨è¯ä¹¦å’ŒCAåŒ…(è¯ä¹¦é“¾æ–‡ä»¶)å³:å¤åˆ¶fullchain.pemé‡Œçš„å†…å®¹è‡³cert.pem,é‡å¯æœåŠ¡å™¨å³å¯]]></content>
      <tags>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°å½•ä¸€æ¬¡centos6æŽ’æŸ¥80ç«¯å£æ— æ³•è®¿é—®çš„é—®é¢˜]]></title>
    <url>%2F2017%2F12%2F28%2F%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1centos6%E6%8E%92%E6%9F%A580%E7%AB%AF%E5%8F%A3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[å¤§æ¦‚æ˜¯ä¸€ä¸ªæœˆå‰çš„äº‹æƒ…äº†,æœ€è¿‘å·¥ä½œç¹å¿™,æš‚æ—¶å¿˜äº†è®°å½•â€¦ å½“æ—¶çš„æƒ…å†µå¤§æ¦‚æ˜¯è¿™æ ·:å®¢æˆ·çš„æœºæˆ¿å¼€é€šçš„æ˜¯å¹¿ç”µç½‘çš„å›ºå®šIP,æœåŠ¡å™¨ç³»ç»Ÿæ˜¯ centos6.8,å·²çŸ¥ 80 ç«¯å£å’Œ 22 ç«¯å£å¯¹å¤–æ˜¯å¼€æ”¾å¹¶èƒ½è®¿é—®çš„;æœåŠ¡å™¨ä¸Šæœ‰ä¸¤ä¸ª web é¡¹ç›®,ä¸€ä¸ªå¯¹åº” 80 ç«¯å£,ä¸€ä¸ªå¯¹åº” 8080 ç«¯å£web æœåŠ¡å™¨æ˜¯ apache2.2,ç›®å‰ç›‘å¬äº† 80 å’Œ 8080 ç«¯å£,httpd-vhosts.conf ä¸‹æœ‰ä¸¤ä¸ªè™šæ‹Ÿæœºé…ç½®,åˆ†åˆ«å¯¹åº” 80 å’Œ 8080 ç«¯å£;é˜²ç«å¢™çŠ¶æ€:service iptables status(iptablesï¼šæœªè¿è¡Œé˜²ç«å¢™ã€‚)SELinux çŠ¶æ€:getenforce (Disabled)é¡¹ç›®ç›®å½•çš„è®¿é—®æƒé™æ˜¯è¶³å¤Ÿçš„1234567891011121314151617181920212223242526272829lsof -i :8080httpd 22357 root 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 22431 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 22433 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 22478 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 22668 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN) httpd 22690 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 23028 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 23030 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 23760 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 23761 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 23762 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)httpd 23855 www 6u IPv6 27111118 0t0 TCP *:webcache (LISTEN)netstat -nlptActive Internet connections (only servers) Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program nametcp 0 0 0.0.0.0:58726 0.0.0.0:* LISTEN 2630/rpc.statdtcp 0 0 0.0.0.0:3306 0.0.0.0:* LISTEN 6324/mysqldtcp 0 0 0.0.0.0:111 0.0.0.0:* LISTEN 2574/rpcbindtcp 0 0 0.0.0.0:21 0.0.0.0:* LISTEN 3235/pure-ftpd (SER tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 3941/sshdtcp 0 0 127.0.0.1:631 0.0.0.0:* LISTEN 2668/cupsdtcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN 3109/sendmailtcp 0 0 :::34760 :::* LISTEN 2630/rpc.statdtcp 0 0 :::111 :::* LISTEN 2574/rpcbindtcp 0 0 :::8080 :::* LISTEN 22357/httpdtcp 0 0 :::80 :::* LISTEN 22357/httpdtcp 0 0 :::21 :::* LISTEN 3235/pure-ftpd (SER tcp 0 0 :::22 :::* LISTEN 3941/sshdtcp 0 0 ::1:631 :::* LISTEN 2668/cupsdtcp 0 0 :::443 :::* LISTEN 22357/httpd é—®é¢˜: æœåŠ¡å™¨çš„ 8080 ç«¯å£åœ¨æœ¬åœ°å¯ä»¥é€šè¿‡ curl å‘½ä»¤(curl http://localhost:8080)èŽ·å–åˆ° index.php çš„å†…å®¹,ä½†æ˜¯å¤–ç½‘æ— æ³•é€šè¿‡ ip:port çš„å½¢å¼è®¿é—®åˆ° æœ€åŽé”å®šé—®é¢˜:8080ç«¯å£è¢«æœºæˆ¿é™åˆ¶äº†â€¦ NOTE:è¿™ç§æƒ…å†µé€šå¸¸æŽ’æŸ¥æœºæˆ¿æˆ–è¿è¥å•†æ˜¯å¦å¯¹æ— æ³•è®¿é—®çš„ç«¯å£è¿›è¡Œäº†é™åˆ¶é™„ä¸Šæœ¬äººå½“æ—¶åœ¨v2exä¸Šå‘çš„ä¸»é¢˜]]></content>
      <tags>
        <tag>centos6</tag>
        <tag>ç«¯å£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SoapClientçš„ä¸€ç‚¹æ€»ç»“]]></title>
    <url>%2F2017%2F12%2F18%2FSoapClient%E7%9A%84%E4%B8%80%E7%82%B9%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[è¿‘æœŸåœ¨å¼€å‘ä¸€ä¸ªå°åž‹çš„é…’åº—è®¢æˆ¿ç³»ç»Ÿ åº”ç”¨åœºæ™¯:ç”±äºŽæ˜¯åœ¨å…¬å¸ä¹‹å‰ä¸€ä¸ªè®¢æˆ¿ç³»ç»ŸåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹,å› æ­¤å·¥ä½œé‡ä¸ç®—å¤§,ä½†éœ€è¦åœ¨ç³»ç»Ÿä¸­å¤šä¸ªä½ç½®å’Œé…’åº—æ–¹æä¾›çš„å¦ä¸€ä¸ªPMSç³»ç»Ÿçš„ä¿¡æ¯è¿›è¡Œå¯¹æŽ¥(éƒ¨åˆ†æ•°æ®éœ€è¦åŒæ­¥[åº“å­˜,æˆ¿é—´ç¼–å·,è®¢å•ä¿¡æ¯ç­‰ç­‰]),æŽ¥å£ä½¿ç”¨xmlæ ¼å¼è¿›è¡Œæ•°æ®ä¼ é€’,åŽç«¯å¼€å‘è¯­è¨€æ˜¯php é—®é¢˜:å¼€å‘ä¸­é‡åˆ°çš„ä¸€ä¸ªå‘å°±æ˜¯ä½¿ç”¨SoapClientåœ¨è°ƒç”¨PMSç³»ç»ŸæŽ¥å£çš„æ—¶å€™ä¼šå‡ºçŽ°é—´æ­‡æ€§404(Solution: Soap WSDL Error - â€œfailed to load external entityâ€) è§£å†³æ–¹æ³•:å‘PMSæŽ¥å£æä¾›æ–¹ååº”è¿™ä¸ªæƒ…å†µä¹‹åŽé‚£è¾¹è¯´æŽ¥å£æ­£å¸¸,åŽæ¥ç½‘ä¸ŠæŸ¥é˜…æ‰å‘çŽ°éœ€è¦ä½¿ç”¨libxml_disable_entity_loader(false)è¿™ä¸ªå‡½æ•°æ¥æ‰“å¼€entity_loader,éšå³é—®é¢˜è§£å†³.è¯¥å‡½æ•°é€šå¸¸æ·»åŠ åœ¨éœ€è¦ä½¿ç”¨SoapClientå®žä¾‹çš„è„šæœ¬ä¸Šæ–¹]]></content>
      <tags>
        <tag>Soap</tag>
        <tag>æŽ¥å£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[phpexcelè¸©å‘è®°]]></title>
    <url>%2F2017%2F12%2F01%2Fphpexcel%E8%B8%A9%E5%9D%91%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨ä½¿ç”¨phpexcelæ‰©å±•å¤„ç†è¡¨æ ¼å¯¼å…¥çš„æ—¶å€™,é‡åˆ°ä¸¤ä¸ªå‘,çŽ°åšä»¥ä¸‹è®°å½• å‘ä¸€:excelè¡¨ä¸­çš„å¯Œæ–‡æœ¬å¯¼å…¥åŽæ•°æ®å§‹ç»ˆä¸å¯¹ è§£å†³æ–¹æ³•:å‡è®¾$tempä¸ºå¾ªçŽ¯è¯»å–çš„æ¯åˆ—æ•°æ®å€¼,åˆ¤æ–­æ˜¯å¦æ˜¯PHPExcel_RichTextç±»çš„å®žä¾‹,å¦‚æžœæ˜¯,åˆ™è°ƒç”¨$tempè‡ªèº«çš„æ–¹æ³•__toString()è½¬æ¢,ä»£ç å¦‚ä¸‹: 1if ($temp instanceof PHPExcel_RichText) $temp = $temp-&gt;__toString(); å‘äºŒ:excelè¡¨ä¸­çš„æ—¥æœŸå¯¼å…¥åŽå˜æˆäº†floatç±»åž‹çš„å€¼ è§£å†³æ–¹æ³•:å‡è®¾$tempä¸ºå¾ªçŽ¯è¯»å–çš„æ¯åˆ—æ•°æ®å€¼,å‡è®¾æ—¥æœŸæ‰€åœ¨åˆ—ä¸ºDä»£ç å¦‚ä¸‹(è¿™é‡Œçš„ifä»…ä»…æ˜¯ç”¨æ¥åˆ¤æ–­æ—¥æœŸæ˜¯å¦ä¸ºç©º,å¦‚æžœä¸åˆ¤æ–­,ä¸ºç©ºæ—¶ä¼šè‡ªåŠ¨ç”¨å½“å‰æ—¶é—´å¡«å……,æ ¹æ®å®žé™…ä¸šåŠ¡å†³å®š): 12345678910if($k=='D')&#123;//æŒ‡å®šDåˆ—ä¸ºæ—¶é—´æ‰€åœ¨åˆ— $date = $objPHPExcel-&gt;getActiveSheet()-&gt;getCell("$k$j")-&gt;getValue(); if($date)&#123; $temp = date("Y-m-d", PHPExcel_Shared_Date::ExcelToPHP($date)); &#125;else&#123; $temp = ''; &#125;&#125;else&#123; $temp = $objPHPExcel-&gt;getActiveSheet()-&gt;getCell("$k$j")-&gt;getValue();&#125; ç›®å‰æš‚æœªå‘çŽ°å…¶ä»–å‘]]></content>
      <tags>
        <tag>php</tag>
        <tag>excel</tag>
        <tag>æ‰©å±•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸ªæŠ•ç¥¨é¡¹ç›®çš„æ€»ç»“]]></title>
    <url>%2F2017%2F11%2F20%2F%E4%B8%80%E4%B8%AA%E6%8A%95%E7%A5%A8%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å¼€å‘äº†ä¸€ä¸ªåªæœ‰3ä¸ªé¡µé¢çš„å¾®ä¿¡æŠ•ç¥¨å°é¡¹ç›®åŸºæœ¬æµç¨‹:ä¸€ä¸ªå¾®ä¿¡å·ä¸€å¤©åªèƒ½å¯¹ä¸€ä¸ªå‚ä¸Žè€…æŠ•ä¸€æ¬¡ç¥¨ä¸”ä¸€å¤©æ€»å…±å¯ä»¥å¯¹ä¸åŒå‚ä¸Žè€…æŠ•10æ¬¡ç¥¨é¦–é¡µå†…å®¹:å±•ç¤ºæ‰€æœ‰æŠ•ç¥¨å‚ä¸Žè€…ä»¥åŠå…¶å¾—ç¥¨æ•°,æŒ‰ç…§ç¼–å·æŽ’åº(æ”¯æŒç‚¹å‡»æŠ•ç¥¨)æŽ’è¡Œé¡µå†…å®¹:å±•ç¤ºæ‰€æœ‰æŠ•ç¥¨å‚ä¸Žè€…ä»¥åŠå…¶å¾—ç¥¨æ•°,æŒ‰ç…§å¾—ç¥¨æ•°æŽ’åºè¯¦æƒ…é¡µå†…å®¹:å±•ç¤ºæŒ‡å®šå‚ä¸Žè€…ä»¥åŠå…¶å¾—ç¥¨æ•°(æ”¯æŒç‚¹å‡»æŠ•ç¥¨)åŽå°ç•¥è¿‡â€¦é¡¹ç›®ä¸Šçº¿åŽæœåŠ¡å™¨cpué•¿æ—¶é—´è´Ÿè½½100%,ä»”ç»†æŸ¥çœ‹åŽå‘çŽ°å‡ ä¸ªä¸»è¦é—®é¢˜: é¦–é¡µå’Œè¯¦æƒ…é¡µjsä¸­æ²¡æœ‰å¯¹è§¦å‘å¼‚æ­¥è¯·æ±‚çš„è¯·æ±‚ä¸­çŠ¶æ€(å·²å‘å‡ºè¯·æ±‚ä¸”æœªæ”¶åˆ°å“åº”[æœç´¢,ä¸‹ä¸€é¡µåŠ è½½,æŠ•ç¥¨æ“ä½œ])æ²¡æœ‰ç¦ç”¨å¤„ç†å’Œæç¤º,å¯èƒ½å¯¼è‡´ç”¨æˆ·è¿žç»­ç‚¹å‡»æ“ä½œ,æŒ‚èµ·å¤šä¸ªè¯·æ±‚è§£å†³æ–¹æ³•:æ·»åŠ å¯¹åº”è¯·æ±‚ä¸­çš„çŠ¶æ€,åœ¨å‘å‡ºè¯·æ±‚åŽ,æ”¶åˆ°å“åº”å‰éƒ½æ— æ³•å†æ¬¡å‘å‡ºç›¸åŒè¯·æ±‚ ä¹‹å‰æœ‰å¯¹ä¸‰ä¸ªé¡µé¢çš„è®¿é—®é‡è¿›è¡Œç»Ÿè®¡,ä½†ç”¨çš„æ˜¯ç®€å•ç²—æš´æ¯æ¬¡è®¿é—®éƒ½ç›´æŽ¥æ›´æ–°æ•°æ®åº“çš„å“åº”å­—æ®µå€¼,å¯¼è‡´å¹¶å‘å¢žåŠ æ—¶æ•°æ®åº“å†™å…¥æ¬¡æ•°è¿‡å¤šè§£å†³æ–¹æ³•:é…ç½®ä¸€ä¸ªå€¼,æ¯æ¬¡è¯·æ±‚æ—¶å…ˆå°†æ€»è®¿é—®é‡+1,å†åˆ¤æ–­å¦‚æžœç­‰äºŽé…ç½®å€¼,åˆ™æ›´æ–°æ•°æ®åº“çš„æ€»è®¿é—®é‡å¹¶æ¸…ç©ºç¼“å­˜,åä¹‹å†™å…¥ç¼“å­˜ å¿˜äº†å…³é—­TPæ¡†æž¶çš„è°ƒè¯•æ¨¡å¼(è°ƒè¯•æ¨¡å¼ä¼šä½¿æ¨¡æ¿ç¼“å­˜å’Œå­—æ®µç¼“å­˜å¤±æ•ˆ)è§£å†³æ–¹æ³•:å…³é—­è°ƒè¯•æ¨¡å¼ mysqlæ•°æ®è¡¨çš„è”åˆç´¢å¼•æ²¡æœ‰ç”Ÿæ•ˆ(åŽŸå› å¾…å®š)]]></content>
      <tags>
        <tag>å¹¶å‘</tag>
        <tag>ç¼“å­˜</tag>
        <tag>ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[abæµ‹è¯•ä¸­å¹¶å‘é‡å¯¼è‡´çš„æ‹’ç»é—®é¢˜]]></title>
    <url>%2F2017%2F11%2F15%2Fab%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%B9%B6%E5%8F%91%E9%87%8F%E5%AF%BC%E8%87%B4%E7%9A%84%E6%8B%92%E7%BB%9D%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©å¯¹ä¸€ä¸ªå¾®ä¿¡æŠ•ç¥¨çš„å°é¡¹ç›®è¿›è¡Œabæµ‹è¯•çŽ¯å¢ƒ:windows 10+cmd(ç®¡ç†å‘˜èº«ä»½)é—®é¢˜:åœ¨è¾“å…¥äº†ab -n 5000 -c 500 http://hostname/å¹¶enterä¹‹åŽç­‰å¾…ç‰‡åˆ»å‡ºçŽ°äº†apr_socket_connect():ç”±äºŽç›®æ ‡è®¡ç®—æœºç§¯æžæ‹’ç»ï¼Œæ— æ³•è¿žæŽ¥ã€‚(730061)åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†å…¶ä»–äººçš„æ–¹æ³•,å‚è€ƒåŽ,é—®é¢˜è§£å†³è§£å†³æ–¹æ³•:æ‰¾åˆ°http.conf,æ‰“å¼€,æ‰¾åˆ°å…³äºŽhttpd-mpm.confçš„å¼•ç”¨é…ç½®,å¦‚æžœæ²¡æœ‰å¼•ç”¨,åˆ™åŽ»æŽ‰#,åä¹‹åˆ™æ— è§†,æ‰“å¼€httpd-mpm.confæ–‡ä»¶,å°†å…¶ä¸­çš„ThreadsPerChildå‚æ•°å€¼è°ƒå¤§,é‡å¯Apacheå³å¯ è¡¥å……:åœ¨åŽç»­çš„æµ‹è¯•ä¸­é‡åˆ°äº†apr_poll: The timeout specified has expired (70007)çš„æç¤ºè§£å†³æ–¹æ³•:ä½¿ç”¨-kå‚æ•°(Connection: Keep-Alive)]]></content>
      <tags>
        <tag>åŽ‹åŠ›æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[headæ ‡ç­¾ä¸­è‡ªåŠ¨è®¾ç½®ieå†…æ ¸ç‰ˆæœ¬çš„å†™æ³•]]></title>
    <url>%2F2017%2F11%2F11%2Fhead%E6%A0%87%E7%AD%BE%E4%B8%AD%E8%87%AA%E5%8A%A8%E8%AE%BE%E7%BD%AEie%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%E7%9A%84%E5%86%99%E6%B3%95%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å¼€å‘ä¸­é‡åˆ°åŽå°ç®¡ç†ç³»ç»Ÿéƒ¨åˆ†æ ·å¼,jså¯¹IEæµè§ˆå™¨ä¸å…¼å®¹çš„æƒ…å†µ,æœ€åŽé€šè¿‡åœ¨headæ ‡ç­¾ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç å®žçŽ°è‡ªåŠ¨è®¾ç½®IEå†…æ ¸ç‰ˆæœ¬è§£å†³: 123&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" /&gt;&lt;meta name="renderer" content="webkit"&gt;&lt;meta http-equiv="X-UA-Compatible" content="IE=9" /&gt;]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>IE</tag>
        <tag>å…¼å®¹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨apache2åå‘ä»£ç†è®¿é—®google]]></title>
    <url>%2F2017%2F10%2F14%2F%E4%BD%BF%E7%94%A8apache2%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AEgoogle%2F</url>
    <content type="text"><![CDATA[å¼•è¨€åˆšåˆšåœ¨v2exä¸Šçœ‹åˆ°ä¸€ç¯‡ç”¨nginxåšåå‘ä»£ç†è®¿é—®googleçš„å¸–å­,å‡ºäºŽå¥½å¥‡,è¯•äº†è¯•ç”¨apacheè¿›è¡Œåå‘ä»£ç†è®¿é—®google,æžœç„¶å¾ˆå¥½çŽ©! å‡†å¤‡å·¥ä½œ: apacheæœåŠ¡å™¨éœ€è¦å®‰è£…proxyç›¸å…³æ¨¡å—,å¦‚æžœæ˜¯ubuntuçŽ¯å¢ƒå¯ä»¥ç›´æŽ¥ä½¿ç”¨å‘½ä»¤sudo a2enmod æ¨¡å—åç§°è¿›è¡Œå®‰è£…,æ¨¡å—å¯ä»¥åœ¨/etc/apache2/mods-available/ç›®å½•ä¸‹æŸ¥çœ‹,å®‰è£…å¥½çš„æ¨¡å—å¯ä»¥åœ¨/etc/apache2/mods-enabled/é‡ŒæŸ¥çœ‹è¿™é‡Œç›´æŽ¥ä¸Šæœ¬äººçš„é…ç½®:&lt;VirtualHost *:443&gt; ServerName facebook.smarthippo.club SSLEngine on SSLCertificateFile &quot;/etc/letsencrypt/archive/facebook.smarthippo.club/cert1.pem&quot; SSLCertificateKeyFile &quot;/etc/letsencrypt/archive/facebook.smarthippo.club/privkey1.pem&quot; SetEnvIf User-Agent â€œ.*MSIE.*â€ \ nokeepalive ssl-unclean-shutdown \ downgrade-1.0 force-response-1.0 SSLProxyEngine On ProxyPass / https://www.facebook.com/ ProxyPassReverse / https://www.facebook.com/ &lt;/VirtualHost&gt; &lt;VirtualHost *:443&gt; ServerName google.smarthippo.club SSLEngine on SSLCertificateFile &quot;/etc/letsencrypt/archive/google.smarthippo.club/cert1.pem&quot; SSLCertificateKeyFile &quot;/etc/letsencrypt/archive/google.smarthippo.club/privkey1.pem&quot; SetEnvIf User-Agent â€œ.*MSIE.*â€ \ nokeepalive ssl-unclean-shutdown \ downgrade-1.0 force-response-1.0 SSLProxyEngine On ProxyPass / https://www.google.com.hk/ ProxyPassReverse / https://www.google.com.hk/ &lt;/VirtualHost&gt; So,Google,Wiki,å°±æ˜¯è¿™ä¹ˆç®€å•~ å¤‡æ³¨:è¿™ç¯‡æ–‡ç« çš„å‰æå½“ç„¶æ˜¯æœ‰ä¸€ä¸ªå›½å¤–çš„æœåŠ¡å™¨,å®‰åˆ©ä¸€æ³¢vultr(ä»·æ ¼åˆç†,ä¸”ç¨³å®š,æŒ‰å¤©è®¡è´¹)å¯ä»¥é€šè¿‡æ·»åŠ å­åŸŸåçš„æ–¹å¼å®žçŽ°å¯¹ä¸åŒå¢™å¤–ç«™ç‚¹çš„è®¿é—®,è¯¦è§ç¬¬äºŒä¸ªé…ç½®å®‰è£…sslè¯ä¹¦ç½‘ä¸Šå¤ªå¤š,å°±ä¸å†™äº† ç›®å‰å­˜åœ¨çš„é—®é¢˜: åœ¨åå‘ä»£ç†ç«™ç‚¹ä¸­å¦‚æžœæœ‰è·³è½¬åˆ°å…¶ä»–è¢«å¢™ç«™ç‚¹çš„é“¾æŽ¥,ä¾ç„¶æ— æ³•è®¿é—® éƒ¨åˆ†ç½‘ç«™å¯¹æœºå™¨è®¿é—®çš„è¯·æ±‚æœ‰é™åˆ¶,æ¯”å¦‚google,è™½ç„¶é¦–é¡µå¯ä»¥æ­£å¸¸è®¿é—®,ä½†å…¶ä»–é¡µé¢å¯èƒ½ä¼šè®¿é—®ä¸äº†,è·³è½¬åˆ°ipv4.google.comè¿›è¡ŒäººæœºéªŒè¯ æ­£åœ¨å°è¯•ç”¨apacheçš„è´Ÿè½½å‡è¡¡è§£å†³ç¬¬äºŒä¸ªé—®é¢˜â€¦]]></content>
      <tags>
        <tag>ç¿»å¢™</tag>
        <tag>åå‘ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€äº›å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼]]></title>
    <url>%2F2017%2F10%2F14%2F%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ç”¨phpspideræŠ“å–ç½‘é¡µ,é™¤äº†ç”¨xpathåŒ¹é…æ ‡ç­¾å¤–,å¶å°”ä¹Ÿä¼šç”¨åˆ°æ­£åˆ™è¡¨è¾¾å¼,è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹å¸¸ç”¨çš„æ­£åˆ™å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829$str=preg_replace("/\s+/", " ", $str); //è¿‡æ»¤å¤šä½™å›žè½¦$str=preg_replace("/&lt;[ ]+/si","&lt;",$str); //è¿‡æ»¤&lt;__("&lt;"å·åŽé¢å¸¦ç©ºæ ¼)$str=preg_replace("/&lt;\!--.*?--&gt;/si","",$str); //æ³¨é‡Š$str=preg_replace("/&lt;(\!.*?)&gt;/si","",$str); //è¿‡æ»¤DOCTYPE$str=preg_replace("/&lt;(\/?html.*?)&gt;/si","",$str); //è¿‡æ»¤htmlæ ‡ç­¾$str=preg_replace("/&lt;(\/?head.*?)&gt;/si","",$str); //è¿‡æ»¤headæ ‡ç­¾$str=preg_replace("/&lt;(\/?meta.*?)&gt;/si","",$str); //è¿‡æ»¤metaæ ‡ç­¾$str=preg_replace("/&lt;(\/?body.*?)&gt;/si","",$str); //è¿‡æ»¤bodyæ ‡ç­¾$str=preg_replace("/&lt;(\/?link.*?)&gt;/si","",$str); //è¿‡æ»¤linkæ ‡ç­¾$str=preg_replace("/&lt;(\/?form.*?)&gt;/si","",$str); //è¿‡æ»¤formæ ‡ç­¾$str=preg_replace("/cookie/si","COOKIE",$str); //è¿‡æ»¤COOKIEæ ‡ç­¾$str=preg_replace("/&lt;(applet.*?)&gt;(.*?)&lt;(\/applet.*?)&gt;/si","",$str); //è¿‡æ»¤appletæ ‡ç­¾$str=preg_replace("/&lt;(\/?applet.*?)&gt;/si","",$str); //è¿‡æ»¤appletæ ‡ç­¾$str=preg_replace("/&lt;(style.*?)&gt;(.*?)&lt;(\/style.*?)&gt;/si","",$str); //è¿‡æ»¤styleæ ‡ç­¾$str=preg_replace("/&lt;(\/?style.*?)&gt;/si","",$str); //è¿‡æ»¤styleæ ‡ç­¾$str=preg_replace("/&lt;(title.*?)&gt;(.*?)&lt;(\/title.*?)&gt;/si","",$str); //è¿‡æ»¤titleæ ‡ç­¾$str=preg_replace("/&lt;(\/?title.*?)&gt;/si","",$str); //è¿‡æ»¤titleæ ‡ç­¾$str=preg_replace("/&lt;(object.*?)&gt;(.*?)&lt;(\/object.*?)&gt;/si","",$str); //è¿‡æ»¤objectæ ‡ç­¾$str=preg_replace("/&lt;(\/?objec.*?)&gt;/si","",$str); //è¿‡æ»¤objectæ ‡ç­¾$str=preg_replace("/&lt;(noframes.*?)&gt;(.*?)&lt;(\/noframes.*?)&gt;/si","",$str); //è¿‡æ»¤noframesæ ‡ç­¾$str=preg_replace("/&lt;(\/?noframes.*?)&gt;/si","",$str); //è¿‡æ»¤noframesæ ‡ç­¾$str=preg_replace("/&lt;(i?frame.*?)&gt;(.*?)&lt;(\/i?frame.*?)&gt;/si","",$str); //è¿‡æ»¤frameæ ‡ç­¾$str=preg_replace("/&lt;(\/?i?frame.*?)&gt;/si","",$str); //è¿‡æ»¤frameæ ‡ç­¾$str=preg_replace("/&lt;(script.*?)&gt;(.*?)&lt;(\/script.*?)&gt;/si","",$str); //è¿‡æ»¤scriptæ ‡ç­¾$str=preg_replace("/&lt;(\/?script.*?)&gt;/si","",$str); //è¿‡æ»¤scriptæ ‡ç­¾$str=preg_replace("/javascript/si","Javascript",$str); //è¿‡æ»¤scriptæ ‡ç­¾$str=preg_replace("/vbscript/si","Vbscript",$str); //è¿‡æ»¤scriptæ ‡ç­¾$str=preg_replace("/on([a-z]+)\s*=/si","On\\1=",$str); //è¿‡æ»¤scriptæ ‡ç­¾$str=preg_replace("/&amp;#/si","&amp;ï¼ƒ",$str); //è¿‡æ»¤scriptæ ‡ç­¾ï¼Œå¦‚javaSCript:alert]]></content>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿‘å†µ]]></title>
    <url>%2F2017%2F09%2F19%2F%E8%BF%91%E5%86%B5%2F</url>
    <content type="text"><![CDATA[ä»Šä¸‹åˆè¯·å‡åŽ»ðŸ¥æ£€æŸ¥è…°æ¤Ž,å¥½åœ¨æ²¡ä»€ä¹ˆå¤§é—®é¢˜,ä½†æ˜¯åŒ»ç”Ÿå»ºè®®çš„ä¸è¦é•¿æ—¶é—´åâ€¦å¯¹æˆ‘æ¥è¯´ä¹Ÿåªèƒ½å°½å¯èƒ½ç¼©çŸ­ä¸€æ¬¡è¿žç»­åçš„æ—¶é—´ä»Žä¸Šä¸ªæ˜ŸæœŸå¼€å§‹åœ¨åšä¸€ä¸ªå°åž‹çš„å¾®ä¿¡ç«¯é¤é¥®ç›¸å…³å•†åŸŽå¼€å‘æˆ‘æ‰“ç®—åœ¨è¿™ä¸ªé¡¹ç›®ä¸­å°è¯•ä½¿ç”¨phpæœåŠ¡ç«¯æ¸²æŸ“é¡µé¢+vue.jså¤„ç†å‰ç«¯æ‰€æœ‰æ•°æ®äº¤äº’,æ•°æ®åº“è¿˜æ˜¯mysql,è¿è¡ŒçŽ¯å¢ƒä¾ç„¶æ˜¯lampå·¥ä½œä¹‹ä½™å°½é‡å®‰æŽ’ä¸€äº›æ—¶é—´å­¦ä¹ ES6è¯­æ³•,vue.jså•é¡µé¢åº”ç”¨çš„é¡¹ç›®ç»“æž„å’Œvue.jsçš„è·¯ç”±,babelè‡ªåŠ¨ç¼–è¯‘å¼€å‘çŽ¯å¢ƒçš„éƒ¨ç½²ok,å…ˆå°±è¿™æ ·å§1die('Happy Hacking!');]]></content>
      <tags>
        <tag>ç”Ÿæ´»</tag>
        <tag>å·¥ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[tp3.2.3å®žçŽ°æ”¯æŒç‚¹å‡»æŽ’åº]]></title>
    <url>%2F2017%2F09%2F14%2Ftp3-2-3%E5%AE%9E%E7%8E%B0%E7%82%B9%E5%87%BB%E6%8E%92%E5%BA%8F%2F</url>
    <content type="text"><![CDATA[å‡è®¾: Admin/Home/Controller/BaseController.class.phpæ˜¯ä¸€ä¸ªåŸºç¡€æŽ§åˆ¶å™¨ $current_paramså’Œ$inæ˜¯ä¸¤ä¸ªåœ¨Admin/Home/Controller/BaseController.class.phpä¸­ç”¨æ¥ä¿å­˜æŽ¥æ”¶å‚æ•°çš„å±žæ€§,å¹¶ä¸”å·²ç»åœ¨æž„é€ å‡½æ•°ä¸­å¯¹å…¶èµ‹å€¼ Admin/Tpl/Index/footer.htmlæ˜¯å¸ƒå±€ä¸­çš„å…¬å…±éƒ¨åˆ† Public/Model/BaseModel.class.phpæ˜¯å…¬å…±æ¨¡åž‹ è¯·æ±‚ä¸­ç”¨æ¥è¡¨ç¤ºæ¨¡å—,æŽ§åˆ¶å™¨,æ“ä½œçš„å‚æ•°åç§°åˆ†åˆ«ä¸º:m,c,a #searchFormå’Œ#excelFormåˆ†åˆ«ä¸ºæ¡ä»¶æœç´¢formå’Œexcelè¡¨å•å¯¼å‡ºè¯·æ±‚æäº¤æ—¶ç”¨æ¥ä¸´æ—¶ä¿å­˜å’Œä¼ é€’ç­›é€‰æ¡ä»¶çš„form å…¨å±€æ”¹åŠ¨Admin/Home/Controller/BaseController.class.phpæ”¹åŠ¨:æ–°å¢žprotected $current_paramså±žæ€§_initializeæ–¹æ³•å°¾éƒ¨æ–°å¢žä»¥ä¸‹ä»£ç (ç”¨äºŽå¤„ç†ä¼ å…¥çš„æœ‰æ•ˆå‚æ•°):1234unset($this-&gt;current_params['m']);unset($this-&gt;current_params['c']);unset($this-&gt;current_params['a']);$this-&gt;assign('page_url', U(CONTROLLER_NAME.'/'.ACTION_NAME,$this-&gt;current_params)); æŽ§åˆ¶å™¨å°¾éƒ¨æ–°å¢žä»¥ä¸‹æ–¹æ³•:123456789101112131415161718/* * todo:å¤„ç†æŽ’åºè¯·æ±‚ * @param $sort string ç”¨æ¥mysqlæŽ’åºçš„å­—ç¬¦ä¸² * @param $column string ç”¨æ¥æŒ‡å®šæŽ’åºå­—æ®µåç§° * @param $value int æŽ’åºå€¼,1:é¡ºåº;2:å€’åº * @param $table string éœ€è¦æŽ’åºå­—æ®µåœ¨å½“å‰sqlè¯­å¥ä¸­è¡¨çš„åˆ«å * @return string è¿”å›žå¤„ç†åŽçš„$order * */protected function assembleSort($sort,$column,$value,$table)&#123; $order = urldecode($sort); $v_sort[$column] = $value == 1 ? 2 : 1; $v_sort['param_sort'] = $sort; $v_sort['param_column'] = $column; $v_sort['param_value'] = $v_sort[$column]; $v_sort['param_table'] = $table; $this-&gt;assign('sort', $v_sort); return $order;&#125; Admin/Tpl/Index/footer.htmlæ”¹åŠ¨:åœ¨&lt;/body&gt;æ ‡ç­¾å‰æ–°å¢žä»¥ä¸‹ä»£ç :html(ä¿å­˜å½“å‰é¡µé¢å¹¶æºå¸¦é™¤æŽ’åºç›¸å…³å‚æ•°çš„url):1&lt;input type="hidden" id="page_url" value="&#123;&#123;$page_url&#125;&#125;"&gt; js:1234567891011121314151617181920212223242526272829303132333435363738394041424344/* * todo:å…¨å±€ç›‘å¬å¹¶å¤„ç†ç‚¹å‡»æŽ’åºæ“ä½œ * */ $(function()&#123; var form = $('#searchForm'); if(typeof(form) !== 'undefined')&#123; form.append("&lt;input class='excel' type='hidden' name='sort' value='&#123;&#123;$sort.param_sort&#125;&#125;'/&gt;&lt;input class='excel' type='hidden' name='column' value='&#123;&#123;$sort.param_column&#125;&#125;'/&gt;&lt;input class='excel' type='hidden' name='value' value='&#123;&#123;$sort.param_value&#125;&#125;'/&gt;&lt;input class='excel' type='hidden' name='table' value='&#123;&#123;$sort.param_table&#125;&#125;'/&gt;"); &#125; $('th[data-sort=1]').attr('class','sortable').append('ðŸ”»'); $('th[data-sort=2]').attr('class','sortable').append('ðŸ”º'); $('tr').delegate('th','click',function()&#123; var sort = $(this).attr('data-sort'); var param = ``; if(typeof(sort) !== 'undefined')&#123; var order = ``; var column = $(this).attr('data-column'); var table = $(this).attr('data-table') ? $(this).attr('data-table') + '.' : ''; if(sort == 1)&#123; order = 'asc' &#125;else if(sort == 2)&#123; order = 'desc'; &#125; param = `$&#123;table&#125;$&#123;column&#125; $&#123;order&#125;`; var url = $('#page_url').val() + '&amp;sort=' + param + '&amp;column=' + column + '&amp;value=' + sort + '&amp;table=' + table; location.href = url; &#125; &#125;); &#125;); /* * todo:å¤„ç†å¯¼å‡ºexcelæ“ä½œ * */ if(typeof($('#excel')) !== 'undefined')&#123; $('#excel').click(function () &#123; ui.confirm('ç¡®å®šå¯¼å‡ºå—', function () &#123; var eform = $('#excelform'); if ($('#data').find('tr').length &lt; 2) &#123; ui.error('æ²¡æœ‰å¯ä»¥å¯¼å‡ºçš„æ•°æ®'); return false; &#125; eform.html($('.excel').clone()); eform.submit(); &#125;); &#125;); &#125; Public/Model/BaseModel.class.phpæ”¹åŠ¨:ä¿®æ”¹getPageå’ŒgetExcelæ–¹æ³•å¦‚ä¸‹:123456789101112131415161718192021222324/** * todo:èŽ·å–åˆ—è¡¨è®°å½•å¹¶è¿”å›žåˆ†é¡µæ•°æ® * @param $map array ç­›é€‰æ¡ä»¶ * @param $order string æŽ’åºè§„åˆ™ */public function getPage($map, $order = '')&#123; $count = $this-&gt;where($map)-&gt;count(); $page = classPage($count); $row['info'] = $this-&gt;where($map)-&gt;order($order)-&gt;limit($page-&gt;firstRow, $page-&gt;listRows)-&gt;select(); $row['page'] = $page-&gt;show(); return $row;&#125;/** * todo:èŽ·å–å¯¼å‡ºåˆ°excelçš„æ•°æ®é›†åˆ * @param $map array ç­›é€‰æ¡ä»¶ * @param $order string æŽ’åºè§„åˆ™ */public function getExcel($map,$order = '')&#123; $data = $this-&gt;where($map)-&gt;order($order)-&gt;select(); return $data;&#125; Admin/root/static/css/shop_manager.cssæ”¹åŠ¨:åœ¨å°¾éƒ¨æ–°å¢ž(ç”¨äºŽæŽ§åˆ¶å¯ç‚¹å‡»thæ ·å¼):1234.sortable&#123; cursor: pointer; color:orangered;&#125; å±€éƒ¨æ”¹åŠ¨controlleråœ¨ç›¸å…³controllerä¸­çš„åˆ—è¡¨æ–¹æ³•(é€šå¸¸æ˜¯index)ä¸­,æ–°å¢žä¸€è¡Œ:1$order = $this-&gt;assembleSort($this-&gt;in['sort'], $this-&gt;in['column'], $this-&gt;in['value'], $this-&gt;in['table']); å¹¶å°†ä¹‹å‰1$data = $model-&gt;getPage($where); æ”¹ä¸º:1$data = $model-&gt;getPage($where, $order); åœ¨ç›¸å…³æŽ§åˆ¶å™¨ä¸­çš„å¯¼å‡ºåˆ°excelæ–¹æ³•(é€šå¸¸æ˜¯excel)ä¸­,åšä¸Šè¿°ç›¸åŒå¤„ç† viewåœ¨ç›¸å…³viewä¸­,ä¿®æ”¹éœ€è¦æŽ’åºçš„å­—æ®µçš„thæ ‡ç­¾å¦‚ä¸‹:1&lt;th width="180px" data-sort="&#123;&#123;$sort.create_time|default=1&#125;&#125;" data-column="create_time" data-table="A"&gt;æ·»åŠ æ—¶é—´&lt;/th&gt; å‚æ•°å¤‡æ³¨: 1&lt;th width="180px" data-sort="&#123;&#123;$sort.éœ€è¦æŽ’åºçš„å­—æ®µåç§°|default=é»˜è®¤å€¼1:å½“å‰ä¸ºå€’åº,2:å½“å‰ä¸ºé¡ºåº&#125;&#125;" data-column="éœ€è¦æŽ’åºçš„å­—æ®µåç§°" data-table="å¦‚æžœå½“å‰åˆ—è¡¨éœ€è¦é€šè¿‡joinæŸ¥è¯¢,æ­¤å¤„ä¸ºè¯¥å­—æ®µæ‰€å±žçš„è¡¨åˆ«å"&gt;æ·»åŠ æ—¶é—´&lt;/th&gt; å…¶å®ƒå¤‡æ³¨: å¦‚æžœå½“å‰é¡µé¢éœ€è¦æŽ¥æ”¶å‚æ•°,å¦‚:é…é€ç‚¹ä¸‹é¢çš„é…é€å…ƒå‘˜åˆ—è¡¨,åˆ™éœ€è¦åœ¨#searchFormçš„formä¸­æ–°å¢žä¸€ä¸ªinputæ ‡ç­¾:&lt;input type=&quot;hidden&quot; class=&quot;excel&quot; name=&quot;point_id(å‚æ•°åç§°)&quot; value=&quot;(å‚æ•°å€¼)&quot;&gt; åœ¨æ‰€æœ‰é‡å†™äº†BaseModelçš„getPageæˆ–getExcelæ–¹æ³•çš„æ¨¡åž‹ä¸­éƒ½éœ€è¦åšç›¸åº”ä¿®æ”¹]]></content>
      <categories>
        <category>å·¥ä½œè®°å½•</category>
      </categories>
      <tags>
        <tag>å·¥ä½œè®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlå¼€å‘è§„èŒƒ]]></title>
    <url>%2F2017%2F09%2F12%2Fmysql%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[å‘½åè§„èŒƒ åº“åã€è¡¨åã€å­—æ®µåå¿…é¡»ä½¿ç”¨å°å†™å­—æ¯ï¼Œå¹¶é‡‡ç”¨ä¸‹åˆ’çº¿åˆ†å‰² åº“åã€è¡¨åã€å­—æ®µåç¦ç”¨è¶…è¿‡32ä¸ªå­—ç¬¦ã€‚é¡»è§åçŸ¥æ„ åº“åã€è¡¨åã€å­—æ®µåç¦ç”¨ä½¿ MySQLä¿ç•™å­— ä¸´æ—¶åº“ã€è¡¨åå¿…é¡»ä»¥tmpä¸ºå‰ç¼€ï¼Œå¹¶ä»¥æ—¥æœŸä¸ºåŽç¼€ å¤‡ä»½åº“ã€è¡¨å¿…é¡»ä»¥bakä¸ºå‰ç¼€ï¼Œå¹¶ä»¥æ—¥æœŸä¸ºåŽç¼€ åŸºç¡€è§„èŒƒ ä½¿ç”¨INNODBå­˜å‚¨å¼•æ“Ž è¡¨å­—ç¬¦é›†ä½¿ç”¨utf8mb4 æ‰€æœ‰è¡¨éƒ½éœ€è¦æ·»åŠ æ³¨é‡Š å•è¡¨æ•°æ®é‡å»ºè®®æŽ§åˆ¶åœ¨5000Wä»¥å†… ä¸åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å›¾ç‰‡ã€æ–‡ä»¶ç­‰å¤§æ•°æ® ç¦æ­¢åœ¨çº¿ä¸Šåšæ•°æ®åº“åŽ‹åŠ›æµ‹è¯• ç¦æ­¢ä»Žæµ‹è¯•ã€å¼€å‘çŽ¯å¢ƒç›´è¿žæ•°æ®åº“ åº“è¡¨è®¾è®¡ ç¦æ­¢ä½¿ç”¨åˆ†åŒºè¡¨ æ‹†åˆ†å¤§å­—æ®µå’Œè®¿é—®é¢‘çŽ‡ä½Žçš„å­—æ®µï¼Œåˆ†ç¦»å†·çƒ­æ•°æ® HASHè¿›è¡Œæ•£è¡¨ï¼Œè¡¨ååŽç¼€ä½¿ç”¨åè¿›åˆ¶æ•°ï¼Œä¸‹æ ‡ä»Ž0å¼€å§‹ æŒ‰æ—¥æœŸæ—¶é—´åˆ†è¡¨éœ€ç¬¦åˆYYYY[MM][DD][HH]æ ¼å¼ é‡‡ç”¨åˆé€‚çš„åˆ†åº“åˆ†è¡¨ç­–ç•¥ã€‚ä¾‹å¦‚åƒåº“åè¡¨ã€ååº“ç™¾è¡¨ç­‰ å­—æ®µè®¾è®¡ å°½å¯èƒ½ä¸ä½¿ç”¨TEXTã€BLOBç±»åž‹ DECIMALä»£æ›¿FLOATå’ŒDOUBLEå­˜å‚¨ç²¾ç¡®æµ®ç‚¹æ•° Simple is good å°†å­—ç¬¦è½¬åŒ–ä¸ºæ•°å­— ä½¿ç”¨TINYINTæ¥ä»£æ›¿ENUMç±»åž‹ Generosity can be unwise å­˜å‚¨ â€œhelloâ€æ—¶VARCHAR(5) VS VARCHAR(200) Avoid null if possible æ‰€æœ‰å­—æ®µå‡å®šä¹‰ä¸ºNOT NULL ! Smaller is usually better ä½¿ç”¨UNSIGNEDå­˜å‚¨éžè´Ÿæ•´æ•° INTç±»åž‹å›ºå®šå ç”¨4å­—èŠ‚å­˜å‚¨ ä½¿ç”¨timestampå­˜å‚¨æ—¶é—´ ä½¿ç”¨INT UNSIGNEDå­˜å‚¨IPV4 ä½¿ç”¨VARBINARYå­˜å‚¨å¤§å†™æ•æ„Ÿçš„å˜ å­—ç¬¦ä¸² ç¦ç”¨åœ¨æ•°æ®åº“ä¸­å­˜å‚¨æ˜Žæ–‡å¯†ç  ç´¢å¼•è§„èŒƒç´¢å¼•çš„ç”¨é€” åŽ»é‡ åŠ é€Ÿå®šä½ é¿å…æŽ’åº è¦†ç›–ç´¢å¼• ç´¢å¼•æ•°é‡æŽ§åˆ¶ å•å¼ è¡¨ä¸­ç´¢å¼•æ•°é‡ä¸è¶…è¿‡5ä¸ª å•ä¸ªç´¢å¼•ä¸­çš„å­—æ®µæ•°ä¸è¶…è¿‡5ä¸ª å¯¹å­—ç¬¦ä¸²ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œå‰ç¼€ç´¢å¼•é•¿åº¦ä¸è¶…è¿‡8ä¸ªå­—ç¬¦ å»ºè®®ä¼˜å…ˆè€ƒè™‘å‰ç¼€ç´¢å¼•ï¼Œå¿…è¦æ—¶å¯æ·»åŠ ä¼ªåˆ—å¹¶å»ºç«‹ç´¢å¼• ä¸»é”®å‡†åˆ™ è¡¨å¿…é¡»æœ‰ä¸»é”® ä¸ä½¿ç”¨æ›´æ–°é¢‘ç¹çš„åˆ— å°½é‡ä¸é€‰æ‹©å­—ç¬¦ä¸²åˆ— ä¸ä½¿ç”¨UUID MD5 HASH é»˜è®¤ä½¿ç”¨éžç©ºçš„å”¯ä¸€é”® å»ºè®®é€‰æ‹©è‡ªå¢žæˆ–å‘å·å™¨ é‡è¦çš„SQLå¿…é¡»è¢«ç´¢å¼• UPDATEã€DELETEè¯­å¥çš„WHEREæ¡ä»¶åˆ— ORDER BYã€GROUP BYã€DISTINCTçš„å­—æ®µ å¤šè¡¨JOINçš„å­—æ®µ åŒºåˆ†åº¦æœ€å¤§çš„å­—æ®µæ”¾åœ¨å‰æ ¸å¿ƒSQLä¼˜å…ˆè€ƒè™‘è¦†ç›–ç´¢å¼•é¿å…å†—ä½™å’Œé‡å¤ç´¢å¼•ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ ç»¼åˆè¯„ä¼°æ•°æ®å¯†åº¦å’Œåˆ†å¸ƒ è€ƒè™‘æŸ¥è¯¢å’Œæ›´æ–°æ¯”ä¾‹]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>æ’ä»¶</tag>
        <tag>plugins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017/10/01-10/07 æˆéƒ½-æ³¸æ²½æ¹–-æ´±æµ·è‡ªé©¾æ¸¸]]></title>
    <url>%2F2017%2F09%2F08%2Fnational-day-holiday-travels%2F</url>
    <content type="text"><![CDATA[ä½å®¿å®‰æŽ’10æœˆ1æ—¥4ç‚¹ä»Žæˆéƒ½å‡ºå‘è¿™æ˜¯å¤§æ¦‚6ç‚¹å·¦å³çš„æˆé›…é«˜é€Ÿå¤§æ¦‚ä¸­ä¸‹åˆ1ç‚¹åˆ°äº†è¥¿æ˜Œ,éšæ„åœ¨è·¯è¾¹åƒäº†ä¸ªå¹²é”…é¸¡,ç„¶åŽåŽ»é…’åº—æ”¾äº†è¡ŒæŽ,ç¡ä¸ªè§‰,å°±åŽ»ç¼æµ·è¾¹ä¸Šæºœè¾¾äº†è¿™ä¸ªæ˜¯ç¼æµ·,è¿˜è¡Œ,æ¯”è¾ƒç©ºæ—·,ç©ºæ°”ä¸é”™æ™šä¸Šåœ¨è¥¿æ˜Œåƒäº†å½“åœ°çš„ç¾Šè‚‰ç±³ç²‰ 10æœˆ2æ—¥å…¨ç¨‹307çœé“,ä»Žè¥¿æ˜Œç»ç›æºåŽ¿åˆ°æ³¸æ²½æ¹–,å¤§æ¦‚7å°æ—¶,260å…¬é‡Œå±±è·¯,è·¯ä¸Šæœ‰ç‚¹å µæˆ‘ä»¬å…¥ä½çš„æ³¸æ²½æ¹–é˜¿å¡”å…„å¼Ÿä¹‹å®¶çš„æ™šé¤,è¿˜ä¸é”™,æ¯”è¾ƒæœ‰å½“åœ°ç‰¹è‰²çš„èœ 10æœˆ3æ—¥å½“å¤©æ™šä¸Šä¾ç„¶åœ¨é˜¿å¡”å…„å¼Ÿä¹‹å®¶åƒçš„é¥­,åº—é‡Œè¿˜æœ‰ä¸€åªé‡‘æ¯› 10æœˆ4æ—¥å‡†å¤‡ç¦»å¼€æ³¸æ²½æ¹–,å‡ºå‘åŽ»å¤§ç†,ä¸‹é¢è¿™å¼ å›¾æ˜¯æ—©æ™¨7ç‚¹å¤šæ‹åˆ°çš„æ—¥å‡º,è¿˜ä¸é”™å½“å¤©ä¸‹åˆ4ç‚¹å¤šåˆ°äº†å¤§ç†å¤åŸŽ,æœ¬æƒ³åŽ»ç‚¹è¯„ä¸Šäººæ°”é«˜çš„æ®µå…¬å­,å¥ˆä½•äººå¤ªå¤š,ç»“æžœåŽ»æ—è¾¹åƒè¿‡æ¡¥ç±³çº¿äº†(ä»¥åŽå†ä¹Ÿä¸æƒ³åƒäº†),å½“å¤©æ™šä¸ŠåŽ»å¤åŸŽé‡Œé€›äº†ä¸€ä¸‹, å°±å›žå®¢æ ˆç¡è§‰åŽ»äº† 10æœˆ5æ—¥åŽ»å–œæ´²é•‡,æµ·èˆŒå…¬å›­çŽ©äº†å¤§åŠå¤©,æœ¬æ¥è¦åŽ»åŒå»Š,ç»“æžœå½“åœ°â€™æ–½å·¥â€™,æ²¡åŽ»æ™šä¸ŠåŽ»å½“åœ°ä¸€å®¶ä¸é”™çš„ä¸œåŒ—å°é¦†åƒäº†ç²¥å’Œè‘±æ²¹é¢(ä¸ªäººè®¤ä¸ºæ¯”è¿‡æ¡¥ç±³çº¿å¥½åƒå§),é€›äº†ä¸‹å¤åŸŽä¸€å®¶æ¯”è¾ƒæœ‰ç‰¹ç‚¹çš„éº¦å½“åŠ³å½“åœ°çš„é¸¡ä¸ç±³çº¿(è€å©†è¯´å‘³é“ä¸é”™) 10æœˆ6æ—¥å¼€è½¦ä»Žå¤§ç†ç»æ­ç‘žé«˜é€Ÿè½¬é‚£ä¸ªä»€ä¹ˆçœé“(å¿˜äº†)ç»å…ƒè°‹åŽ¿åˆ°æ”€æžèŠ±,ç»“æŸè¿™æ¬¡æ³¸æ²½æ¹–å¤§ç†ä¹‹æ—…ä¸‹é¢æ˜¯åœ¨å…ƒè°‹åŽ¿é™„è¿‘ç»è¿‡çš„ä¸€ä¸ªå˜å½¢é‡‘åˆš(å¿˜äº†å“ªä¸€éƒ¨)çš„æ‹æ‘„åœ° å¤‡æ³¨ æœ¬æ¬¡è¡Œç¨‹2262å…¬é‡Œæ—¶é—´:2017.10.01-2017.10.07]]></content>
      <categories>
        <category>æ¸¸è®°</category>
      </categories>
      <tags>
        <tag>è‡ªé©¾æ¸¸</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[apache2å¼€å¯SSL]]></title>
    <url>%2F2017%2F09%2F08%2Fapache2-ssl%2F</url>
    <content type="text"><![CDATA[windows+apache2å¼€å¯SSLä»¥åŠ80ç«¯å£å¼ºåˆ¶è·³è½¬SSLè®¿é—®çš„æ–¹æ³•ç”³è¯·è¯ä¹¦æŽ¨èLetâ€™s Encrypt(å…è´¹è¯ä¹¦çš„æœ‰æ•ˆæœŸä¸º3ä¸ªæœˆ,ä½†æä¾›äº†è‡ªåŠ¨æ›´æ–°è¯ä¹¦çš„åŠŸèƒ½),ä¹Ÿå¯ä»¥ç”¨é˜¿é‡Œäº‘(å…è´¹è¯ä¹¦æœ‰æ•ˆæœŸ1å¹´,ç›®å‰æ˜¯æ‰‹åŠ¨æ›´æ–°) å¼€å¯sslæ¨¡å—é¦–å…ˆç¡®ä¿apacheå¼€å¯äº†LoadModule ssl_module modules/mod_ssl.so é…ç½®443ç«¯å£å†å‚è€ƒå®˜æ–¹æ–‡æ¡£çš„ä¸€æ®µå†…å®¹:12345678Listen 443&lt;VirtualHost *:443&gt; DocumentRoot "é¡¹ç›®å…¥å£æ–‡ä»¶ç›®å½•" ServerName åŸŸå SSLEngine on SSLCertificateFile "è·¯å¾„/æ–‡ä»¶å.cert" SSLCertificateKeyFile "è·¯å¾„/æ–‡ä»¶å.key"&lt;/VirtualHost&gt; åœ¨apacheçš„vhosts.confä¸­æ·»åŠ ä»¥ä¸Šä»£ç ,é‡å¯apache é…ç½®80ç«¯å£è·³è½¬443è¿™é‡Œç›´æŽ¥ä¸Šä»£ç :123456&lt;VirtualHost *:80&gt; RewriteEngine on RewriteCond %&#123;SERVER_PORT&#125; !^443$ RewriteRule ^/?(.*)$ https://%&#123;SERVER_NAME&#125;%&#123;REQUEST_URI&#125; [L,R] ServerName åŸŸå&lt;/VirtualHost&gt; å‘Šè¯‰apacheå°†è¯¥åŸŸåä¸‹80ç«¯å£çš„æ‰€æœ‰è¯·æ±‚è·³è½¬åˆ°443,é‡å¯apache è‡³æ­¤é…ç½®å®Œæˆåœ¨ubuntuçŽ¯å¢ƒä¸‹é…ç½®åŸºæœ¬ä¸€æ ·,å¼€å¯apache sslæ¨¡å—æ”¯æŒä½¿ç”¨sudo a2enmod ssl,ç„¶åŽé‡å¯service apache2 restart è¡¥å……:åŽé¢åœ¨ä¸€ä¸ªå¾®ä¿¡é¡¹ç›®ä¸­å‘çŽ°ä»¥ä¸Šåšæ³•çš„ä¸€ä¸ªé—®é¢˜:å®‰å“æ‰‹æœºåœ¨ä½¿ç”¨å¾®ä¿¡å†…ç½®æµè§ˆå™¨QQæµè§ˆå™¨X5å†…æ ¸æä¾›æŠ€æœ¯æ”¯æŒè®¿é—®å¯èƒ½ä¼šå‡ºçŽ°é¡µé¢ç©ºç™½çš„æƒ…å†µ,è€Œåœ¨PCç«¯çš„è°ƒè¯•å·¥å…·å’ŒIOSä»¥åŠå…¶ä»–æµè§ˆå™¨ä¸Šæœªå‘çŽ°è¯¥é—®é¢˜è§£å†³æ–¹æ³•:ä¿®æ”¹è™šæ‹Ÿæœºé…ç½®å¦‚ä¸‹:`Listen 443 DocumentRoot â€œé¡¹ç›®å…¥å£æ–‡ä»¶ç›®å½•â€ ServerName åŸŸå SSLEngine on SSLCertificateFile â€œè·¯å¾„/æ–‡ä»¶å.certâ€ SSLCertificateKeyFile â€œè·¯å¾„/æ–‡ä»¶å.keyâ€ SSLCertificateChainFile â€œè·¯å¾„/æ–‡ä»¶å.pemâ€` å…¶å®žå°±æ˜¯æ·»åŠ äº†ä¸€è¡ŒSSLCertificateChainFile]]></content>
      <categories>
        <category>æœåŠ¡å™¨</category>
      </categories>
      <tags>
        <tag>apache</tag>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ²¹çŒ´çš„ç®€å•ä½¿ç”¨]]></title>
    <url>%2F2017%2F09%2F05%2Fgrease-monkey%2F</url>
    <content type="text"><![CDATA[å…³äºŽgreasemonkey(æ²¹çŒ´)çš„å®‰è£…å’Œä¸€äº›å®žç”¨è„šæœ¬æŽ¨èæ­¥éª¤å‡†å¤‡å·¥ä½œ:ç¡®ä¿ä½ çš„ç”µè„‘å¯ä»¥ç§‘å­¦ä¸Šç½‘ä»¥æœ¬äººçš„chromeæµè§ˆå™¨ä¸ºä¾‹ 1. æ‰“å¼€ä¸€ä¸ªæ–°æ ‡ç­¾é¡µ2. åœ°å€æ è¾“å…¥chrome://apps/3. é¡µé¢å³ä¸‹è§’é€‰æ‹©ç½‘ä¸Šåº”ç”¨åº—4. æœç´¢greasemonkey,å¦‚å›¾: 5. ç‚¹å‡»å®‰è£…,å®Œæˆå®‰è£…åŽåœ¨å¦‚å›¾ä½ç½®ä¼šå‡ºçŽ°ä¸€ä¸ªå›¾æ ‡ 6. ç‚¹å‡»èŽ·å–æ–°è„šæœ¬è·³è½¬åˆ°ä¸€ä¸ªé¡µé¢,åœ¨å½“å‰é¡µé¢ä¸­ç‚¹å‡»é€”ä¸­ä½ç½® 7. ä¼šè·³è½¬åˆ°Greasy Forkçš„æœç´¢é¡µ,åœ¨æœç´¢æ¡†ä¸­è¾“å…¥userscript+ç‚¹å‡»enter8. åœ¨å‡ºçŽ°çš„ç»“æžœä¸­é€‰æ‹© å…¶ä»– greasemonkey(æ²¹çŒ´å­ä»‹ç»)ç®€å•è¯´æ˜¯ä¸€ä¸ªå¯ä»¥å®‰è£…å½“å‰æ­£åœ¨æµè§ˆé¡µé¢å¯ç”¨çš„é¢å¤–åŠŸèƒ½çš„è„šæœ¬,ä¸¾ä¸ªæ —å­:éžä¼šå‘˜åœ¨ä¼˜é…·è§†é¢‘æ— æ³•è§‚çœ‹ä¼šå‘˜è§†é¢‘,è€Œå®‰è£…æ²¹çŒ´å­ä¹‹åŽå†å®‰è£…äº†userscript+è„šæœ¬å°±å¯ä»¥è‡ªåŠ¨åœ¨å½“å‰é¡µé¢æ£€æµ‹å¯ç”¨çš„è„šæœ¬(å¯ç”¨è„šæœ¬çš„æç¤ºå°†ä¼šå‡ºçŽ°åœ¨é¡µé¢å³ä¸‹è§’,ç‚¹å‡»å³å®‰è£…) ä»‹ç»ä¸€ä¸‹VIPè§†é¢‘ç ´è§£è„šæœ¬ç”¨æ³•ç”¨ä¼˜é…·ä¸¾ä¾‹å§,ç›´æŽ¥ä¸Šå›¾ 1. é¦–é¡µç‚¹å‡»ä¼šå‘˜ 2. éšä¾¿é€‰æ‹©ä¸€ä¸ªè§†é¢‘ 3. è§†é¢‘æ’­æ”¾çª—å£å·¦ä¸Šè§’å¯ä»¥åˆ‡æ¢é€šé“(éƒ¨åˆ†é€šé“å¯èƒ½æ— æ³•æ’­æ”¾,ä¸è¿‡é€‰æ‹©è¶…å¤š) æœ¬æ–‡ä»…ä¾›å¿ƒå¾—äº¤æµ,è¯·è‡ªè§‰è´­ä¹°ä¼šå‘˜æ”¯æŒæ­£ç‰ˆ!å…³äºŽç§‘å­¦ä¸Šç½‘è¯·è‡ªè¡Œbaidu]]></content>
      <categories>
        <category>å…¶ä»–äº¤æµ</category>
      </categories>
      <tags>
        <tag>æ’ä»¶</tag>
        <tag>plugins</tag>
      </tags>
  </entry>
</search>
